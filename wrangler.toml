name = "kalenjin-books-worker"
main = "src/worker/index.ts"
compatibility_date = "2024-12-11"
compatibility_flags = ["nodejs_compat"]

# R2 bucket binding for book storage
[[r2_buckets]]
binding = "BOOKS_BUCKET"
bucket_name = "kalenjin-books"
preview_bucket_name = "kalenjin-books-preview"

# D1 database binding
[[d1_databases]]
binding = "DB"
database_name = "kalenjin-books-db"
database_id = "20c23a0e-1b05-4aa7-a17f-2dc5a5e8f65c"
preview_database_id = "108a37f4-17b4-43e3-8b4d-377353ff9430"
migrations_dir = "prisma/migrations"

# KV namespaces for caching and sessions
[[kv_namespaces]]
binding = "CACHE"
id = "027a028d8b764515ba1754f337a64cef"
preview_id = "8959da36c5414ab389ad118c122d45a0"

[[kv_namespaces]]
binding = "SESSION"
id = "99d4cf1bf19047c481445f3a3d37d14b"
preview_id = "0299bf93510c4aab970cd04fbfcb42c5"


# Environment variables
[vars]
NEXTAUTH_URL = "http://localhost:3000"
STRIPE_PUBLISHABLE_KEY = ""

# Secrets (set via wrangler secret put)
# NEXTAUTH_SECRET
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET
# DATABASE_URL
# R2_ACCESS_KEY_ID
# R2_SECRET_ACCESS_KEY
