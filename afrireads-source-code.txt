==================================================================
AfriReads - Kalenjin Books Platform - Source Code Export
Generated: Wed  3 Dec 11:26:49 EAT 2025
==================================================================


##################################################################
# File: package.json
##################################################################

{
  "name": "afrireads",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "next": "16.0.6",
    "react": "19.2.0",
    "react-dom": "19.2.0",
    "@prisma/client": "^6.1.0",
    "@prisma/adapter-d1": "^6.1.0",
    "next-auth": "^4.24.10",
    "stripe": "^17.5.0",
    "pdfjs-dist": "^4.9.155",
    "react-pdf": "^9.1.1",
    "zod": "^3.24.1",
    "bcryptjs": "^2.4.3",
    "@aws-sdk/client-s3": "^3.716.0"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@types/bcryptjs": "^2.4.6",
    "eslint": "^9",
    "eslint-config-next": "16.0.6",
    "tailwindcss": "^4",
    "typescript": "^5",
    "wrangler": "^3.95.0",
    "@cloudflare/workers-types": "^4.20241127.0",
    "prisma": "^6.1.0"
  }
}


##################################################################
# File: tsconfig.json
##################################################################

{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}


##################################################################
# File: tailwind.config.ts
##################################################################

import type { Config } from "tailwindcss";

const config: Config = {
    content: [
        "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
        "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
        "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
    ],
    theme: {
        extend: {
            colors: {
                primary: {
                    DEFAULT: '#C66B4C',
                    dark: '#A8563B',
                    light: '#D88A6F',
                },
                neutral: {
                    cream: '#F7F5F0',
                    brown: {
                        900: '#2D241E',
                        700: '#4A4A4A',
                        500: '#9B8D82',
                    }
                },
                accent: {
                    green: '#4E6E50',
                    gold: '#D4AF37',
                },
                error: '#D64545',
                success: '#4CAF50',
            },
            fontFamily: {
                heading: ['Merriweather', 'Playfair Display', 'Georgia', 'serif'],
                body: ['Roboto', 'Helvetica Neue', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
            },
            borderRadius: {
                'button': '24px',
                'card': '12px',
                'nav': '4px',
                'icon': '8px',
            },
        },
    },
    plugins: [],
};

export default config;


##################################################################
# File: next.config.ts
##################################################################

import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;


##################################################################
# File: wrangler.toml
##################################################################

name = "afrireads"
main = "src/index.ts"
compatibility_date = "2024-12-02"

# R2 bucket binding for book storage
[[r2_buckets]]
binding = "BOOKS_BUCKET"
bucket_name = "kalenjin-books"

# D1 database binding
[[d1_databases]]
binding = "DB"
database_name = "kalenjin-books-db"
database_id = "" # Will be filled after creating the database

# KV namespace for caching (optional)
[[kv_namespaces]]
binding = "CACHE"
id = "" # Will be filled after creating KV namespace

# Environment variables
[vars]
NEXTAUTH_URL = "http://localhost:3000"
STRIPE_PUBLISHABLE_KEY = ""

# Secrets (set via wrangler secret put)
# NEXTAUTH_SECRET
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET
# DATABASE_URL
# R2_ACCESS_KEY_ID
# R2_SECRET_ACCESS_KEY


##################################################################
# File: .env.example
##################################################################

# Database
DATABASE_URL="file:./dev.db"

# Cloudflare
CLOUDFLARE_ACCOUNT_ID=your_account_id_here
CLOUDFLARE_API_TOKEN=your_api_token_here
R2_BUCKET_NAME=kalenjin-books
R2_ACCESS_KEY_ID=your_r2_access_key_here
R2_SECRET_ACCESS_KEY=your_r2_secret_key_here

# NextAuth
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_here

# Stripe
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_here

# M-Pesa (optional)
MPESA_CONSUMER_KEY=your_mpesa_consumer_key_here
MPESA_CONSUMER_SECRET=your_mpesa_consumer_secret_here
MPESA_SHORTCODE=your_mpesa_shortcode_here
MPESA_PASSKEY=your_mpesa_passkey_here

# Platform Settings
PLATFORM_COMMISSION_PERCENTAGE=10
TIME_LIMITED_ACCESS_HOURS=168


##################################################################
# File: prisma/schema.prisma
##################################################################

// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(uuid())
  email         String    @unique
  password      String
  name          String?
  role          UserRole  @default(READER)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  // Relations
  author        Author?
  purchases     Purchase[]
  accessLinks   TimeAccessLink[]
}

enum UserRole {
  READER
  AUTHOR
  ADMIN
}

model Author {
  id            String    @id @default(uuid())
  userId        String    @unique
  bio           String?
  profileImage  String?
  phoneNumber   String?
  paymentMethod String?   // e.g., "mpesa", "bank"
  paymentDetails String?  // JSON string with payment info
  totalEarnings Float     @default(0)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  // Relations
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  books         Book[]
  payments      Payment[]
}

model Book {
  id            String    @id @default(uuid())
  title         String
  description   String?
  coverImage    String?
  fileKey       String    // R2 object key
  fileSize      Int       // in bytes
  fileType      String    // pdf, epub
  price         Float
  previewPages  Int       @default(10)
  category      String?
  language      String    @default("Kalenjin")
  publishedAt   DateTime?
  isPublished   Boolean   @default(false)
  authorId      String
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  // Relations
  author        Author    @relation(fields: [authorId], references: [id], onDelete: Cascade)
  purchases     Purchase[]
  accessLinks   TimeAccessLink[]
}

model Purchase {
  id            String    @id @default(uuid())
  userId        String
  bookId        String
  amount        Float
  platformFee   Float
  authorEarning Float
  stripePaymentId String?
  mpesaPaymentId  String?
  status        PurchaseStatus @default(PENDING)
  purchasedAt   DateTime  @default(now())
  
  // Relations
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  book          Book      @relation(fields: [bookId], references: [id], onDelete: Cascade)
}

enum PurchaseStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
}

model Payment {
  id            String    @id @default(uuid())
  authorId      String
  amount        Float
  status        PaymentStatus @default(PENDING)
  method        String    // mpesa, bank_transfer
  reference     String?
  paidAt        DateTime?
  createdAt     DateTime  @default(now())
  
  // Relations
  author        Author    @relation(fields: [authorId], references: [id], onDelete: Cascade)
}

enum PaymentStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}

model TimeAccessLink {
  id            String    @id @default(uuid())
  token         String    @unique
  userId        String
  bookId        String
  expiresAt     DateTime
  isRevoked     Boolean   @default(false)
  createdAt     DateTime  @default(now())
  
  // Relations
  user          User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  book          Book      @relation(fields: [bookId], references: [id], onDelete: Cascade)
}


##################################################################
# File: src/app/authors/[id]/page.tsx
##################################################################

'use client';

import { ArrowLeft, BookOpen, Star, Mail, MapPin, Calendar } from 'lucide-react';
import Link from 'next/link';
import { useParams } from 'next/navigation';

// Mock data - in production this would come from a database
const authorsData = [
    {
        id: 1,
        name: "Dr. Kiprop Lagat",
        role: "Cultural Historian",
        bio: "Dr. Lagat has spent over 20 years documenting the oral traditions of the Kalenjin people. His work focuses on preserving the wisdom of elders for future generations.",
        fullBio: "Dr. Kiprop Lagat is a renowned cultural historian and anthropologist specializing in the oral traditions of the Kalenjin community. Born in Nandi County, he developed a passion for storytelling from his grandfather, a village elder. After earning his PhD in African Studies from the University of Nairobi, Dr. Lagat dedicated his career to documenting and preserving the rich heritage of his people. His work has been instrumental in creating a comprehensive archive of Kalenjin folklore, proverbs, and historical narratives. He has collaborated with UNESCO on several cultural preservation projects and regularly conducts workshops in schools to pass on traditional knowledge to younger generations.",
        booksCount: 5,
        rating: 4.9,
        image: "/images/author-kiprop.png",
        location: "Eldoret, Kenya",
        joinedYear: 2018,
        email: "kiprop.lagat@afrireads.com",
        books: [
            { id: 1, title: "Kalenjin Folklore Tales", price: 400, cover: "/books/folklore-tales.png" },
            { id: 2, title: "Traditional Wisdom", price: 350, cover: "/books/traditional-wisdom.png" },
            { id: 3, title: "Elders' Stories", price: 450, cover: "https://via.placeholder.com/200x300/D97706/fff?text=Elders+Stories" }
        ]
    },
    {
        id: 2,
        name: "Chebet Rotich",
        role: "Children's Author",
        bio: "Chebet weaves magical tales that introduce young readers to African folklore. Her stories are known for their vibrant characters and moral lessons.",
        fullBio: "Chebet Rotich is an award-winning children's author whose enchanting stories have captivated young readers across East Africa. With a background in early childhood education, Chebet understands the importance of culturally relevant literature in shaping young minds. Her books blend traditional African folklore with contemporary themes, creating narratives that resonate with both children and parents. Each story is carefully crafted to impart moral lessons while celebrating African identity and heritage. Chebet's colorful illustrations and engaging storytelling style have made her books favorites in schools and homes alike.",
        booksCount: 8,
        rating: 4.8,
        image: "/images/author-chebet.png",
        location: "Nairobi, Kenya",
        joinedYear: 2019,
        email: "chebet.rotich@afrireads.com",
        books: [
            { id: 4, title: "Children Stories", price: 300, cover: "/books/children-stories.png" },
            { id: 5, title: "The Brave Little Warrior", price: 320, cover: "https://via.placeholder.com/200x300/059669/fff?text=Brave+Warrior" },
            { id: 6, title: "Tales from the Savanna", price: 280, cover: "https://via.placeholder.com/200x300/DC2626/fff?text=Savanna+Tales" }
        ]
    },
    {
        id: 3,
        name: "Kipchoge Keino",
        role: "Biographer",
        bio: "A legendary athlete turned writer, Kipchoge shares inspiring stories of resilience and triumph from the Rift Valley.",
        fullBio: "Kipchoge Keino brings a unique perspective to biographical writing, drawing from his own experiences as a celebrated athlete and his deep connection to the Rift Valley. His transition from sports to literature has allowed him to capture the spirit of determination and excellence that defines the Kalenjin people. Through his biographies, Kipchoge documents the lives of unsung heroes, community leaders, and everyday people whose stories deserve to be told. His writing style is direct, powerful, and deeply moving, reflecting the resilience of the human spirit.",
        booksCount: 3,
        rating: 4.7,
        image: "https://ui-avatars.com/api/?name=Kipchoge+Keino&background=D97706&color=fff&size=200",
        location: "Iten, Kenya",
        joinedYear: 2020,
        email: "kipchoge.keino@afrireads.com",
        books: [
            { id: 7, title: "Champions of the Rift", price: 500, cover: "https://via.placeholder.com/200x300/D97706/fff?text=Champions" },
            { id: 8, title: "Running with Purpose", price: 450, cover: "https://via.placeholder.com/200x300/059669/fff?text=Running" }
        ]
    },
    {
        id: 4,
        name: "Jepkorir Tanui",
        role: "Poet",
        bio: "Jepkorir's poetry captures the beauty of the Nandi Hills and the spirit of its people. Her verses are a celebration of identity and belonging.",
        fullBio: "Jepkorir Tanui is a contemporary poet whose verses paint vivid pictures of life in the Nandi Hills. Her poetry explores themes of identity, belonging, nature, and the intersection of tradition and modernity. With a master's degree in Creative Writing, Jepkorir has developed a distinctive voice that blends traditional oral poetry forms with contemporary free verse. Her work has been featured in numerous literary journals and anthologies, and she regularly performs at poetry festivals across Kenya. Jepkorir's ability to capture the essence of place and emotion in her words has earned her critical acclaim and a devoted following.",
        booksCount: 4,
        rating: 4.9,
        image: "https://ui-avatars.com/api/?name=Jepkorir+Tanui&background=059669&color=fff&size=200",
        location: "Kapsabet, Kenya",
        joinedYear: 2021,
        email: "jepkorir.tanui@afrireads.com",
        books: [
            { id: 9, title: "Whispers of the Hills", price: 380, cover: "https://via.placeholder.com/200x300/059669/fff?text=Whispers" },
            { id: 10, title: "Verses of Home", price: 350, cover: "https://via.placeholder.com/200x300/DC2626/fff?text=Verses" }
        ]
    }
];

export default function AuthorProfilePage() {
    const params = useParams();
    const authorId = parseInt(params.id as string);
    const author = authorsData.find(a => a.id === authorId);

    if (!author) {
        return (
            <div className="min-h-screen bg-neutral-cream flex items-center justify-center">
                <div className="text-center">
                    <h1 className="text-4xl font-bold text-neutral-brown-900 mb-4">Author Not Found</h1>
                    <Link href="/authors" className="text-primary hover:underline">
                        Back to Authors
                    </Link>
                </div>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-neutral-cream pt-8 pb-16">
            <div className="max-w-7xl mx-auto px-6 lg:px-12">
                {/* Navigation */}
                <div className="mb-8">
                    <Link
                        href="/authors"
                        className="inline-flex items-center gap-2 text-neutral-brown-700 hover:text-primary transition-colors font-medium group"
                    >
                        <div className="w-10 h-10 rounded-full bg-white border border-neutral-brown-200 flex items-center justify-center group-hover:border-primary transition-colors shadow-sm">
                            <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                        </div>
                        <span>Back to Authors</span>
                    </Link>
                </div>

                {/* Author Header */}
                <div className="bg-white rounded-3xl shadow-lg border border-neutral-brown-500/10 overflow-hidden mb-12">
                    <div className="bg-gradient-to-r from-primary to-orange-600 h-32"></div>
                    <div className="px-8 pb-8">
                        <div className="flex flex-col md:flex-row gap-8 items-start md:items-end -mt-16">
                            <div className="w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-xl">
                                <img
                                    src={author.image}
                                    alt={author.name}
                                    className="w-full h-full object-cover"
                                />
                            </div>
                            <div className="flex-1">
                                <h1 className="text-4xl font-bold text-neutral-brown-900 font-heading mb-2">{author.name}</h1>
                                <p className="text-xl text-primary font-medium mb-4">{author.role}</p>
                                <div className="flex flex-wrap gap-6 text-sm text-neutral-brown-600">
                                    <div className="flex items-center gap-2">
                                        <MapPin size={16} className="text-accent-green" />
                                        <span>{author.location}</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <Calendar size={16} className="text-accent-gold" />
                                        <span>Joined {author.joinedYear}</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <BookOpen size={16} className="text-primary" />
                                        <span>{author.booksCount} Books Published</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <Star size={16} className="text-accent-gold fill-accent-gold" />
                                        <span>{author.rating} Rating</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <a
                                    href={`mailto:${author.email}`}
                                    className="bg-primary hover:bg-primary-dark text-white font-bold px-6 py-3 rounded-full transition-all hover:-translate-y-1 inline-flex items-center gap-2"
                                >
                                    <Mail size={18} />
                                    Contact Author
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    {/* Biography */}
                    <div className="lg:col-span-2">
                        <div className="bg-white rounded-2xl shadow-sm border border-neutral-brown-500/10 p-8 mb-8">
                            <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6">About {author.name.split(' ')[0]}</h2>
                            <p className="text-neutral-brown-700 leading-relaxed mb-4">
                                {author.fullBio}
                            </p>
                        </div>

                        {/* Published Books */}
                        <div className="bg-white rounded-2xl shadow-sm border border-neutral-brown-500/10 p-8">
                            <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6">Published Books</h2>
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-6">
                                {author.books.map((book) => (
                                    <Link
                                        key={book.id}
                                        href={`/books/${book.id}`}
                                        className="group flex gap-4 p-4 rounded-xl hover:bg-neutral-cream transition-all border border-transparent hover:border-primary/20"
                                    >
                                        <div className="w-24 h-32 rounded-lg overflow-hidden shadow-md flex-shrink-0 bg-gradient-to-br from-primary to-orange-600">
                                            <img
                                                src={book.cover}
                                                alt={book.title}
                                                className="w-full h-full object-cover"
                                            />
                                        </div>
                                        <div className="flex-1">
                                            <h3 className="font-bold text-neutral-brown-900 group-hover:text-primary transition-colors mb-2 line-clamp-2">
                                                {book.title}
                                            </h3>
                                            <p className="text-primary font-bold text-lg">KES {book.price}</p>
                                        </div>
                                    </Link>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Sidebar */}
                    <div className="space-y-6">
                        {/* Stats Card */}
                        <div className="bg-neutral-brown-900 text-white rounded-2xl p-6 relative overflow-hidden">
                            <div className="absolute top-0 right-0 w-32 h-32 bg-primary rounded-full blur-3xl opacity-20 translate-x-1/2 -translate-y-1/2"></div>
                            <div className="relative z-10">
                                <h3 className="text-lg font-bold font-heading mb-6">Author Stats</h3>
                                <div className="space-y-4">
                                    <div className="flex justify-between items-center">
                                        <span className="text-neutral-brown-300">Total Books</span>
                                        <span className="text-2xl font-bold text-primary">{author.booksCount}</span>
                                    </div>
                                    <div className="flex justify-between items-center">
                                        <span className="text-neutral-brown-300">Average Rating</span>
                                        <span className="text-2xl font-bold text-accent-gold">{author.rating}</span>
                                    </div>
                                    <div className="flex justify-between items-center">
                                        <span className="text-neutral-brown-300">Years Active</span>
                                        <span className="text-2xl font-bold text-accent-green">{new Date().getFullYear() - author.joinedYear}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Quick Bio Card */}
                        <div className="bg-white rounded-2xl shadow-sm border border-neutral-brown-500/10 p-6">
                            <h3 className="text-lg font-bold text-neutral-brown-900 font-heading mb-4">Quick Bio</h3>
                            <p className="text-neutral-brown-700 text-sm leading-relaxed">
                                {author.bio}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/authors/page.tsx
##################################################################

'use client';

import { ArrowLeft, BookOpen, Star, User, Twitter, Facebook, Instagram, Linkedin } from 'lucide-react';
import Link from 'next/link';
import Image from 'next/image';

const authors = [
    {
        id: 1,
        name: "Dr. Kiprop Lagat",
        role: "Cultural Historian",
        bio: "Dr. Lagat has spent over 20 years documenting the oral traditions of the Kalenjin people. His work focuses on preserving the wisdom of elders for future generations.",
        booksCount: 5,
        rating: 4.9,
        image: "/images/author-kiprop.png",
        social: {
            twitter: "https://twitter.com/kiproplagat",
            facebook: "https://facebook.com/kiproplagat",
            linkedin: "https://linkedin.com/in/kiproplagat"
        }
    },
    {
        id: 2,
        name: "Chebet Rotich",
        role: "Children's Author",
        bio: "Chebet weaves magical tales that introduce young readers to African folklore. Her stories are known for their vibrant characters and moral lessons.",
        booksCount: 8,
        rating: 4.8,
        image: "/images/author-chebet.png",
        social: {
            twitter: "https://twitter.com/chebetrotich",
            instagram: "https://instagram.com/chebetrotich",
            facebook: "https://facebook.com/chebetrotich"
        }
    },
    {
        id: 3,
        name: "Kipchoge Keino",
        role: "Biographer",
        bio: "A legendary athlete turned writer, Kipchoge shares inspiring stories of resilience and triumph from the Rift Valley.",
        booksCount: 3,
        rating: 4.7,
        image: "https://ui-avatars.com/api/?name=Kipchoge+Keino&background=D97706&color=fff&size=200",
        social: {
            twitter: "https://twitter.com/kipchogewriter",
            linkedin: "https://linkedin.com/in/kipchogewriter"
        }
    },
    {
        id: 4,
        name: "Jepkorir Tanui",
        role: "Poet",
        bio: "Jepkorir's poetry captures the beauty of the Nandi Hills and the spirit of its people. Her verses are a celebration of identity and belonging.",
        booksCount: 4,
        rating: 4.9,
        image: "https://ui-avatars.com/api/?name=Jepkorir+Tanui&background=059669&color=fff&size=200",
        social: {
            twitter: "https://twitter.com/jepkorirpoet",
            instagram: "https://instagram.com/jepkorirpoet",
            facebook: "https://facebook.com/jepkorirpoet"
        }
    }
];

export default function AuthorsPage() {
    return (
        <div className="min-h-screen bg-neutral-cream pt-8 pb-16">
            <div className="max-w-7xl mx-auto px-6 lg:px-12">
                {/* Navigation */}
                <div className="mb-8">
                    <Link
                        href="/"
                        className="inline-flex items-center gap-2 text-neutral-brown-700 hover:text-primary transition-colors font-medium group"
                    >
                        <div className="w-10 h-10 rounded-full bg-white border border-neutral-brown-200 flex items-center justify-center group-hover:border-primary transition-colors shadow-sm">
                            <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                        </div>
                        <span>Back to Home</span>
                    </Link>
                </div>

                <div className="text-center mb-16">
                    <h1 className="text-4xl md:text-5xl font-bold text-neutral-brown-900 font-heading mb-6">Meet Our Authors</h1>
                    <p className="text-xl text-neutral-brown-700 max-w-2xl mx-auto">
                        The brilliant minds and voices behind the stories we love.
                    </p>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {authors.map((author) => (
                        <Link key={author.id} href={`/authors/${author.id}`} className="bg-white rounded-2xl overflow-hidden shadow-sm border border-neutral-brown-500/10 hover:shadow-lg hover:border-primary/30 transition-all group">
                            <div className="p-8 text-center">
                                <div className="w-24 h-24 mx-auto rounded-full overflow-hidden mb-4 border-4 border-neutral-cream group-hover:border-primary transition-colors">
                                    <img
                                        src={author.image}
                                        alt={author.name}
                                        className="w-full h-full object-cover"
                                    />
                                </div>
                                <h3 className="text-xl font-bold text-neutral-brown-900 font-heading mb-1">{author.name}</h3>
                                <p className="text-primary font-medium text-sm mb-4">{author.role}</p>
                                <p className="text-neutral-brown-600 text-sm leading-relaxed mb-6">
                                    {author.bio}
                                </p>

                                <div className="flex items-center justify-center gap-6 border-t border-neutral-brown-100 pt-6 mb-4">
                                    <div className="text-center">
                                        <div className="flex items-center gap-1 text-neutral-brown-900 font-bold">
                                            <BookOpen size={16} className="text-accent-green" />
                                            <span>{author.booksCount}</span>
                                        </div>
                                        <div className="text-xs text-neutral-brown-500">Books</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="flex items-center gap-1 text-neutral-brown-900 font-bold">
                                            <Star size={16} className="text-accent-gold" />
                                            <span>{author.rating}</span>
                                        </div>
                                        <div className="text-xs text-neutral-brown-500">Rating</div>
                                    </div>
                                </div>

                                {/* Social Links */}
                                <div className="flex items-center justify-center gap-3">
                                    {author.social.twitter && (
                                        <a
                                            href={author.social.twitter}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            onClick={(e) => e.stopPropagation()}
                                            className="w-8 h-8 rounded-full bg-neutral-cream hover:bg-primary/10 flex items-center justify-center text-neutral-brown-500 hover:text-primary transition-all"
                                        >
                                            <Twitter size={16} />
                                        </a>
                                    )}
                                    {author.social.facebook && (
                                        <a
                                            href={author.social.facebook}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            onClick={(e) => e.stopPropagation()}
                                            className="w-8 h-8 rounded-full bg-neutral-cream hover:bg-primary/10 flex items-center justify-center text-neutral-brown-500 hover:text-primary transition-all"
                                        >
                                            <Facebook size={16} />
                                        </a>
                                    )}
                                    {author.social.instagram && (
                                        <a
                                            href={author.social.instagram}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            onClick={(e) => e.stopPropagation()}
                                            className="w-8 h-8 rounded-full bg-neutral-cream hover:bg-primary/10 flex items-center justify-center text-neutral-brown-500 hover:text-primary transition-all"
                                        >
                                            <Instagram size={16} />
                                        </a>
                                    )}
                                    {author.social.linkedin && (
                                        <a
                                            href={author.social.linkedin}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            onClick={(e) => e.stopPropagation()}
                                            className="w-8 h-8 rounded-full bg-neutral-cream hover:bg-primary/10 flex items-center justify-center text-neutral-brown-500 hover:text-primary transition-all"
                                        >
                                            <Linkedin size={16} />
                                        </a>
                                    )}
                                </div>
                            </div>
                            <div className="bg-neutral-cream p-4 text-center">
                                <div className="text-neutral-brown-900 font-bold text-sm group-hover:text-primary transition-colors flex items-center justify-center gap-2 w-full">
                                    View Profile <ArrowLeft size={16} className="rotate-180" />
                                </div>
                            </div>
                        </Link>
                    ))}

                    {/* Join Us Card */}
                    <div className="bg-neutral-brown-900 rounded-2xl overflow-hidden shadow-sm border border-neutral-brown-500/10 flex flex-col items-center justify-center text-center p-8 relative">
                        <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                        <div className="relative z-10">
                            <div className="w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mb-6 mx-auto">
                                <User size={32} className="text-primary" />
                            </div>
                            <h3 className="text-2xl font-bold text-white font-heading mb-2">Become an Author</h3>
                            <p className="text-neutral-brown-300 text-sm mb-8">
                                Share your story with the world. Join our community of storytellers.
                            </p>
                            <Link
                                href="/contact"
                                className="bg-primary hover:bg-primary-dark text-white font-bold px-6 py-3 rounded-full transition-all hover:-translate-y-1 inline-block"
                            >
                                Apply Now
                            </Link>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/contact/page.tsx
##################################################################

'use client';

import { Mail, Phone, MapPin, Send, MessageSquare, ArrowLeft } from 'lucide-react';
import Link from 'next/link';

export default function ContactPage() {
    return (
        <div className="min-h-screen bg-neutral-cream pt-8 pb-16">
            <div className="max-w-7xl mx-auto px-6 lg:px-12">
                {/* Navigation */}
                <div className="mb-8">
                    <Link
                        href="/"
                        className="inline-flex items-center gap-2 text-neutral-brown-700 hover:text-primary transition-colors font-medium group"
                    >
                        <div className="w-10 h-10 rounded-full bg-white border border-neutral-brown-200 flex items-center justify-center group-hover:border-primary transition-colors shadow-sm">
                            <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                        </div>
                        <span>Back to Home</span>
                    </Link>
                </div>

                <div className="text-center mb-16">
                    <h1 className="text-4xl md:text-5xl font-bold text-neutral-brown-900 font-heading mb-4">Get in Touch</h1>
                    <p className="text-xl text-neutral-brown-700 max-w-2xl mx-auto">
                        Have a question about an order, a book suggestion, or just want to say hello? We'd love to hear from you.
                    </p>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
                    {/* Contact Info */}
                    <div>
                        <div className="bg-white p-8 rounded-2xl shadow-sm border border-neutral-brown-500/10 mb-8">
                            <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6">Contact Information</h2>

                            <div className="space-y-8">
                                <div className="flex items-start gap-4">
                                    <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center shrink-0">
                                        <Mail className="text-primary" size={24} />
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-neutral-brown-900 mb-1">Email Us</h3>
                                        <p className="text-neutral-brown-600 mb-1">For general inquiries:</p>
                                        <a href="mailto:hello@afrireads.com" className="text-primary font-medium hover:underline">hello@afrireads.com</a>
                                        <p className="text-neutral-brown-600 mt-2 mb-1">For author support:</p>
                                        <a href="mailto:authors@afrireads.com" className="text-primary font-medium hover:underline">authors@afrireads.com</a>
                                    </div>
                                </div>

                                <div className="flex items-start gap-4">
                                    <div className="w-12 h-12 bg-accent-green/10 rounded-full flex items-center justify-center shrink-0">
                                        <Phone className="text-accent-green" size={24} />
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-neutral-brown-900 mb-1">Call Us</h3>
                                        <p className="text-neutral-brown-600 mb-1">Mon-Fri from 8am to 5pm.</p>
                                        <a href="tel:+254700000000" className="text-accent-green font-medium hover:underline">+254 700 000 000</a>
                                    </div>
                                </div>

                                <div className="flex items-start gap-4">
                                    <div className="w-12 h-12 bg-accent-gold/10 rounded-full flex items-center justify-center shrink-0">
                                        <MapPin className="text-accent-gold" size={24} />
                                    </div>
                                    <div>
                                        <h3 className="font-bold text-neutral-brown-900 mb-1">Visit Us</h3>
                                        <p className="text-neutral-brown-600">
                                            AfriReads HQ<br />
                                            Kiptagich House, 3rd Floor<br />
                                            Eldoret, Kenya
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* FAQ Teaser */}
                        <div className="bg-neutral-brown-900 text-white p-8 rounded-2xl relative overflow-hidden">
                            <div className="absolute top-0 right-0 w-32 h-32 bg-primary rounded-full blur-3xl opacity-20 translate-x-1/2 -translate-y-1/2"></div>
                            <div className="relative z-10">
                                <h3 className="text-xl font-bold font-heading mb-2">Frequently Asked Questions</h3>
                                <p className="text-neutral-brown-300 mb-4 text-sm">
                                    Find quick answers to common questions about shipping, payments, and author submissions.
                                </p>
                                <a href="/faq" className="inline-flex items-center gap-2 text-primary font-bold hover:gap-3 transition-all">
                                    Visit FAQ Page <MessageSquare size={16} />
                                </a>
                            </div>
                        </div>
                    </div>

                    {/* Contact Form */}
                    <div className="bg-white p-8 md:p-10 rounded-3xl shadow-lg border border-neutral-brown-500/10">
                        <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6">Send us a Message</h2>
                        <form className="space-y-6">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div className="space-y-2">
                                    <label htmlFor="firstName" className="text-sm font-bold text-neutral-brown-700">First Name</label>
                                    <input
                                        type="text"
                                        id="firstName"
                                        className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                        placeholder="John"
                                    />
                                </div>
                                <div className="space-y-2">
                                    <label htmlFor="lastName" className="text-sm font-bold text-neutral-brown-700">Last Name</label>
                                    <input
                                        type="text"
                                        id="lastName"
                                        className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                        placeholder="Doe"
                                    />
                                </div>
                            </div>

                            <div className="space-y-2">
                                <label htmlFor="email" className="text-sm font-bold text-neutral-brown-700">Email Address</label>
                                <input
                                    type="email"
                                    id="email"
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                    placeholder="john@example.com"
                                />
                            </div>

                            <div className="space-y-2">
                                <label htmlFor="subject" className="text-sm font-bold text-neutral-brown-700">Subject</label>
                                <select
                                    id="subject"
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white"
                                >
                                    <option value="">Select a topic</option>
                                    <option value="order">Order Inquiry</option>
                                    <option value="author">Author Submission</option>
                                    <option value="feedback">Feedback</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>

                            <div className="space-y-2">
                                <label htmlFor="message" className="text-sm font-bold text-neutral-brown-700">Message</label>
                                <textarea
                                    id="message"
                                    rows={5}
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all resize-none"
                                    placeholder="How can we help you?"
                                ></textarea>
                            </div>

                            <button type="button" className="w-full bg-primary hover:bg-primary-dark text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all hover:-translate-y-1 flex items-center justify-center gap-2">
                                Send Message <Send size={18} />
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/request-hard-copy/page.tsx
##################################################################

'use client';

import { ArrowLeft, Package, MapPin, Phone, Mail, User, BookOpen, CheckCircle } from 'lucide-react';
import Link from 'next/link';
import { useSearchParams } from 'next/navigation';
import { useState } from 'react';

export default function RequestHardCopyPage() {
    const searchParams = useSearchParams();
    const bookTitle = searchParams.get('book') || 'Selected Book';
    const bookId = searchParams.get('id') || '';

    const [formData, setFormData] = useState({
        fullName: '',
        email: '',
        phone: '',
        address: '',
        city: '',
        county: '',
        postalCode: '',
        quantity: 1,
        notes: ''
    });

    const [submitted, setSubmitted] = useState(false);

    const handleSubmit = (e: React.FormEvent) => {
        e.preventDefault();
        // In production, this would send to an API
        console.log('Hard copy request:', { ...formData, bookTitle, bookId });
        setSubmitted(true);
    };

    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
        setFormData({
            ...formData,
            [e.target.name]: e.target.value
        });
    };

    if (submitted) {
        return (
            <div className="min-h-screen bg-neutral-cream flex items-center justify-center px-6">
                <div className="max-w-md w-full bg-white rounded-3xl shadow-xl p-8 text-center">
                    <div className="w-20 h-20 bg-accent-green/10 rounded-full flex items-center justify-center mx-auto mb-6">
                        <CheckCircle size={40} className="text-accent-green" />
                    </div>
                    <h1 className="text-3xl font-bold text-neutral-brown-900 font-heading mb-4">Request Submitted!</h1>
                    <p className="text-neutral-brown-700 mb-8 leading-relaxed">
                        Thank you for your interest in a hard copy of <span className="font-bold text-primary">{bookTitle}</span>.
                        We'll review your request and contact you within 2-3 business days with availability and pricing details.
                    </p>
                    <div className="flex flex-col gap-3">
                        <Link
                            href={bookId ? `/books/${bookId}` : '/books'}
                            className="bg-primary hover:bg-primary-dark text-white font-bold px-6 py-3 rounded-full transition-all"
                        >
                            Back to Book
                        </Link>
                        <Link
                            href="/"
                            className="text-neutral-brown-600 hover:text-primary transition-colors"
                        >
                            Return to Home
                        </Link>
                    </div>
                </div>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-neutral-cream pt-8 pb-16">
            <div className="max-w-4xl mx-auto px-6 lg:px-12">
                {/* Navigation */}
                <div className="mb-8">
                    <Link
                        href={bookId ? `/books/${bookId}` : '/books'}
                        className="inline-flex items-center gap-2 text-neutral-brown-700 hover:text-primary transition-colors font-medium group"
                    >
                        <div className="w-10 h-10 rounded-full bg-white border border-neutral-brown-200 flex items-center justify-center group-hover:border-primary transition-colors shadow-sm">
                            <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                        </div>
                        <span>Back to Book</span>
                    </Link>
                </div>

                {/* Header */}
                <div className="text-center mb-12">
                    <div className="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <Package size={32} className="text-primary" />
                    </div>
                    <h1 className="text-4xl md:text-5xl font-bold text-neutral-brown-900 font-heading mb-4">Request Hard Copy</h1>
                    <p className="text-xl text-neutral-brown-700 max-w-2xl mx-auto">
                        Interested in a physical copy of <span className="font-bold text-primary">{bookTitle}</span>? Fill out the form below and we'll get back to you.
                    </p>
                </div>

                {/* Form */}
                <form onSubmit={handleSubmit} className="bg-white rounded-3xl shadow-lg border border-neutral-brown-500/10 p-8 md:p-10">
                    {/* Personal Information */}
                    <div className="mb-8">
                        <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6 flex items-center gap-2">
                            <User size={24} className="text-primary" />
                            Personal Information
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="space-y-2">
                                <label htmlFor="fullName" className="text-sm font-bold text-neutral-brown-700">Full Name *</label>
                                <input
                                    type="text"
                                    id="fullName"
                                    name="fullName"
                                    value={formData.fullName}
                                    onChange={handleChange}
                                    required
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                    placeholder="John Doe"
                                />
                            </div>
                            <div className="space-y-2">
                                <label htmlFor="email" className="text-sm font-bold text-neutral-brown-700">Email Address *</label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    value={formData.email}
                                    onChange={handleChange}
                                    required
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                    placeholder="john@example.com"
                                />
                            </div>
                            <div className="space-y-2 md:col-span-2">
                                <label htmlFor="phone" className="text-sm font-bold text-neutral-brown-700">Phone Number *</label>
                                <input
                                    type="tel"
                                    id="phone"
                                    name="phone"
                                    value={formData.phone}
                                    onChange={handleChange}
                                    required
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                    placeholder="+254 700 000 000"
                                />
                            </div>
                        </div>
                    </div>

                    {/* Shipping Information */}
                    <div className="mb-8 border-t border-neutral-brown-100 pt-8">
                        <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6 flex items-center gap-2">
                            <MapPin size={24} className="text-primary" />
                            Shipping Address
                        </h2>
                        <div className="grid grid-cols-1 gap-6">
                            <div className="space-y-2">
                                <label htmlFor="address" className="text-sm font-bold text-neutral-brown-700">Street Address *</label>
                                <input
                                    type="text"
                                    id="address"
                                    name="address"
                                    value={formData.address}
                                    onChange={handleChange}
                                    required
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                    placeholder="123 Main Street"
                                />
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div className="space-y-2">
                                    <label htmlFor="city" className="text-sm font-bold text-neutral-brown-700">City/Town *</label>
                                    <input
                                        type="text"
                                        id="city"
                                        name="city"
                                        value={formData.city}
                                        onChange={handleChange}
                                        required
                                        className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                        placeholder="Eldoret"
                                    />
                                </div>
                                <div className="space-y-2">
                                    <label htmlFor="county" className="text-sm font-bold text-neutral-brown-700">County *</label>
                                    <input
                                        type="text"
                                        id="county"
                                        name="county"
                                        value={formData.county}
                                        onChange={handleChange}
                                        required
                                        className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                        placeholder="Uasin Gishu"
                                    />
                                </div>
                                <div className="space-y-2">
                                    <label htmlFor="postalCode" className="text-sm font-bold text-neutral-brown-700">Postal Code</label>
                                    <input
                                        type="text"
                                        id="postalCode"
                                        name="postalCode"
                                        value={formData.postalCode}
                                        onChange={handleChange}
                                        className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                                        placeholder="30100"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Order Details */}
                    <div className="mb-8 border-t border-neutral-brown-100 pt-8">
                        <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6 flex items-center gap-2">
                            <BookOpen size={24} className="text-primary" />
                            Order Details
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="space-y-2">
                                <label htmlFor="quantity" className="text-sm font-bold text-neutral-brown-700">Quantity *</label>
                                <select
                                    id="quantity"
                                    name="quantity"
                                    value={formData.quantity}
                                    onChange={handleChange}
                                    className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all bg-white"
                                >
                                    {[1, 2, 3, 4, 5, 10, 20, 50].map(num => (
                                        <option key={num} value={num}>{num} {num === 1 ? 'copy' : 'copies'}</option>
                                    ))}
                                </select>
                            </div>
                            <div className="space-y-2">
                                <label className="text-sm font-bold text-neutral-brown-700">Book Title</label>
                                <div className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 bg-neutral-cream text-neutral-brown-700">
                                    {bookTitle}
                                </div>
                            </div>
                        </div>
                        <div className="space-y-2 mt-6">
                            <label htmlFor="notes" className="text-sm font-bold text-neutral-brown-700">Additional Notes (Optional)</label>
                            <textarea
                                id="notes"
                                name="notes"
                                value={formData.notes}
                                onChange={handleChange}
                                rows={4}
                                className="w-full px-4 py-3 rounded-xl border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all resize-none"
                                placeholder="Any special requests or delivery instructions..."
                            ></textarea>
                        </div>
                    </div>

                    {/* Info Box */}
                    <div className="bg-accent-green/5 border border-accent-green/20 rounded-xl p-6 mb-8">
                        <h3 className="font-bold text-neutral-brown-900 mb-2">What happens next?</h3>
                        <ul className="space-y-2 text-sm text-neutral-brown-700">
                            <li className="flex items-start gap-2">
                                <span className="text-accent-green mt-0.5"></span>
                                <span>We'll review your request and check availability</span>
                            </li>
                            <li className="flex items-start gap-2">
                                <span className="text-accent-green mt-0.5"></span>
                                <span>You'll receive a quote including printing and shipping costs</span>
                            </li>
                            <li className="flex items-start gap-2">
                                <span className="text-accent-green mt-0.5"></span>
                                <span>Once confirmed, we'll process your order and ship within 5-7 business days</span>
                            </li>
                        </ul>
                    </div>

                    {/* Submit Button */}
                    <button
                        type="submit"
                        className="w-full bg-primary hover:bg-primary-dark text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all hover:-translate-y-1 flex items-center justify-center gap-2"
                    >
                        <Package size={20} />
                        Submit Request
                    </button>
                </form>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/faq/page.tsx
##################################################################

'use client';

import { useState } from 'react';
import { ChevronDown, ChevronUp, Search, ArrowLeft } from 'lucide-react';
import Link from 'next/link';

const faqs = [
    {
        category: "Ordering & Shipping",
        questions: [
            {
                q: "Do you ship internationally?",
                a: "Yes! We ship to over 50 countries worldwide. Shipping costs and delivery times vary depending on your location. You can see the exact shipping cost at checkout."
            },
            {
                q: "How long will it take to receive my order?",
                a: "For orders within Kenya, delivery typically takes 2-3 business days. International orders usually arrive within 7-14 business days. You will receive a tracking number once your order has been dispatched."
            },
            {
                q: "Can I change my shipping address after placing an order?",
                a: "If your order hasn't been shipped yet, we can update the address. Please contact our support team immediately at hello@afrireads.com with your order number."
            }
        ]
    },
    {
        category: "Digital Books & Access",
        questions: [
            {
                q: "How do I access my purchased e-books?",
                a: "After purchase, you can access your e-books immediately in your 'My Library' section. For permanent purchases, you can also download the PDF file."
            },
            {
                q: "What is the difference between Permanent Purchase and 24-Hour Access?",
                a: "Permanent Purchase gives you lifetime ownership of the book and allows you to download the PDF. 24-Hour Access lets you read the book online for one day at a significantly lower price, but you cannot download it."
            },
            {
                q: "Can I print the PDF books?",
                a: "Yes, our PDF books are print-friendly for personal use. However, redistribution or commercial printing is strictly prohibited."
            }
        ]
    },
    {
        category: "For Authors",
        questions: [
            {
                q: "How can I publish my book on AfriReads?",
                a: "We love discovering new talent! Visit our 'Authors' page to create an account and submit your manuscript. Our editorial team reviews all submissions within 2 weeks."
            },
            {
                q: "What royalties do authors receive?",
                a: "We offer competitive royalty rates of up to 70% for e-books and 50% for print books. Detailed terms are provided in the author agreement upon acceptance."
            }
        ]
    }
];

export default function FAQPage() {
    const [openIndex, setOpenIndex] = useState<string | null>("0-0");

    const toggleFAQ = (index: string) => {
        setOpenIndex(openIndex === index ? null : index);
    };

    return (
        <div className="min-h-screen bg-neutral-cream pt-8 pb-16">
            <div className="max-w-4xl mx-auto px-6 lg:px-12">
                {/* Navigation */}
                <div className="mb-8">
                    <Link
                        href="/"
                        className="inline-flex items-center gap-2 text-neutral-brown-700 hover:text-primary transition-colors font-medium group"
                    >
                        <div className="w-10 h-10 rounded-full bg-white border border-neutral-brown-200 flex items-center justify-center group-hover:border-primary transition-colors shadow-sm">
                            <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                        </div>
                        <span>Back to Home</span>
                    </Link>
                </div>

                <div className="text-center mb-16">
                    <h1 className="text-4xl md:text-5xl font-bold text-neutral-brown-900 font-heading mb-6">Frequently Asked Questions</h1>
                    <p className="text-xl text-neutral-brown-700 max-w-2xl mx-auto mb-8">
                        Everything you need to know about AfriReads, shipping, and our books.
                    </p>

                    {/* Search Bar */}
                    <div className="relative max-w-lg mx-auto">
                        <input
                            type="text"
                            placeholder="Search for answers..."
                            className="w-full pl-12 pr-4 py-4 rounded-full border border-neutral-brown-200 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none shadow-sm transition-all"
                        />
                        <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-neutral-brown-400" size={20} />
                    </div>
                </div>

                <div className="space-y-12">
                    {faqs.map((section, sectionIndex) => (
                        <div key={sectionIndex}>
                            <h2 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-6 border-b border-neutral-brown-200 pb-2">
                                {section.category}
                            </h2>
                            <div className="space-y-4">
                                {section.questions.map((faq, faqIndex) => {
                                    const id = `${sectionIndex}-${faqIndex}`;
                                    const isOpen = openIndex === id;

                                    return (
                                        <div
                                            key={faqIndex}
                                            className={`bg-white rounded-xl overflow-hidden border transition-all duration-300 ${isOpen ? 'border-primary shadow-md' : 'border-neutral-brown-500/10 hover:border-primary/30'
                                                }`}
                                        >
                                            <button
                                                onClick={() => toggleFAQ(id)}
                                                className="w-full flex items-center justify-between p-6 text-left font-bold text-neutral-brown-900 hover:text-primary transition-colors"
                                            >
                                                <span className="text-lg">{faq.q}</span>
                                                {isOpen ? <ChevronUp className="text-primary shrink-0" /> : <ChevronDown className="text-neutral-brown-400 shrink-0" />}
                                            </button>

                                            <div
                                                className={`overflow-hidden transition-all duration-300 ease-in-out ${isOpen ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
                                                    }`}
                                            >
                                                <div className="p-6 pt-0 text-neutral-brown-700 leading-relaxed border-t border-dashed border-neutral-brown-100">
                                                    {faq.a}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    ))}
                </div>

                {/* Still have questions? */}
                <div className="mt-20 text-center bg-white p-10 rounded-3xl shadow-lg border border-neutral-brown-500/10">
                    <h3 className="text-2xl font-bold text-neutral-brown-900 font-heading mb-4">Still have questions?</h3>
                    <p className="text-neutral-brown-600 mb-8 max-w-xl mx-auto">
                        Can't find the answer you're looking for? Please chat to our friendly team.
                    </p>
                    <a
                        href="/contact"
                        className="inline-block bg-primary hover:bg-primary-dark text-white font-bold px-8 py-4 rounded-full shadow-lg hover:shadow-xl transition-all hover:-translate-y-1"
                    >
                        Get in Touch
                    </a>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/layout.tsx
##################################################################

import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "AfriReads - Kalenjin Books & Literature",
  description: "Discover and explore authentic Kalenjin literature, folklore, and cultural stories. Supporting local authors and preserving our heritage.",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        {children}
      </body>
    </html>
  );
}

##################################################################
# File: src/app/dashboard/author/profile/page.tsx
##################################################################

import { User, Mail, Phone, MapPin, Calendar, Edit } from 'lucide-react';

// Mock author data
const author = {
    name: 'John Kamau',
    email: 'john.kamau@example.com',
    phone: '+254712345678',
    location: 'Nairobi, Kenya',
    bio: 'Passionate storyteller preserving Kalenjin culture through literature. Published author with 8 books focusing on traditional folklore and modern narratives.',
    joinedDate: '2024-01-15',
    paymentMethod: 'M-Pesa',
    mpesaNumber: '+254712345678',
    language: 'Kalenjin, English',
};

export default function ProfilePage() {
    return (
        <div className="p-8">
            {/* Header */}
            <div className="flex items-center justify-between mb-8">
                <div>
                    <h1 className="text-3xl font-bold text-neutral-brown-900">Profile</h1>
                    <p className="text-neutral-brown-700 mt-1">
                        Manage your author profile and settings
                    </p>
                </div>
                <button className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg flex items-center gap-2 transition-all">
                    <Edit size={20} />
                    Edit Profile
                </button>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                {/* Profile Card */}
                <div className="lg:col-span-1">
                    <div className="bg-white rounded-xl p-6 shadow-sm">
                        <div className="flex flex-col items-center text-center">
                            <div className="w-24 h-24 bg-primary/20 rounded-full flex items-center justify-center mb-4">
                                <User size={48} className="text-primary" />
                            </div>
                            <h2 className="text-2xl font-bold text-neutral-brown-900">{author.name}</h2>
                            <p className="text-neutral-brown-700 mt-1">{author.email}</p>
                            <div className="flex items-center gap-2 text-sm text-neutral-brown-700 mt-2">
                                <Calendar size={14} />
                                <span>Joined {new Date(author.joinedDate).toLocaleDateString()}</span>
                            </div>
                        </div>

                        <div className="mt-6 pt-6 border-t border-neutral-brown-500/10 space-y-3">
                            <div className="flex items-center gap-3 text-sm">
                                <Phone size={16} className="text-neutral-brown-700" />
                                <span className="text-neutral-brown-900">{author.phone}</span>
                            </div>
                            <div className="flex items-center gap-3 text-sm">
                                <MapPin size={16} className="text-neutral-brown-700" />
                                <span className="text-neutral-brown-900">{author.location}</span>
                            </div>
                        </div>
                    </div>
                </div>

                {/* Details */}
                <div className="lg:col-span-2 space-y-6">
                    {/* Bio */}
                    <div className="bg-white rounded-xl p-6 shadow-sm">
                        <h3 className="text-lg font-bold text-neutral-brown-900 mb-4">About</h3>
                        <p className="text-neutral-brown-700 leading-relaxed">{author.bio}</p>
                    </div>

                    {/* Author Details */}
                    <div className="bg-white rounded-xl p-6 shadow-sm">
                        <h3 className="text-lg font-bold text-neutral-brown-900 mb-4">
                            Author Information
                        </h3>
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <p className="text-sm text-neutral-brown-700 mb-1">Languages</p>
                                <p className="font-medium text-neutral-brown-900">{author.language}</p>
                            </div>
                            <div>
                                <p className="text-sm text-neutral-brown-700 mb-1">Member Since</p>
                                <p className="font-medium text-neutral-brown-900">
                                    {new Date(author.joinedDate).toLocaleDateString()}
                                </p>
                            </div>
                        </div>
                    </div>

                    {/* Payment Settings */}
                    <div className="bg-white rounded-xl p-6 shadow-sm">
                        <h3 className="text-lg font-bold text-neutral-brown-900 mb-4">
                            Payment Settings
                        </h3>
                        <div className="space-y-4">
                            <div>
                                <p className="text-sm text-neutral-brown-700 mb-1">Preferred Method</p>
                                <p className="font-medium text-neutral-brown-900">{author.paymentMethod}</p>
                            </div>
                            <div>
                                <p className="text-sm text-neutral-brown-700 mb-1">M-Pesa Number</p>
                                <p className="font-medium text-neutral-brown-900">{author.mpesaNumber}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/dashboard/author/layout.tsx
##################################################################

import { ReactNode } from 'react';
import { DashboardSidebar } from '@/components/dashboard/DashboardSidebar';

export default function DashboardLayout({ children }: { children: ReactNode }) {
    return (
        <div className="flex min-h-screen bg-neutral-cream">
            <DashboardSidebar />
            <main className="flex-1 overflow-auto">
                {children}
            </main>
        </div>
    );
}


##################################################################
# File: src/app/dashboard/author/earnings/page.tsx
##################################################################

import { DollarSign, TrendingUp, Download, Calendar, Image as ImageIcon } from 'lucide-react';
import Link from 'next/link';
import Image from 'next/image';

// Mock data
const earnings = {
    total: 145250,
    available: 25000,
    pending: 5000,
    paidOut: 115250,
    trend: 12,
};

const monthlyData = [
    { month: 'Jul', amount: 18500 },
    { month: 'Aug', amount: 22300 },
    { month: 'Sep', amount: 19800 },
    { month: 'Oct', amount: 25400 },
    { month: 'Nov', amount: 28200 },
    { month: 'Dec', amount: 31050 },
];

const transactions = [
    {
        id: '1',
        type: 'sale',
        book: 'Kalenjin Folklore Tales',
        customer: 'John Doe',
        amount: 450,
        platformFee: 50,
        netEarning: 400,
        date: '2024-12-02T10:30:00',
        status: 'completed',
    },
    {
        id: '2',
        type: 'payout',
        description: 'M-Pesa Payout',
        amount: -15000,
        date: '2024-12-01T14:20:00',
        status: 'completed',
    },
    {
        id: '3',
        type: 'sale',
        book: 'Traditional Wisdom',
        customer: 'Jane Smith',
        amount: 675,
        platformFee: 75,
        netEarning: 600,
        date: '2024-12-01T09:15:00',
        status: 'completed',
    },
];

export default function EarningsPage() {
    const maxAmount = Math.max(...monthlyData.map((d) => d.amount));

    return (
        <div className="p-8">
            {/* UI Mockup Reference */}
            <details className="mb-6 bg-white rounded-xl p-4 shadow-sm border-l-4 border-accent-gold">
                <summary className="cursor-pointer font-semibold text-neutral-brown-900 flex items-center gap-2">
                    <ImageIcon size={20} className="text-accent-gold" />
                    View Payment UI Mockups
                </summary>
                <div className="mt-4 border-t border-neutral-brown-500/10 pt-4 space-y-4">
                    <div>
                        <p className="text-sm text-neutral-brown-700 mb-3">
                            Checkout page design:
                        </p>
                        <p className="text-xs text-neutral-brown-700 mb-2 italic">
                            See docs/PAYMENTS.md for detailed payment UI specifications
                        </p>
                    </div>
                </div>
            </details>

            {/* Header */}
            <div className="flex items-center justify-between mb-8">
                <div>
                    <h1 className="text-3xl font-bold text-neutral-brown-900">Earnings</h1>
                    <p className="text-neutral-brown-700 mt-1">
                        Track your sales and manage payouts
                    </p>
                </div>
                <button className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg flex items-center gap-2 transition-all">
                    <Download size={20} />
                    Export Report
                </button>
            </div>

            {/* Stats Grid */}
            <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div className="bg-gradient-to-br from-primary/10 to-primary/5 rounded-xl p-6 border-l-4 border-primary">
                    <div className="flex items-center gap-2 mb-2">
                        <DollarSign className="text-primary" size={20} />
                        <span className="text-sm text-neutral-brown-700">Total Earnings</span>
                    </div>
                    <p className="text-3xl font-bold text-neutral-brown-900">
                        KES {earnings.total.toLocaleString()}
                    </p>
                    <div className="flex items-center gap-1 mt-2 text-accent-green text-sm">
                        <TrendingUp size={14} />
                        <span>+{earnings.trend}% from last month</span>
                    </div>
                </div>

                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <p className="text-sm text-neutral-brown-700 mb-2">Available Balance</p>
                    <p className="text-3xl font-bold text-accent-green">
                        KES {earnings.available.toLocaleString()}
                    </p>
                    <Link
                        href="#request-payout"
                        className="text-sm text-primary hover:text-primary-dark font-medium mt-2 inline-block"
                    >
                        Request Payout 
                    </Link>
                </div>

                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <p className="text-sm text-neutral-brown-700 mb-2">Pending Payouts</p>
                    <p className="text-3xl font-bold text-primary">
                        KES {earnings.pending.toLocaleString()}
                    </p>
                </div>

                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <p className="text-sm text-neutral-brown-700 mb-2">Total Paid Out</p>
                    <p className="text-3xl font-bold text-neutral-brown-900">
                        KES {earnings.paidOut.toLocaleString()}
                    </p>
                </div>
            </div>

            {/* Monthly Earnings Chart */}
            <div className="bg-white rounded-xl p-6 shadow-sm mb-8">
                <div className="flex items-center justify-between mb-6">
                    <h2 className="text-xl font-bold text-neutral-brown-900">Monthly Earnings</h2>
                    <div className="flex items-center gap-2 text-sm text-neutral-brown-700">
                        <Calendar size={16} />
                        <span>Last 6 Months</span>
                    </div>
                </div>

                {/* Simple Bar Chart */}
                <div className="flex items-end justify-between gap-4 h-64">
                    {monthlyData.map((data) => {
                        const height = (data.amount / maxAmount) * 100;
                        return (
                            <div key={data.month} className="flex-1 flex flex-col items-center gap-2">
                                <div className="w-full flex flex-col justify-end h-full">
                                    <div
                                        className="w-full bg-primary rounded-t-lg hover:bg-primary-dark transition-all cursor-pointer relative group"
                                        style={{ height: `${height}%` }}
                                    >
                                        <div className="absolute -top-8 left-1/2 -translate-x-1/2 bg-neutral-brown-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                                            KES {data.amount.toLocaleString()}
                                        </div>
                                    </div>
                                </div>
                                <span className="text-sm font-medium text-neutral-brown-700">
                                    {data.month}
                                </span>
                            </div>
                        );
                    })}
                </div>
            </div>

            {/* Request Payout Section */}
            <div id="request-payout" className="bg-white rounded-xl p-6 shadow-sm mb-8">
                <h2 className="text-xl font-bold text-neutral-brown-900 mb-4">
                    Request Payout
                </h2>
                <div className="flex items-center justify-between p-4 bg-neutral-cream rounded-lg">
                    <div>
                        <p className="text-sm text-neutral-brown-700 mb-1">Available for Payout</p>
                        <p className="text-2xl font-bold text-accent-green">
                            KES {earnings.available.toLocaleString()}
                        </p>
                        <p className="text-xs text-neutral-brown-700 mt-1">
                            Minimum payout: KES 1,000
                        </p>
                    </div>
                    <button
                        disabled={earnings.available < 1000}
                        className="bg-primary hover:bg-primary-dark text-white font-semibold px-8 py-3 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        Request Payout
                    </button>
                </div>
            </div>

            {/* Transaction History */}
            <div className="bg-white rounded-xl shadow-sm overflow-hidden">
                <div className="p-6 border-b border-neutral-brown-500/10">
                    <h2 className="text-xl font-bold text-neutral-brown-900">
                        Transaction History
                    </h2>
                </div>

                <table className="w-full">
                    <thead className="bg-neutral-cream border-b-2 border-neutral-brown-500/10">
                        <tr>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Date
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Type
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Description
                            </th>
                            <th className="px-6 py-4 text-right text-sm font-semibold text-neutral-brown-900">
                                Amount
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Status
                            </th>
                        </tr>
                    </thead>
                    <tbody className="divide-y divide-neutral-brown-500/10">
                        {transactions.map((transaction) => (
                            <tr key={transaction.id} className="hover:bg-neutral-cream/50 transition-colors">
                                <td className="px-6 py-4 text-sm text-neutral-brown-700">
                                    {new Date(transaction.date).toLocaleDateString()}
                                </td>
                                <td className="px-6 py-4">
                                    {transaction.type === 'sale' ? (
                                        <span className="inline-block px-3 py-1 bg-accent-green/20 text-accent-green text-sm font-medium rounded-full">
                                            Sale
                                        </span>
                                    ) : (
                                        <span className="inline-block px-3 py-1 bg-primary/20 text-primary text-sm font-medium rounded-full">
                                            Payout
                                        </span>
                                    )}
                                </td>
                                <td className="px-6 py-4">
                                    <p className="font-medium text-neutral-brown-900">
                                        {transaction.type === 'sale' ? transaction.book : transaction.description}
                                    </p>
                                    {transaction.type === 'sale' && (
                                        <p className="text-xs text-neutral-brown-700">
                                            Customer: {transaction.customer}
                                        </p>
                                    )}
                                </td>
                                <td className="px-6 py-4 text-right">
                                    <p
                                        className={`font-bold ${transaction.type === 'sale' ? 'text-accent-green' : 'text-error'
                                            }`}
                                    >
                                        {transaction.type === 'sale' ? '+' : ''}KES{' '}
                                        {Math.abs(transaction.amount).toLocaleString()}
                                    </p>
                                    {transaction.type === 'sale' && transaction.netEarning && (
                                        <p className="text-xs text-neutral-brown-700">
                                            Net: KES {transaction.netEarning.toLocaleString()}
                                        </p>
                                    )}
                                </td>
                                <td className="px-6 py-4">
                                    <span className="inline-block px-3 py-1 bg-accent-green/20 text-accent-green text-sm font-medium rounded-full">
                                        {transaction.status}
                                    </span>
                                </td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/dashboard/author/books/page.tsx
##################################################################

import { Edit, Trash2, Eye, MoreVertical, Image as ImageIcon } from 'lucide-react';
import Link from 'next/link';
import Image from 'next/image';

// Mock data - would come from API
const books = [
    {
        id: '1',
        title: 'Kalenjin Folklore Tales',
        coverImage: '/mockups/afrireads_landing_page_1764672267589.png',
        price: 500,
        sales: 125,
        earnings: 56250,
        status: 'published',
        publishedAt: '2024-01-15',
    },
    {
        id: '2',
        title: 'Traditional Wisdom',
        coverImage: '/mockups/afrireads_landing_page_1764672267589.png',
        price: 750,
        sales: 98,
        earnings: 44100,
        status: 'published',
        publishedAt: '2024-03-20',
    },
    {
        id: '3',
        title: 'Cultural Heritage',
        coverImage: '/mockups/afrireads_landing_page_1764672267589.png',
        price: 600,
        sales: 76,
        earnings: 34200,
        status: 'published',
        publishedAt: '2024-05-10',
    },
    {
        id: '4',
        title: 'Modern Kalenjin Stories',
        coverImage: '/mockups/afrireads_landing_page_1764672267589.png',
        price: 450,
        sales: 0,
        earnings: 0,
        status: 'draft',
        publishedAt: null,
    },
];

export default function MyBooksPage() {
    return (
        <div className="p-8">
            {/* UI Mockup Reference */}
            <details className="mb-6 bg-white rounded-xl p-4 shadow-sm border-l-4 border-accent-gold">
                <summary className="cursor-pointer font-semibold text-neutral-brown-900 flex items-center gap-2">
                    <ImageIcon size={20} className="text-accent-gold" />
                    View UI Design Mockup (Books Catalog)
                </summary>
                <div className="mt-4 border-t border-neutral-brown-500/10 pt-4">
                    <p className="text-sm text-neutral-brown-700 mb-3">
                        Reference design for books catalog layout:
                    </p>
                    <Image
                        src="/mockups/afrireads_books_catalog_1764672292136.png"
                        alt="Books Catalog Mockup"
                        width={1200}
                        height={800}
                        className="rounded-lg border border-neutral-brown-500/20"
                    />
                </div>
            </details>

            {/* Header */}
            <div className="flex items-center justify-between mb-8">
                <div>
                    <h1 className="text-3xl font-bold text-neutral-brown-900">My Books</h1>
                    <p className="text-neutral-brown-700 mt-1">
                        Manage your published books and drafts
                    </p>
                </div>
                <Link
                    href="/dashboard/author/books/new"
                    className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg transition-all"
                >
                    Upload New Book
                </Link>
            </div>

            {/* Stats Summary */}
            <div className="grid grid-cols-4 gap-4 mb-6">
                <div className="bg-white rounded-lg p-4 shadow-sm">
                    <p className="text-sm text-neutral-brown-700">Total Books</p>
                    <p className="text-2xl font-bold text-neutral-brown-900">{books.length}</p>
                </div>
                <div className="bg-white rounded-lg p-4 shadow-sm">
                    <p className="text-sm text-neutral-brown-700">Published</p>
                    <p className="text-2xl font-bold text-accent-green">
                        {books.filter((b) => b.status === 'published').length}
                    </p>
                </div>
                <div className="bg-white rounded-lg p-4 shadow-sm">
                    <p className="text-sm text-neutral-brown-700">Total Sales</p>
                    <p className="text-2xl font-bold text-primary">
                        {books.reduce((sum, b) => sum + b.sales, 0)}
                    </p>
                </div>
                <div className="bg-white rounded-lg p-4 shadow-sm">
                    <p className="text-sm text-neutral-brown-700">Total Earnings</p>
                    <p className="text-2xl font-bold text-accent-green">
                        KES {books.reduce((sum, b) => sum + b.earnings, 0).toLocaleString()}
                    </p>
                </div>
            </div>

            {/* Books Table */}
            <div className="bg-white rounded-xl shadow-sm overflow-hidden">
                <table className="w-full">
                    <thead className="bg-neutral-cream border-b-2 border-neutral-brown-500/10">
                        <tr>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Book
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Price
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Sales
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Earnings
                            </th>
                            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
                                Status
                            </th>
                            <th className="px-6 py-4 text-right text-sm font-semibold text-neutral-brown-900">
                                Actions
                            </th>
                        </tr>
                    </thead>
                    <tbody className="divide-y divide-neutral-brown-500/10">
                        {books.map((book) => (
                            <tr key={book.id} className="hover:bg-neutral-cream/50 transition-colors">
                                {/* Book Info */}
                                <td className="px-6 py-4">
                                    <div className="flex items-center gap-4">
                                        <div className="w-12 h-16 bg-neutral-cream rounded overflow-hidden flex-shrink-0">
                                            <div className="w-full h-full bg-gradient-to-br from-primary/20 to-primary/5" />
                                        </div>
                                        <div>
                                            <p className="font-medium text-neutral-brown-900">{book.title}</p>
                                            {book.publishedAt && (
                                                <p className="text-xs text-neutral-brown-700">
                                                    Published {new Date(book.publishedAt).toLocaleDateString()}
                                                </p>
                                            )}
                                        </div>
                                    </div>
                                </td>

                                {/* Price */}
                                <td className="px-6 py-4">
                                    <p className="font-medium text-neutral-brown-900">
                                        KES {book.price.toLocaleString()}
                                    </p>
                                </td>

                                {/* Sales */}
                                <td className="px-6 py-4">
                                    <p className="font-medium text-neutral-brown-900">{book.sales}</p>
                                </td>

                                {/* Earnings */}
                                <td className="px-6 py-4">
                                    <p className="font-bold text-accent-green">
                                        KES {book.earnings.toLocaleString()}
                                    </p>
                                </td>

                                {/* Status */}
                                <td className="px-6 py-4">
                                    {book.status === 'published' ? (
                                        <span className="inline-block px-3 py-1 bg-accent-green/20 text-accent-green text-sm font-medium rounded-full">
                                            Published
                                        </span>
                                    ) : (
                                        <span className="inline-block px-3 py-1 bg-neutral-brown-500/20 text-neutral-brown-700 text-sm font-medium rounded-full">
                                            Draft
                                        </span>
                                    )}
                                </td>

                                {/* Actions */}
                                <td className="px-6 py-4">
                                    <div className="flex items-center justify-end gap-2">
                                        <Link
                                            href={`/books/${book.id}`}
                                            className="p-2 text-neutral-brown-700 hover:bg-neutral-brown-500/10 rounded transition-colors"
                                            title="View Book"
                                        >
                                            <Eye size={16} />
                                        </Link>
                                        <Link
                                            href={`/dashboard/author/books/${book.id}/edit`}
                                            className="p-2 text-primary hover:bg-primary/10 rounded transition-colors"
                                            title="Edit Book"
                                        >
                                            <Edit size={16} />
                                        </Link>
                                        <button
                                            className="p-2 text-error hover:bg-error/10 rounded transition-colors"
                                            title="Delete Book"
                                        >
                                            <Trash2 size={16} />
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/dashboard/author/page.tsx
##################################################################

import { DollarSign, Book, ShoppingCart, TrendingUp, Plus, Image as ImageIcon } from 'lucide-react';
import Link from 'next/link';
import Image from 'next/image';

// This would come from API/database
const stats = {
    totalEarnings: 145250,
    earningsTrend: 12,
    booksPublished: 8,
    totalSales: 342,
    salesTrend: 8,
    pendingPayouts: 25000,
};

const recentSales = [
    {
        id: '1',
        book: 'Kalenjin Folklore Tales',
        customer: 'John Doe',
        amount: 500,
        date: '2024-12-02T10:30:00',
    },
    {
        id: '2',
        book: 'Traditional Wisdom',
        customer: 'Jane Smith',
        amount: 750,
        date: '2024-12-02T09:15:00',
    },
    {
        id: '3',
        book: 'Cultural Heritage',
        customer: 'Mike Johnson',
        amount: 600,
        date: '2024-12-01T16:45:00',
    },
];

const topBooks = [
    { title: 'Kalenjin Folklore Tales', sales: 125, earnings: 56250 },
    { title: 'Traditional Wisdom', sales: 98, earnings: 44100 },
    { title: 'Cultural Heritage', sales: 76, earnings: 34200 },
];

const mockupImages = [
    { id: '1', src: '/mockup-1.png', alt: 'Book Mockup 1' },
    { id: '2', src: '/mockup-2.png', alt: 'Book Mockup 2' },
    { id: '3', src: '/mockup-3.png', alt: 'Book Mockup 3' },
];

export default function AuthorDashboardPage() {
    return (
        <div className="p-8 max-w-7xl mx-auto">
            {/* UI Mockup Reference */}
            <details className="mb-6 bg-white rounded-xl p-4 shadow-sm border-l-4 border-accent-gold">
                <summary className="cursor-pointer font-semibold text-neutral-brown-900 flex items-center gap-2">
                    <ImageIcon size={20} className="text-accent-gold" />
                    View UI Design Mockup
                </summary>
                <div className="mt-4 border-t border-neutral-brown-500/10 pt-4">
                    <p className="text-sm text-neutral-brown-700 mb-3">
                        Reference design for this dashboard page:
                    </p>
                    <Image
                        src="/mockups/afrireads_author_dashboard_1764672335838.png"
                        alt="Author Dashboard Mockup"
                        width={1200}
                        height={800}
                        className="rounded-lg border border-neutral-brown-500/20"
                    />
                </div>
            </details>

            {/* Header */}
            <div className="flex items-center justify-between mb-8">
                <div>
                    <h1 className="text-3xl font-bold text-neutral-brown-900">Dashboard</h1>
                    <p className="text-neutral-brown-700 mt-1">
                        Welcome back! Here's your overview
                    </p>
                </div>
                <Link
                    href="/dashboard/author/books/new"
                    className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg flex items-center gap-2 transition-all hover:-translate-y-0.5"
                >
                    <Plus size={20} />
                    Upload New Book
                </Link>
            </div>

            {/* Stats Grid */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                {/* Total Earnings */}
                <div className="bg-white rounded-xl p-6 shadow-sm border-l-4 border-primary">
                    <div className="flex items-center justify-between mb-4">
                        <div className="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                            <DollarSign className="text-primary" size={24} />
                        </div>
                        <span className="text-accent-green text-sm font-medium flex items-center gap-1">
                            <TrendingUp size={16} />
                            +{stats.earningsTrend}%
                        </span>
                    </div>
                    <p className="text-sm text-neutral-brown-700 mb-1">Total Earnings</p>
                    <p className="text-2xl font-bold text-neutral-brown-900">
                        KES {stats.totalEarnings.toLocaleString()}
                    </p>
                </div>

                {/* Books Published */}
                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <div className="flex items-center justify-between mb-4">
                        <div className="w-12 h-12 bg-accent-green/10 rounded-lg flex items-center justify-center">
                            <Book className="text-accent-green" size={24} />
                        </div>
                    </div>
                    <p className="text-sm text-neutral-brown-700 mb-1">Books Published</p>
                    <p className="text-2xl font-bold text-neutral-brown-900">{stats.booksPublished}</p>
                </div>

                {/* Total Sales */}
                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <div className="flex items-center justify-between mb-4">
                        <div className="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center">
                            <ShoppingCart className="text-primary" size={24} />
                        </div>
                        <span className="text-accent-green text-sm font-medium flex items-center gap-1">
                            <TrendingUp size={16} />
                            +{stats.salesTrend}%
                        </span>
                    </div>
                    <p className="text-sm text-neutral-brown-700 mb-1">Total Sales</p>
                    <p className="text-2xl font-bold text-neutral-brown-900">{stats.totalSales}</p>
                </div>

                {/* Pending Payouts */}
                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <div className="flex items-center justify-between mb-4">
                        <div className="w-12 h-12 bg-accent-gold/10 rounded-lg flex items-center justify-center">
                            <DollarSign className="text-accent-gold" size={24} />
                        </div>
                    </div>
                    <p className="text-sm text-neutral-brown-700 mb-1">Available Balance</p>
                    <p className="text-2xl font-bold text-neutral-brown-900">
                        KES {stats.pendingPayouts.toLocaleString()}
                    </p>
                    <Link
                        href="/dashboard/author/earnings"
                        className="text-sm text-primary hover:text-primary-dark font-medium mt-2 inline-block"
                    >
                        Request Payout 
                    </Link>
                </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                {/* Recent Sales */}
                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <div className="flex items-center justify-between mb-4">
                        <h2 className="text-xl font-bold text-neutral-brown-900">Recent Sales</h2>
                        <Link
                            href="/dashboard/author/analytics"
                            className="text-sm text-primary hover:text-primary-dark font-medium"
                        >
                            View All 
                        </Link>
                    </div>

                    <div className="space-y-4">
                        {recentSales.map((sale) => (
                            <div
                                key={sale.id}
                                className="flex items-center justify-between p-4 bg-neutral-cream rounded-lg"
                            >
                                <div>
                                    <p className="font-medium text-neutral-brown-900">{sale.book}</p>
                                    <p className="text-sm text-neutral-brown-700">{sale.customer}</p>
                                    <p className="text-xs text-neutral-brown-700 mt-1">
                                        {new Date(sale.date).toLocaleString()}
                                    </p>
                                </div>
                                <div className="text-right">
                                    <p className="font-bold text-primary">KES {sale.amount}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* Top Performing Books */}
                <div className="bg-white rounded-xl p-6 shadow-sm">
                    <div className="flex items-center justify-between mb-4">
                        <h2 className="text-xl font-bold text-neutral-brown-900">
                            Top Performing Books
                        </h2>
                    </div>

                    <div className="space-y-4">
                        {topBooks.map((book, index) => (
                            <div key={book.title} className="flex items-center gap-4">
                                <div className="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center font-bold text-primary">
                                    {index + 1}
                                </div>
                                <div className="flex-1">
                                    <p className="font-medium text-neutral-brown-900">{book.title}</p>
                                    <p className="text-sm text-neutral-brown-700">{book.sales} sales</p>
                                </div>
                                <div className="text-right">
                                    <p className="font-bold text-accent-green">
                                        KES {book.earnings.toLocaleString()}
                                    </p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/books/[id]/page.tsx
##################################################################

'use client';

import { Star, ShoppingCart, Share2, BookOpen, Clock, Calendar, ChevronRight, User, ArrowLeft, Check, Package } from 'lucide-react';
import Link from 'next/link';
import Image from 'next/image';
import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { FeaturedBooks } from '@/components/home/FeaturedBooks';

// Mock data for the specific book (ID 4)
const bookData = {
    id: '4',
    title: 'Children Stories',
    author: 'Sarah Chebet',
    price: 400, // Permanent price
    rentalPrice: 50, // Temporary price
    rating: 4.7,
    reviewCount: 128,
    category: 'Children',
    description: `Immerse your child in the magical world of African storytelling with this delightful collection of fables and adventures. "Children Stories" brings together age-old wisdom and modern narratives, featuring beloved characters like the clever hare, the mighty lion, and the wise tortoise.

  Each story is crafted to entertain while imparting valuable life lessons about friendship, courage, and honesty. Perfect for bedtime reading or classroom sessions, this book is beautifully illustrated to capture young imaginations.`,
    image: '/books/children-stories.png',
    pages: 120,
    language: 'English & Kalenjin',
    published: '2023',
    isbn: '978-3-16-148410-0',
    tags: ['Folklore', 'Animals', 'Education', 'Bilingual'],
};

// Mock related books
const relatedBooks = [
    {
        id: '1',
        title: 'Kalenjin Folklore Tales',
        author: 'John Kamau',
        price: 500,
        rating: 4.5,
        category: 'Folklore',
        image: '/books/folklore-tales.png',
    },
    {
        id: '6',
        title: 'Animal Fables',
        author: 'Rose Kemunto',
        price: 350,
        rating: 4.2,
        category: 'Children',
    },
    {
        id: '7',
        title: 'My First Kalenjin Words',
        author: 'David Ruto',
        price: 450,
        rating: 4.8,
        category: 'Education',
    },
    {
        id: '8',
        title: 'The Lion\'s Roar',
        author: 'Sarah Chebet',
        price: 420,
        rating: 4.6,
        category: 'Children',
    },
];

export default function BookDetailPage({ params }: { params: { id: string } }) {
    const [purchaseType, setPurchaseType] = useState<'permanent' | 'temporary'>('permanent');
    const router = useRouter();

    const currentPrice = purchaseType === 'permanent' ? bookData.price : bookData.rentalPrice;

    return (
        <div className="min-h-screen bg-neutral-cream pt-8 pb-16">
            {/* Navigation Bar */}
            <div className="max-w-7xl mx-auto px-6 lg:px-12 mb-8 flex items-center justify-between">
                <button
                    onClick={() => router.back()}
                    className="flex items-center gap-2 text-neutral-brown-700 hover:text-primary transition-colors font-medium group"
                >
                    <div className="w-10 h-10 rounded-full bg-white border border-neutral-brown-200 flex items-center justify-center group-hover:border-primary transition-colors shadow-sm">
                        <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                    </div>
                    <span>Back</span>
                </button>

                <div className="flex items-center gap-2 text-sm text-neutral-brown-500 hidden sm:flex">
                    <Link href="/" className="hover:text-primary transition-colors">Home</Link>
                    <ChevronRight size={14} />
                    <Link href="/books" className="hover:text-primary transition-colors">Books</Link>
                    <ChevronRight size={14} />
                    <span className="text-neutral-brown-900 font-medium truncate max-w-[150px]">{bookData.title}</span>
                </div>
            </div>

            <div className="max-w-7xl mx-auto px-6 lg:px-12">
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
                    {/* Left Column: Book Image */}
                    <div className="relative">
                        <div className="aspect-[3/4] rounded-2xl overflow-hidden shadow-2xl relative z-10 bg-white p-4 border border-neutral-brown-500/10">
                            <div className="relative w-full h-full rounded-xl overflow-hidden">
                                <img
                                    src={bookData.image}
                                    alt={bookData.title}
                                    className="w-full h-full object-cover"
                                />
                            </div>
                        </div>
                        {/* Decorative background blob */}
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-accent-green/10 rounded-full blur-3xl -z-0"></div>
                    </div>

                    {/* Right Column: Book Details */}
                    <div>
                        <div className="mb-2">
                            <span className="inline-block px-3 py-1 bg-primary/10 text-primary text-xs font-bold uppercase tracking-wider rounded-full">
                                {bookData.category}
                            </span>
                        </div>

                        <h1 className="text-4xl md:text-5xl font-bold text-neutral-brown-900 font-heading mb-4 leading-tight">
                            {bookData.title}
                        </h1>

                        <div className="flex items-center gap-4 mb-6">
                            <div className="flex items-center gap-2">
                                <div className="w-8 h-8 rounded-full bg-neutral-brown-200 flex items-center justify-center overflow-hidden">
                                    <User size={16} className="text-neutral-brown-700" />
                                </div>
                                <span className="text-lg text-neutral-brown-700 font-medium">
                                    By <span className="text-neutral-brown-900 underline decoration-primary/30 underline-offset-4">{bookData.author}</span>
                                </span>
                            </div>
                            <div className="w-px h-6 bg-neutral-brown-300"></div>
                            <div className="flex items-center gap-1">
                                <Star size={18} className="fill-accent-gold text-accent-gold" />
                                <span className="font-bold text-neutral-brown-900">{bookData.rating}</span>
                                <span className="text-neutral-brown-500 text-sm">({bookData.reviewCount} reviews)</span>
                            </div>
                        </div>

                        {/* Purchase Options */}
                        <div className="bg-white rounded-xl p-6 shadow-sm border border-neutral-brown-500/10 mb-8">
                            <h3 className="text-lg font-bold text-neutral-brown-900 mb-4">Select Access Type</h3>
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                                {/* Permanent Option */}
                                <div
                                    onClick={() => setPurchaseType('permanent')}
                                    className={`cursor-pointer rounded-xl p-4 border-2 transition-all relative overflow-hidden group ${purchaseType === 'permanent'
                                        ? 'border-primary shadow-lg scale-[1.02]'
                                        : 'border-neutral-brown-200 hover:border-primary/50 hover:shadow-md'
                                        }`}
                                >
                                    {/* Background Gradient */}
                                    <div className={`absolute inset-0 opacity-10 transition-opacity ${purchaseType === 'permanent' ? 'bg-gradient-to-br from-primary to-orange-600 opacity-10' : 'bg-gradient-to-br from-neutral-brown-200 to-neutral-brown-100 opacity-0 group-hover:opacity-5'
                                        }`}></div>

                                    {purchaseType === 'permanent' && (
                                        <div className="absolute top-3 right-3 w-6 h-6 bg-gradient-to-r from-primary to-orange-600 rounded-full flex items-center justify-center shadow-md animate-in zoom-in duration-200">
                                            <Check size={14} className="text-white" />
                                        </div>
                                    )}
                                    <div className="relative z-10">
                                        <div className="font-bold text-neutral-brown-900 mb-1 flex items-center gap-2">
                                            <BookOpen size={18} className={purchaseType === 'permanent' ? 'text-primary' : 'text-neutral-brown-400'} />
                                            Permanent Purchase
                                        </div>
                                        <div className={`text-2xl font-bold mb-1 ${purchaseType === 'permanent' ? 'text-primary' : 'text-neutral-brown-700'}`}>
                                            KES {bookData.price}
                                        </div>
                                        <div className="text-xs text-neutral-brown-500 font-medium">Own this book forever. Download PDF anytime.</div>
                                    </div>
                                </div>

                                {/* Temporary Option */}
                                <div
                                    onClick={() => setPurchaseType('temporary')}
                                    className={`cursor-pointer rounded-xl p-4 border-2 transition-all relative overflow-hidden group ${purchaseType === 'temporary'
                                        ? 'border-accent-green shadow-lg scale-[1.02]'
                                        : 'border-neutral-brown-200 hover:border-accent-green/50 hover:shadow-md'
                                        }`}
                                >
                                    {/* Background Gradient */}
                                    <div className={`absolute inset-0 opacity-10 transition-opacity ${purchaseType === 'temporary' ? 'bg-gradient-to-br from-accent-green to-emerald-600 opacity-10' : 'bg-gradient-to-br from-neutral-brown-200 to-neutral-brown-100 opacity-0 group-hover:opacity-5'
                                        }`}></div>

                                    {purchaseType === 'temporary' && (
                                        <div className="absolute top-3 right-3 w-6 h-6 bg-gradient-to-r from-accent-green to-emerald-600 rounded-full flex items-center justify-center shadow-md animate-in zoom-in duration-200">
                                            <Check size={14} className="text-white" />
                                        </div>
                                    )}
                                    <div className="relative z-10">
                                        <div className="font-bold text-neutral-brown-900 mb-1 flex items-center gap-2">
                                            <Clock size={18} className={purchaseType === 'temporary' ? 'text-accent-green' : 'text-neutral-brown-400'} />
                                            24-Hour Access
                                        </div>
                                        <div className={`text-2xl font-bold mb-1 ${purchaseType === 'temporary' ? 'text-accent-green' : 'text-neutral-brown-700'}`}>
                                            KES {bookData.rentalPrice}
                                        </div>
                                        <div className="text-xs text-neutral-brown-500 font-medium">Read online for 24 hours. No download.</div>
                                    </div>
                                </div>
                            </div>

                            {/* Price Summary & Actions */}
                            <div className="flex flex-col gap-4">
                                <button className={`w-full font-bold px-8 py-4 rounded-full shadow-lg hover:shadow-xl transition-all hover:-translate-y-1 flex items-center justify-center gap-2 text-white ${purchaseType === 'permanent' ? 'bg-primary hover:bg-primary-dark' : 'bg-accent-green hover:bg-accent-green/90'
                                    }`}>
                                    <ShoppingCart size={20} />
                                    {purchaseType === 'permanent' ? 'Buy Now' : 'Rent Now'} - KES {currentPrice}
                                </button>
                            </div>
                        </div>

                        <p className="text-lg text-neutral-brown-700 leading-relaxed mb-8 font-body">
                            {bookData.description}
                        </p>

                        {/* Quick Stats */}
                        <div className="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8 border-y border-neutral-brown-500/10 py-6">
                            <div className="flex flex-col gap-1">
                                <span className="text-xs text-neutral-brown-500 uppercase font-bold tracking-wider">Pages</span>
                                <div className="flex items-center gap-2 text-neutral-brown-900 font-medium">
                                    <BookOpen size={18} className="text-primary" />
                                    {bookData.pages}
                                </div>
                            </div>
                            <div className="flex flex-col gap-1">
                                <span className="text-xs text-neutral-brown-500 uppercase font-bold tracking-wider">Language</span>
                                <div className="flex items-center gap-2 text-neutral-brown-900 font-medium">
                                    <span className="text-primary font-serif italic">Aa</span>
                                    {bookData.language}
                                </div>
                            </div>
                            <div className="flex flex-col gap-1">
                                <span className="text-xs text-neutral-brown-500 uppercase font-bold tracking-wider">Published</span>
                                <div className="flex items-center gap-2 text-neutral-brown-900 font-medium">
                                    <Calendar size={18} className="text-primary" />
                                    {bookData.published}
                                </div>
                            </div>
                            <div className="flex flex-col gap-1">
                                <span className="text-xs text-neutral-brown-500 uppercase font-bold tracking-wider">Format</span>
                                <div className="flex items-center gap-2 text-neutral-brown-900 font-medium">
                                    <Clock size={18} className="text-primary" />
                                    {purchaseType === 'permanent' ? 'PDF Download' : 'Online Reader'}
                                </div>
                            </div>
                        </div>

                        {/* Secondary Actions */}
                        <div className="flex gap-4">
                            <Link
                                href={`/request-hard-copy?book=${encodeURIComponent(bookData.title)}&id=${bookData.id}`}
                                className="flex-1 py-3 border-2 border-primary/30 bg-primary/5 rounded-full text-primary hover:bg-primary hover:text-white hover:border-primary transition-all flex items-center justify-center gap-2 font-medium"
                            >
                                <Package size={20} /> Request Hard Copy
                            </Link>
                            <button className="flex-1 py-3 border-2 border-neutral-brown-200 rounded-full text-neutral-brown-500 hover:text-blue-500 hover:border-blue-500 transition-all flex items-center justify-center gap-2 font-medium">
                                <Share2 size={20} /> Share Book
                            </button>
                        </div>

                        {/* Tags */}
                        <div className="flex flex-wrap gap-2 mt-8">
                            {bookData.tags.map((tag) => (
                                <span key={tag} className="text-sm text-neutral-brown-500 bg-neutral-brown-100 px-3 py-1 rounded-md">
                                    #{tag}
                                </span>
                            ))}
                        </div>
                    </div>
                </div>
            </div>

            {/* Related Books Section */}
            <div className="mt-24 border-t border-neutral-brown-500/10 pt-16">
                <div className="max-w-7xl mx-auto px-6 lg:px-12">
                    <h2 className="text-3xl font-bold text-neutral-brown-900 font-heading mb-8">You May Also Like</h2>
                    <FeaturedBooks books={relatedBooks} />
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/books/page.tsx
##################################################################

'use client';

import { useState } from 'react';
import Link from 'next/link';
import { Search, Book, SlidersHorizontal, X, Star, ShoppingCart, ArrowLeft } from 'lucide-react';

// Mock data
const books = [
  {
    id: '1',
    title: 'Kalenjin Folklore Tales',
    author: 'John Kamau',
    price: 500,
    rating: 4.5,
    reviewCount: 24,
    category: 'Folklore',
    language: 'Kalenjin',
    coverImage: '/books/folklore-tales.png',
  },
  {
    id: '2',
    title: 'Traditional Wisdom',
    author: 'Jane Kiplagat',
    price: 750,
    rating: 4.8,
    reviewCount: 18,
    category: 'Non-Fiction',
    language: 'Bilingual',
    coverImage: '/books/traditional-wisdom.png',
  },
  {
    id: '3',
    title: 'Cultural Heritage',
    author: 'Mike Korir',
    price: 600,
    rating: 4.3,
    reviewCount: 31,
    category: 'History',
    language: 'English',
    coverImage: '/books/cultural-heritage.png',
  },
  {
    id: '4',
    title: 'Children Stories',
    author: 'Sarah Chebet',
    price: 400,
    rating: 4.7,
    reviewCount: 42,
    category: 'Children',
    language: 'Kalenjin',
    coverImage: '/books/children-stories.png',
  },
  {
    id: '5',
    title: 'Modern Kalenjin Poetry',
    author: 'David Ruto',
    price: 550,
    rating: 4.6,
    reviewCount: 15,
    category: 'Poetry',
    language: 'Kalenjin',
  },
  {
    id: '6',
    title: 'Educational Guide',
    author: 'Mary Jepkoech',
    price: 800,
    rating: 4.9,
    reviewCount: 28,
    category: 'Education',
    language: 'Bilingual',
  },
  {
    id: '7',
    title: 'Historical Narratives',
    author: 'Peter Kibet',
    price: 650,
    rating: 4.4,
    reviewCount: 19,
    category: 'History',
    language: 'English',
  },
  {
    id: '8',
    title: 'Fiction Adventures',
    author: 'Grace Chepkemoi',
    price: 700,
    rating: 4.5,
    reviewCount: 33,
    category: 'Fiction',
    language: 'Kalenjin',
  },
];

const categories = ['All', 'Fiction', 'Non-Fiction', 'Folklore', 'History', 'Poetry', 'Children', 'Education'];
const languages = ['All Languages', 'Kalenjin', 'English', 'Bilingual'];

export default function BooksPage() {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedCategory, setSelectedCategory] = useState('All');
  const [selectedLanguage, setSelectedLanguage] = useState('All Languages');
  const [priceRange, setPriceRange] = useState(2000);
  const [showFilters, setShowFilters] = useState(false);

  // Filter books
  const filteredBooks = books.filter((book) => {
    const matchesSearch = book.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      book.author.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesCategory = selectedCategory === 'All' || book.category === selectedCategory;
    const matchesPrice = book.price <= priceRange;
    const matchesLanguage = selectedLanguage === 'All Languages' || book.language === selectedLanguage;

    return matchesSearch && matchesCategory && matchesPrice && matchesLanguage;
  });

  return (
    <div className="min-h-screen bg-neutral-cream w-full">
      {/* Navigation */}
      <nav className="bg-white border-b border-neutral-brown-500/10 w-full">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-16">
            <Link href="/" className="flex items-center gap-2">
              <div className="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                <Book className="text-white" size={24} />
              </div>
              <span className="text-xl font-bold text-neutral-brown-900">AfriReads</span>
            </Link>
            <div className="flex items-center gap-4">
              <Link
                href="/"
                className="text-neutral-brown-700 hover:text-neutral-brown-900 font-medium"
              >
                Home
              </Link>
              <Link
                href="/dashboard/author"
                className="hidden sm:block bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-2 rounded-lg transition-all"
              >
                Author Dashboard
              </Link>
            </div>
          </div>
        </div>
      </nav>

      {/* Hero Header */}
      <div className="w-full bg-gradient-to-r from-primary/10 via-primary/5 to-accent-green/10 py-12">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center gap-4 mb-6">
            <Link href="/" className="text-neutral-brown-700 hover:text-primary transition-colors">
              <ArrowLeft size={24} />
            </Link>
            <div>
              <h1 className="text-4xl md:text-5xl font-bold text-neutral-brown-900 font-heading">
                Browse Books
              </h1>
              <p className="text-lg text-neutral-brown-700 mt-2">
                Discover authentic Kalenjin literature from talented authors
              </p>
            </div>
          </div>

          {/* Search Bar */}
          <div className="relative max-w-2xl">
            <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-neutral-brown-700" size={20} />
            <input
              type="search"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              placeholder="Search books by title or author..."
              className="w-full pl-12 pr-4 py-4 bg-white rounded-full shadow-md focus:shadow-lg focus:outline-none border-2 border-transparent focus:border-primary transition-all"
            />
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Category Pills */}
        <div className="flex items-center gap-3 mb-6 overflow-x-auto pb-2">
          {categories.map((category) => (
            <button
              key={category}
              onClick={() => setSelectedCategory(category)}
              className={`px-6 py-2 rounded-full font-medium whitespace-nowrap transition-all ${
                selectedCategory === category
                  ? 'bg-primary text-white shadow-md'
                  : 'bg-white text-neutral-brown-700 hover:bg-primary/10 border border-neutral-brown-500/20'
              }`}
            >
              {category}
            </button>
          ))}
        </div>

        {/* Filters Toggle & Results */}
        <div className="flex items-center justify-between mb-6">
          <p className="text-neutral-brown-700">
            Showing <span className="font-semibold text-neutral-brown-900">{filteredBooks.length}</span> of{' '}
            <span className="font-semibold text-neutral-brown-900">{books.length}</span> books
          </p>
          <button
            onClick={() => setShowFilters(!showFilters)}
            className="flex items-center gap-2 px-4 py-2 bg-white rounded-lg border border-neutral-brown-500/20 hover:border-primary transition-all"
          >
            <SlidersHorizontal size={18} />
            <span className="font-medium">Filters</span>
          </button>
        </div>

        {/* Advanced Filters Panel */}
        {showFilters && (
          <div className="bg-white rounded-xl p-6 shadow-md mb-8 border border-neutral-brown-500/10">
            <div className="flex items-center justify-between mb-6">
              <h3 className="font-bold text-lg text-neutral-brown-900">Advanced Filters</h3>
              <button onClick={() => setShowFilters(false)}>
                <X size={20} className="text-neutral-brown-700" />
              </button>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              {/* Language Filter */}
              <div>
                <h4 className="font-semibold text-neutral-brown-900 mb-3">Language</h4>
                <div className="space-y-2">
                  {languages.map((lang) => (
                    <label key={lang} className="flex items-center gap-2 cursor-pointer">
                      <input
                        type="radio"
                        name="language"
                        checked={selectedLanguage === lang}
                        onChange={() => setSelectedLanguage(lang)}
                        className="w-4 h-4 text-primary"
                      />
                      <span className="text-sm text-neutral-brown-700">{lang}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Price Range */}
              <div>
                <h4 className="font-semibold text-neutral-brown-900 mb-3">
                  Price Range (Max: KES {priceRange})
                </h4>
                <input
                  type="range"
                  min="0"
                  max="2000"
                  value={priceRange}
                  onChange={(e) => setPriceRange(Number(e.target.value))}
                  className="w-full"
                />
                <div className="flex justify-between text-sm text-neutral-brown-700 mt-2">
                  <span>KES 0</span>
                  <span>KES 2,000</span>
                </div>
              </div>

              {/* Clear Filters */}
              <div className="flex items-end">
                <button
                  onClick={() => {
                    setSelectedCategory('All');
                    setSelectedLanguage('All Languages');
                    setPriceRange(2000);
                    setSearchQuery('');
                  }}
                  className="w-full bg-neutral-brown-500/10 hover:bg-neutral-brown-500/20 text-neutral-brown-900 font-medium px-4 py-2 rounded-lg transition-all"
                >
                  Clear All Filters
                </button>
              </div>
            </div>
          </div>
        )}

        {/* Books Grid */}
        {filteredBooks.length > 0 ? (
          <>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
              {filteredBooks.map((book) => (
                <Link key={book.id} href={`/books/${book.id}`}>
                  <div className="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group">
                    {/* Book Cover */}
                    <div className="aspect-[2/3] bg-gradient-to-br from-primary/20 to-primary/5 relative overflow-hidden">
                      <div className="absolute inset-0 flex items-center justify-center p-4">
                        <p className="text-sm font-semibold text-neutral-brown-900 text-center line-clamp-3">
                          {book.title}
                        </p>
                      </div>
                      {/* Quick View Overlay */}
                      <div className="absolute inset-0 bg-neutral-brown-900/90 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-4">
                        <span className="text-white font-semibold">Quick View</span>
                        <div className="flex items-center gap-2">
                          <ShoppingCart size={18} className="text-white" />
                          <span className="text-white text-sm">Add to Cart</span>
                        </div>
                      </div>
                    </div>

                    {/* Book Info */}
                    <div className="p-4">
                      <h3 className="font-semibold text-neutral-brown-900 line-clamp-2 mb-1">
                        {book.title}
                      </h3>
                      <p className="text-sm text-neutral-brown-700 mb-2">{book.author}</p>

                      {/* Rating */}
                      <div className="flex items-center gap-1 mb-3">
                        <div className="flex items-center">
                          {[...Array(5)].map((_, i) => (
                            <Star
                              key={i}
                              size={14}
                              className={i < Math.floor(book.rating) ? 'fill-accent-gold text-accent-gold' : 'text-neutral-brown-500/20'}
                            />
                          ))}
                        </div>
                        <span className="text-xs text-neutral-brown-700">({book.reviewCount})</span>
                      </div>

                      {/* Price and Badges */}
                      <div className="flex items-center justify-between mb-3">
                        <span className="text-xl font-bold text-primary">
                          KES {book.price.toLocaleString()}
                        </span>
                      </div>

                      {/* Badges */}
                      <div className="flex gap-2">
                        <span className="text-xs px-2 py-1 bg-accent-green/20 text-accent-green rounded-full">
                          {book.category}
                        </span>
                        <span className="text-xs px-2 py-1 bg-primary/20 text-primary rounded-full">
                          {book.language}
                        </span>
                      </div>
                    </div>
                  </div>
                </Link>
              ))}
            </div>

            {/* Pagination */}
            <div className="mt-12 flex items-center justify-center gap-2">
              <button className="px-4 py-2 bg-white rounded-lg border border-neutral-brown-500/20 text-neutral-brown-700 hover:border-primary hover:text-primary transition-all font-medium">
                Previous
              </button>
              <button className="px-4 py-2 bg-primary text-white rounded-lg font-medium">
                1
              </button>
              <button className="px-4 py-2 bg-white rounded-lg border border-neutral-brown-500/20 text-neutral-brown-700 hover:border-primary hover:text-primary transition-all">
                2
              </button>
              <button className="px-4 py-2 bg-white rounded-lg border border-neutral-brown-500/20 text-neutral-brown-700 hover:border-primary hover:text-primary transition-all">
                3
              </button>
              <button className="px-4 py-2 bg-white rounded-lg border border-neutral-brown-500/20 text-neutral-brown-700 hover:border-primary hover:text-primary transition-all font-medium">
                Next
              </button>
            </div>
          </>
        ) : (
          <div className="bg-white rounded-xl p-12 text-center shadow-sm">
            <Book size={48} className="text-neutral-brown-500/20 mx-auto mb-4" />
            <h3 className="text-xl font-bold text-neutral-brown-900 mb-2">
              No books found
            </h3>
            <p className="text-neutral-brown-700 mb-6">
              Try adjusting your filters or search query
            </p>
            <button
              onClick={() => {
                setSelectedCategory('All');
                setSelectedLanguage('All Languages');
                setPriceRange(2000);
                setSearchQuery('');
              }}
              className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg transition-all"
            >
              Clear Filters
            </button>
          </div>
        )}
      </div>
    </div>
  );
}

##################################################################
# File: src/app/page.tsx
##################################################################

import Link from 'next/link';
import { Book, Users, TrendingUp, ArrowRight, Search } from 'lucide-react';
import { FeaturedBooks } from '@/components/home/FeaturedBooks';

// Mock featured books data
const featuredBooks = [
  {
    id: '1',
    title: 'Kalenjin Folklore Tales',
    author: 'John Kamau',
    price: 500,
    rating: 4.5,
    category: 'Folklore',
    image: '/books/folklore-tales.png',
  },
  {
    id: '2',
    title: 'Traditional Wisdom',
    author: 'Jane Kiplagat',
    price: 750,
    rating: 4.8,
    category: 'Non-Fiction',
    image: '/books/traditional-wisdom.png',
  },
  {
    id: '3',
    title: 'Cultural Heritage',
    author: 'Mike Korir',
    price: 600,
    rating: 4.3,
    category: 'History',
    image: '/books/cultural-heritage.png',
  },
  {
    id: '4',
    title: 'Children Stories',
    author: 'Sarah Chebet',
    price: 400,
    rating: 4.7,
    category: 'Children',
    image: '/books/children-stories.png',
  },
  {
    id: '5',
    title: 'Modern Poetry',
    author: 'David Ruto',
    price: 550,
    rating: 4.6,
    category: 'Poetry',
  },
  {
    id: '6',
    title: 'Educational Guide',
    author: 'Mary Jepkoech',
    price: 800,
    rating: 4.9,
    category: 'Education',
  },
  {
    id: '7',
    title: 'Historical Narratives',
    author: 'Peter Kibet',
    price: 650,
    rating: 4.4,
    category: 'History',
  },
  {
    id: '8',
    title: 'Fiction Adventures',
    author: 'Grace Chepkemoi',
    price: 700,
    rating: 4.5,
    category: 'Fiction',
  },
];

export default function Home() {
  return (
    <div className="min-h-screen bg-neutral-cream w-full">
      {/* Navigation */}
      <nav className="bg-transparent w-full">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-center h-20 relative">
            {/* Logo - Absolute positioned to left */}
            <Link href="/" className="absolute left-4 sm:left-6 lg:left-8 flex items-center gap-2">
              <div className="w-10 h-10 rounded-lg flex items-center justify-center bg-transparent">
                <Book className="text-accent-green" size={24} />
              </div>
              <span className="text-xl font-bold text-neutral-brown-900 font-heading">AfriReads</span>
            </Link>

            {/* Centered Navigation Links */}
            <div className="hidden md:flex items-center gap-8">
              <Link
                href="/books"
                className="text-neutral-brown-700 hover:text-neutral-brown-900 font-medium transition-colors"
              >
                Books
              </Link>
              <Link
                href="/books#categories"
                className="text-neutral-brown-700 hover:text-neutral-brown-900 font-medium transition-colors"
              >
                Categories
              </Link>
              <Link
                href="/authors"
                className="text-neutral-brown-700 hover:text-neutral-brown-900 font-medium transition-colors"
              >
                Authors
              </Link>
              <Link
                href="/about"
                className="text-neutral-brown-700 hover:text-neutral-brown-900 font-medium transition-colors"
              >
                About
              </Link>
            </div>

            {/* Search - Absolute positioned to right */}
            <button className="absolute right-4 sm:right-6 lg:right-8 p-2 hover:bg-neutral-cream rounded-nav transition-colors cursor-pointer" aria-label="Search">
              <Search size={24} className="text-neutral-brown-900 w-6 h-6" />
            </button>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <div className="w-full bg-gradient-to-b from-white via-neutral-cream/50 to-neutral-cream py-24 px-4 sm:px-6 lg:px-8 relative overflow-hidden">
        {/* Decorative elements */}
        <div className="absolute top-0 left-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
        <div className="absolute bottom-0 right-0 w-96 h-96 bg-accent-green/5 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"></div>

        <div className="max-w-5xl mx-auto relative z-10 text-center">
          <h1 className="text-5xl sm:text-6xl md:text-7xl font-bold text-neutral-brown-900 mb-6 font-heading leading-tight">
            Discover Kalenjin<br />
            <span className="text-primary">Literature</span>
          </h1>
          <p className="text-lg sm:text-xl text-neutral-brown-700 max-w-3xl mx-auto mb-10 leading-relaxed font-body">
            Explore a curated collection of vibrant stories, history, and voices from the Kalenjin community and across Africa.
          </p>
          <div className="flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-5">
            <Link
              href="/books"
              className="w-full sm:w-auto bg-primary hover:bg-primary-dark text-white font-bold px-8 sm:px-10 py-4 sm:py-5 rounded-full shadow-xl hover:shadow-2xl transition-all hover:-translate-y-1 text-base sm:text-lg text-center"
            >
              Shop Kalenjin Books
            </Link>
            <Link
              href="/books"
              className="w-full sm:w-auto bg-accent-green hover:bg-accent-green/90 text-white font-bold px-8 sm:px-10 py-4 sm:py-5 rounded-full shadow-xl hover:shadow-2xl transition-all hover:-translate-y-1 text-base sm:text-lg text-center"
            >
              Explore Collection
            </Link>
          </div>
        </div>
      </div>

      {/* Featured Books */}
      <div className="w-full">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <FeaturedBooks books={featuredBooks} />
        </div>
      </div>

      {/* CTA Section */}
      <div className="w-full bg-gradient-to-r from-primary to-primary-dark py-16">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">
            Ready to Share Your Story?
          </h2>
          <p className="text-xl text-white/90 mb-8">
            Join our community of authors and start publishing your Kalenjin books today
          </p>
          <Link
            href="/dashboard/author"
            className="inline-block bg-white text-primary hover:bg-neutral-cream font-semibold px-8 py-4 rounded-lg transition-all hover:-translate-y-0.5 shadow-lg"
          >
            Start Publishing Today
          </Link>
        </div>
      </div>

      {/* Footer */}
      <footer className="w-full bg-white border-t border-neutral-brown-500/10">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
            <div>
              <div className="flex items-center gap-2 mb-4">
                <div className="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                  <Book className="text-white" size={24} />
                </div>
                <span className="text-xl font-bold text-neutral-brown-900">AfriReads</span>
              </div>
              <p className="text-neutral-brown-700 text-sm">
                Preserving Kalenjin culture through literature
              </p>
            </div>

            <div>
              <h4 className="font-bold text-neutral-brown-900 mb-4">Explore</h4>
              <ul className="space-y-2 text-sm">
                <li><Link href="/books" className="text-neutral-brown-700 hover:text-primary">Browse Books</Link></li>
                <li><Link href="/authors" className="text-neutral-brown-700 hover:text-primary">Authors</Link></li>
                <li><Link href="/books?category=folklore" className="text-neutral-brown-700 hover:text-primary">Categories</Link></li>
              </ul>
            </div>

            <div>
              <h4 className="font-bold text-neutral-brown-900 mb-4">For Authors</h4>
              <ul className="space-y-2 text-sm">
                <li><Link href="/dashboard/author" className="text-neutral-brown-700 hover:text-primary">Dashboard</Link></li>
                <li><Link href="/dashboard/author/books" className="text-neutral-brown-700 hover:text-primary">My Books</Link></li>
                <li><Link href="/dashboard/author/earnings" className="text-neutral-brown-700 hover:text-primary">Earnings</Link></li>
              </ul>
            </div>

            <div>
              <h4 className="font-bold text-neutral-brown-900 mb-4">Support</h4>
              <ul className="space-y-2 text-sm">
                <li><Link href="/about" className="text-neutral-brown-700 hover:text-primary">About Us</Link></li>
                <li><Link href="/contact" className="text-neutral-brown-700 hover:text-primary">Contact</Link></li>
                <li><Link href="/faq" className="text-neutral-brown-700 hover:text-primary">FAQ</Link></li>
              </ul>
            </div>
          </div>

          <div className="border-t border-neutral-brown-500/10 pt-8 text-center text-neutral-brown-700 text-sm">
            <p>&copy; 2024 AfriReads. All rights reserved. Preserving Kalenjin culture through literature.</p>
          </div>
        </div>
      </footer>
    </div>
  );
}

##################################################################
# File: src/app/about/page.tsx
##################################################################

'use client';

import { Users, BookOpen, Heart, Globe, Award, Sparkles, ArrowLeft } from 'lucide-react';
import Image from 'next/image';
import Link from 'next/link';

export default function AboutPage() {
    return (
        <div className="min-h-screen bg-neutral-cream">
            {/* Navigation */}
            <div className="absolute top-8 left-6 z-20">
                <Link
                    href="/"
                    className="flex items-center gap-2 text-neutral-brown-900 hover:text-primary transition-colors font-medium group bg-white/95 backdrop-blur-sm px-4 py-2 rounded-full hover:bg-white shadow-lg border border-neutral-brown-200"
                >
                    <ArrowLeft size={20} className="group-hover:-translate-x-1 transition-transform" />
                    <span>Back to Home</span>
                </Link>
            </div>

            {/* Hero Section */}
            <div className="relative bg-gradient-to-br from-neutral-cream via-white to-neutral-cream py-24 px-6 overflow-hidden border-b-2 border-neutral-brown-200">
                <div className="absolute top-0 left-0 w-full h-full opacity-5 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                <div className="absolute top-0 right-0 w-96 h-96 bg-primary rounded-full blur-3xl opacity-10 translate-x-1/2 -translate-y-1/2"></div>
                <div className="absolute bottom-0 left-0 w-96 h-96 bg-accent-green rounded-full blur-3xl opacity-10 -translate-x-1/2 translate-y-1/2"></div>

                <div className="max-w-7xl mx-auto relative z-10 text-center">
                    <h1 className="text-5xl md:text-6xl font-bold font-heading mb-6 text-neutral-brown-900">Our Story</h1>
                    <p className="text-xl md:text-2xl text-neutral-brown-700 max-w-3xl mx-auto font-body leading-relaxed">
                        Preserving culture, empowering authors, and connecting the world to the richness of Kalenjin literature.
                    </p>
                </div>
            </div>

            {/* Mission & Vision */}
            <div className="py-20 px-6">
                <div className="max-w-7xl mx-auto">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                        <div>
                            <div className="inline-block px-4 py-2 bg-primary/10 text-primary font-bold rounded-full mb-4 text-sm uppercase tracking-wider">Our Mission</div>
                            <h2 className="text-4xl font-bold text-neutral-brown-900 font-heading mb-6">Bridging the Gap Between Tradition and Technology</h2>
                            <p className="text-lg text-neutral-brown-700 mb-6 leading-relaxed">
                                AfriReads was born from a simple yet powerful idea: that African stories, particularly those from the Kalenjin community, deserve a global stage. We are building a digital home for our heritage, ensuring that our folktales, history, and modern narratives are preserved for future generations.
                            </p>
                            <p className="text-lg text-neutral-brown-700 leading-relaxed">
                                We believe in the power of storytelling to educate, inspire, and unite. By providing a platform for local authors, we are not just selling books; we are nurturing a cultural renaissance.
                            </p>
                        </div>
                        <div className="relative">
                            <div className="aspect-square rounded-2xl overflow-hidden shadow-2xl">
                                <Image
                                    src="/images/kalenjin-spirit.png"
                                    alt="Kalenjin storytelling tradition"
                                    width={600}
                                    height={600}
                                    className="w-full h-full object-cover"
                                />
                            </div>
                            <div className="absolute -bottom-10 -left-10 w-48 h-48 bg-accent-green rounded-full blur-3xl opacity-20"></div>
                        </div>
                    </div>
                </div>
            </div>

            {/* Values */}
            <div className="bg-white py-20 px-6">
                <div className="max-w-7xl mx-auto">
                    <div className="text-center mb-16">
                        <h2 className="text-4xl font-bold text-neutral-brown-900 font-heading mb-4">Core Values</h2>
                        <p className="text-lg text-neutral-brown-600">The principles that guide everything we do.</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        {[
                            {
                                icon: <Heart className="w-8 h-8 text-primary" />,
                                title: "Cultural Pride",
                                description: "We celebrate and honor the depth, beauty, and wisdom of Kalenjin traditions and language."
                            },
                            {
                                icon: <Users className="w-8 h-8 text-accent-green" />,
                                title: "Community First",
                                description: "We exist to serve our community, supporting authors and readers alike in a shared journey of discovery."
                            },
                            {
                                icon: <Sparkles className="w-8 h-8 text-accent-gold" />,
                                title: "Excellence",
                                description: "We are committed to high-quality publishing standards, ensuring our stories are presented beautifully."
                            }
                        ].map((value, index) => (
                            <div key={index} className="bg-neutral-cream p-8 rounded-2xl hover:-translate-y-2 transition-transform duration-300 border border-neutral-brown-500/5">
                                <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-sm mb-6">
                                    {value.icon}
                                </div>
                                <h3 className="text-xl font-bold text-neutral-brown-900 font-heading mb-3">{value.title}</h3>
                                <p className="text-neutral-brown-700 leading-relaxed">
                                    {value.description}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            {/* Stats */}
            <div className="py-20 px-6 bg-neutral-brown-900 text-white relative overflow-hidden">
                <div className="max-w-7xl mx-auto relative z-10">
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                        {[
                            { number: "500+", label: "Books Published" },
                            { number: "10k+", label: "Happy Readers" },
                            { number: "150+", label: "Local Authors" },
                            { number: "50+", label: "Schools Partnered" }
                        ].map((stat, index) => (
                            <div key={index}>
                                <div className="text-4xl md:text-5xl font-bold text-primary mb-2 font-heading">{stat.number}</div>
                                <div className="text-neutral-brown-300 font-medium">{stat.label}</div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/app/globals.css
##################################################################

@import "tailwindcss";

/* AfriReads - African Modern Minimal Design System */
:root {
  /* Background Colors */
  --bg-primary: #F7F5F0;
  --bg-secondary: #FFFFFF;
  
  /* Text Colors */
  --text-primary: #2D241E;
  --text-secondary: #4A4A4A;
  --text-inverse: #FFFFFF;
  
  /* Brand Colors */
  --brand-primary: #C66B4C;
  --brand-primary-hover: #A8563B;
  --brand-accent-green: #4E6E50;
  
  /* UI Elements */
  --card-overlay: rgba(45, 36, 30, 0.75);
  --icon-color: #2D241E;
  --button-nav: #8EA392;
  
  /* Legacy support (keeping for compatibility) */
  --primary: #C66B4C;
  --primary-dark: #A8563B;
  --primary-light: #D88A6F;
  --neutral-cream: #F7F5F0;
  --neutral-white: #FFFFFF;
  --neutral-brown-900: #2D241E;
  --neutral-brown-700: #4A4A4A;
  --neutral-brown-500: #9B8D82;
  --accent-green: #4E6E50;
  --accent-gold: #D4AF37;
  --error: #D64545;
  --success: #4CAF50;
  --border: #E0D5C7;
  --shadow: rgba(45, 36, 30, 0.1);
}

/* Base Styles */
* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  width: 100%;
  min-height: 100vh;
  font-family: 'Roboto', 'Helvetica Neue', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

/* Center all content */
body {
  display: flex;
  flex-direction: column;
  align-items: center;
}

body > * {
  width: 100%;
  max-width: 1920px;
  padding-left: 15rem;
  padding-right: 15rem;

}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: 'Merriweather', 'Playfair Display', Georgia, serif;
}

a {
  color: inherit;
  text-decoration: none;
}

/* Smooth Scrolling */
html {
  scroll-behavior: smooth;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-primary);
}

::-webkit-scrollbar-thumb {
  background: var(--brand-accent-green);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--brand-primary);
}

##################################################################
# File: src/components/home/CategoriesSection.tsx
##################################################################

import Link from 'next/link';
import { BookOpen, History, Feather, GraduationCap, Baby, Heart } from 'lucide-react';

const categories = [
    {
        id: 'folklore',
        name: 'Folklore',
        icon: BookOpen,
        description: 'Traditional stories and legends',
        count: 24,
        gradient: 'from-emerald-500 to-teal-600',
    },
    {
        id: 'history',
        name: 'History',
        icon: History,
        description: 'Historical narratives',
        count: 18,
        gradient: 'from-amber-500 to-orange-600',
    },
    {
        id: 'poetry',
        name: 'Poetry',
        icon: Feather,
        description: 'Verses and poems',
        count: 15,
        gradient: 'from-violet-500 to-purple-600',
    },
    {
        id: 'education',
        name: 'Education',
        icon: GraduationCap,
        description: 'Learning materials',
        count: 21,
        gradient: 'from-blue-500 to-indigo-600',
    },
    {
        id: 'children',
        name: 'Children',
        icon: Baby,
        description: 'Stories for young readers',
        count: 32,
        gradient: 'from-pink-500 to-rose-600',
    },
    {
        id: 'fiction',
        name: 'Fiction',
        icon: Heart,
        description: 'Creative narratives',
        count: 27,
        gradient: 'from-red-500 to-rose-600',
    },
];

export function CategoriesSection() {
    return (
        <div className="py-20 bg-gradient-to-b from-neutral-cream to-white">
            <div className="max-w-7xl mx-auto px-12">
                <div className="text-center mb-16">
                    <h2 className="text-4xl font-bold text-neutral-brown-900 mb-4 font-heading">
                        Browse by Category
                    </h2>
                    <p className="text-xl text-neutral-brown-700 font-body">
                        Explore books across different genres
                    </p>
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    {categories.map((category) => {
                        const Icon = category.icon;
                        return (
                            <Link key={category.id} href={`/books?category=${category.id}`}>
                                <div className="group bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 cursor-pointer border border-neutral-brown-500/10">
                                    <div className={`w-16 h-16 bg-gradient-to-br ${category.gradient} rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-md`}>
                                        <Icon className="text-white" size={32} />
                                    </div>
                                    <h3 className="text-2xl font-bold text-neutral-brown-900 mb-3 font-heading">
                                        {category.name}
                                    </h3>
                                    <p className="text-neutral-brown-700 mb-4 font-body">
                                        {category.description}
                                    </p>
                                    <div className="flex items-center justify-between">
                                        <span className="text-sm font-semibold text-neutral-brown-700 bg-neutral-cream px-4 py-2 rounded-full">
                                            {category.count} books
                                        </span>
                                        <span className="text-primary font-bold text-xl group-hover:translate-x-2 transition-transform">
                                            
                                        </span>
                                    </div>
                                </div>
                            </Link>
                        );
                    })}
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/components/home/FeaturedAuthors.tsx
##################################################################

import Link from 'next/link';
import { User, BookOpen } from 'lucide-react';

const featuredAuthors = [
    {
        id: '1',
        name: 'John Kamau',
        booksCount: 8,
        bio: 'Passionate storyteller preserving Kalenjin culture',
    },
    {
        id: '2',
        name: 'Jane Kiplagat',
        booksCount: 12,
        bio: 'Award-winning author of historical narratives',
    },
    {
        id: '3',
        name: 'Mike Korir',
        booksCount: 6,
        bio: 'Specialist in traditional folklore',
    },
    {
        id: '4',
        name: 'Sarah Chebet',
        booksCount: 15,
        bio: 'Children\'s book author and educator',
    },
];

export function FeaturedAuthors() {
    return (
        <div className="py-16 bg-white">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="text-center mb-12">
                    <h2 className="text-3xl font-bold text-neutral-brown-900 mb-3">
                        Featured Authors
                    </h2>
                    <p className="text-lg text-neutral-brown-700">
                        Meet the talented writers behind our books
                    </p>
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    {featuredAuthors.map((author) => (
                        <Link key={author.id} href={`/authors/${author.id}`}>
                            <div className="bg-neutral-cream rounded-xl p-6 text-center hover:shadow-xl transition-all duration-200 hover:-translate-y-1 group cursor-pointer">
                                {/* Author Avatar */}
                                <div className="w-24 h-24 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform">
                                    <User className="text-primary" size={40} />
                                </div>

                                {/* Author Info */}
                                <h3 className="text-lg font-bold text-neutral-brown-900 mb-2">
                                    {author.name}
                                </h3>
                                <p className="text-sm text-neutral-brown-700 mb-3 line-clamp-2">
                                    {author.bio}
                                </p>

                                {/* Books Count */}
                                <div className="flex items-center justify-center gap-2 text-primary">
                                    <BookOpen size={16} />
                                    <span className="text-sm font-semibold">
                                        {author.booksCount} books
                                    </span>
                                </div>
                            </div>
                        </Link>
                    ))}
                </div>

                <div className="text-center mt-8">
                    <Link
                        href="/authors"
                        className="inline-block text-primary hover:text-primary-dark font-semibold"
                    >
                        View All Authors 
                    </Link>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/components/home/FeaturedBooks.tsx
##################################################################

'use client';

import { ChevronLeft, ChevronRight, Star } from 'lucide-react';
import Link from 'next/link';
import { useState } from 'react';

interface Book {
    id: string;
    title: string;
    author: string;
    price: number;
    rating: number;
    category: string;
    image?: string;
}

interface FeaturedBooksProps {
    books: Book[];
}

// Vibrant color schemes for book cards (fallback if no image)
const colorSchemes = [
    'from-emerald-500 to-teal-600',
    'from-rose-500 to-pink-600',
    'from-amber-500 to-orange-600',
    'from-violet-500 to-purple-600',
    'from-blue-500 to-indigo-600',
    'from-red-500 to-rose-600',
    'from-cyan-500 to-blue-600',
    'from-fuchsia-500 to-purple-600',
];

export function FeaturedBooks({ books }: FeaturedBooksProps) {
    const [currentIndex, setCurrentIndex] = useState(0);
    const booksPerPage = 4;

    const nextSlide = () => {
        setCurrentIndex((prev) =>
            prev + booksPerPage >= books.length ? 0 : prev + booksPerPage
        );
    };

    const prevSlide = () => {
        setCurrentIndex((prev) =>
            prev === 0 ? Math.max(0, books.length - booksPerPage) : prev - booksPerPage
        );
    };

    const visibleBooks = books.slice(currentIndex, currentIndex + booksPerPage);

    return (
        <div className="bg-white py-16">
            <div className="max-w-7xl mx-auto px-12">
                {/* Centered Header */}
                <div className="text-center mb-12">
                    <h2 className="text-4xl font-bold text-neutral-brown-900 font-heading mb-2">Featured Books</h2>
                    <p className="text-neutral-brown-700 font-body">Discover our curated collection of Kalenjin literature</p>
                </div>

                {/* Centered Navigation buttons */}
                <div className="flex items-center justify-center gap-3 mb-8">
                    <button
                        onClick={prevSlide}
                        className="bg-accent-green hover:bg-accent-green/90 text-white rounded-lg p-3 transition-all shadow-md hover:shadow-lg"
                        aria-label="Previous books"
                    >
                        <ChevronLeft size={24} />
                    </button>
                    <button
                        onClick={nextSlide}
                        className="bg-accent-green hover:bg-accent-green/90 text-white rounded-lg p-3 transition-all shadow-md hover:shadow-lg"
                        aria-label="Next books"
                    >
                        <ChevronRight size={24} />
                    </button>
                </div>

                {/* Book Grid */}
                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    {visibleBooks.map((book, index) => {
                        const colorScheme = colorSchemes[index % colorSchemes.length];
                        return (
                            <Link key={book.id} href={`/books/${book.id}`}>
                                <div className="group cursor-pointer">
                                    {/* Book Cover */}
                                    <div className={`aspect-[2/3] rounded-2xl mb-4 overflow-hidden relative shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 ${!book.image ? `bg-gradient-to-br ${colorScheme}` : ''}`}>
                                        {book.image ? (
                                            <img
                                                src={book.image}
                                                alt={book.title}
                                                className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                            />
                                        ) : (
                                            /* Decorative pattern overlay for gradient fallback */
                                            <div className="absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_50%_120%,rgba(255,255,255,0.8),transparent)]"></div>
                                        )}

                                        {/* Content overlay */}
                                        <div className="absolute inset-0 flex flex-col justify-end p-6 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                            <div className="bg-white/95 backdrop-blur-sm p-4 rounded-xl shadow-xl transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                                                <h3 className="font-heading font-bold text-lg text-neutral-brown-900 mb-1 line-clamp-2">
                                                    {book.title}
                                                </h3>
                                                <p className="text-sm text-neutral-brown-700 font-body mb-2">{book.author}</p>
                                                <div className="flex items-center justify-between">
                                                    <span className="text-xl font-bold text-primary">KES {book.price}</span>
                                                    <div className="flex items-center gap-1">
                                                        <Star size={16} className="fill-accent-gold text-accent-gold" />
                                                        <span className="text-sm font-medium text-neutral-brown-700">{book.rating}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Category badge */}
                                    <div className="flex items-center justify-between">
                                        <span className="inline-block px-3 py-1 bg-neutral-cream text-neutral-brown-700 text-xs font-medium rounded-full">
                                            {book.category}
                                        </span>
                                    </div>
                                </div>
                            </Link>
                        );
                    })}
                </div>

                {/* View All Button */}
                <div className="text-center mt-12">
                    <Link
                        href="/books"
                        className="inline-block bg-primary hover:bg-primary-dark text-white font-semibold px-10 py-4 rounded-full transition-all hover:-translate-y-1 shadow-lg hover:shadow-xl"
                    >
                        View All Books 
                    </Link>
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/components/home/PlatformStats.tsx
##################################################################

import { Book, Users, ShoppingCart, TrendingUp } from 'lucide-react';

const stats = [
    {
        icon: Book,
        value: '150+',
        label: 'Books Available',
        color: 'primary',
    },
    {
        icon: Users,
        value: '45+',
        label: 'Active Authors',
        color: 'accent-green',
    },
    {
        icon: ShoppingCart,
        value: '2,500+',
        label: 'Books Sold',
        color: 'accent-gold',
    },
    {
        icon: TrendingUp,
        value: '98%',
        label: 'Satisfaction Rate',
        color: 'primary',
    },
];

export function PlatformStats() {
    return (
        <div className="py-16 bg-gradient-to-r from-primary/10 to-primary/5">
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="text-center mb-12">
                    <h2 className="text-3xl font-bold text-neutral-brown-900 mb-3">
                        Growing Community
                    </h2>
                    <p className="text-lg text-neutral-brown-700">
                        Join thousands preserving Kalenjin culture
                    </p>
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    {stats.map((stat, index) => {
                        const Icon = stat.icon;
                        return (
                            <div key={index} className="text-center">
                                <div className={`w-16 h-16 bg-${stat.color}/20 rounded-full flex items-center justify-center mx-auto mb-4`}>
                                    <Icon className={`text-${stat.color}`} size={32} />
                                </div>
                                <p className="text-4xl font-bold text-neutral-brown-900 mb-2">
                                    {stat.value}
                                </p>
                                <p className="text-neutral-brown-700 font-medium">
                                    {stat.label}
                                </p>
                            </div>
                        );
                    })}
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/components/dashboard/DashboardSidebar.tsx
##################################################################

'use client';

import { Book, DollarSign, TrendingUp, Users, BarChart3, Settings, LogOut } from 'lucide-react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';

const navigation = [
    { name: 'Dashboard', href: '/dashboard/author', icon: BarChart3 },
    { name: 'My Books', href: '/dashboard/author/books', icon: Book },
    { name: 'Earnings', href: '/dashboard/author/earnings', icon: DollarSign },
    { name: 'Analytics', href: '/dashboard/author/analytics', icon: TrendingUp },
    { name: 'Profile', href: '/dashboard/author/profile', icon: Users },
    { name: 'Settings', href: '/dashboard/author/settings', icon: Settings },
];

export function DashboardSidebar() {
    const pathname = usePathname();

    return (
        <div className="w-64 bg-white border-r border-neutral-brown-500/10 min-h-screen flex flex-col">
            {/* Logo */}
            <div className="p-6 border-b border-neutral-brown-500/10">
                <Link href="/" className="flex items-center gap-2">
                    <div className="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                        <Book className="text-white" size={24} />
                    </div>
                    <div>
                        <h1 className="font-bold text-lg text-neutral-brown-900">AfriReads</h1>
                        <p className="text-xs text-neutral-brown-700">Author Portal</p>
                    </div>
                </Link>
            </div>

            {/* Navigation */}
            <nav className="flex-1 p-4 space-y-1">
                {navigation.map((item) => {
                    const isActive = pathname === item.href;
                    const Icon = item.icon;

                    return (
                        <Link
                            key={item.name}
                            href={item.href}
                            className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${isActive
                                ? 'bg-primary text-white'
                                : 'text-neutral-brown-700 hover:bg-neutral-cream'
                                }`}
                        >
                            <Icon size={20} />
                            <span className="font-medium">{item.name}</span>
                        </Link>
                    );
                })}
            </nav>

            {/* Logout */}
            <div className="p-4 border-t border-neutral-brown-500/10">
                <button className="flex items-center gap-3 px-4 py-3 rounded-lg text-neutral-brown-700 hover:bg-neutral-cream w-full transition-all">
                    <LogOut size={20} />
                    <span className="font-medium">Logout</span>
                </button>
            </div>
        </div>
    );
}


##################################################################
# File: src/components/books/BookFilters.tsx
##################################################################

'use client';

import { Search, SlidersHorizontal, X } from 'lucide-react';
import { useState } from 'react';

interface FiltersProps {
    onFilterChange: (filters: any) => void;
}

export function BookFilters({ onFilterChange }: FiltersProps) {
    const [selectedCategories, setSelectedCategories] = useState<string[]>([]);
    const [priceRange, setPriceRange] = useState([0, 2000]);
    const [selectedLanguage, setSelectedLanguage] = useState('all');

    const categories = [
        'Fiction',
        'Non-Fiction',
        'Folklore',
        'History',
        'Poetry',
        'Children',
        'Education',
    ];

    const languages = [
        { value: 'all', label: 'All Languages' },
        { value: 'kalenjin', label: 'Kalenjin' },
        { value: 'english', label: 'English' },
        { value: 'bilingual', label: 'Bilingual' },
    ];

    const handleCategoryToggle = (category: string) => {
        const updated = selectedCategories.includes(category)
            ? selectedCategories.filter((c) => c !== category)
            : [...selectedCategories, category];
        setSelectedCategories(updated);
        onFilterChange({ categories: updated, priceRange, language: selectedLanguage });
    };

    const handleClearFilters = () => {
        setSelectedCategories([]);
        setPriceRange([0, 2000]);
        setSelectedLanguage('all');
        onFilterChange({ categories: [], priceRange: [0, 2000], language: 'all' });
    };

    return (
        <div className="bg-white rounded-xl p-6 shadow-sm">
            <div className="flex items-center justify-between mb-6">
                <h3 className="font-bold text-lg text-neutral-brown-900 flex items-center gap-2">
                    <SlidersHorizontal size={20} />
                    Filters
                </h3>
                <button
                    onClick={handleClearFilters}
                    className="text-sm text-primary hover:text-primary-dark font-medium"
                >
                    Clear All
                </button>
            </div>

            {/* Categories */}
            <div className="mb-6">
                <h4 className="font-semibold text-neutral-brown-900 mb-3">Categories</h4>
                <div className="space-y-2">
                    {categories.map((category) => (
                        <label key={category} className="flex items-center gap-2 cursor-pointer">
                            <input
                                type="checkbox"
                                checked={selectedCategories.includes(category)}
                                onChange={() => handleCategoryToggle(category)}
                                className="w-4 h-4 text-primary border-neutral-brown-500/20 rounded focus:ring-primary"
                            />
                            <span className="text-sm text-neutral-brown-700">{category}</span>
                        </label>
                    ))}
                </div>
            </div>

            {/* Price Range */}
            <div className="mb-6">
                <h4 className="font-semibold text-neutral-brown-900 mb-3">Price Range</h4>
                <div className="space-y-3">
                    <input
                        type="range"
                        min="0"
                        max="2000"
                        value={priceRange[1]}
                        onChange={(e) => {
                            const newRange = [0, parseInt(e.target.value)];
                            setPriceRange(newRange);
                            onFilterChange({ categories: selectedCategories, priceRange: newRange, language: selectedLanguage });
                        }}
                        className="w-full"
                    />
                    <div className="flex items-center justify-between text-sm text-neutral-brown-700">
                        <span>KES 0</span>
                        <span className="font-semibold text-primary">KES {priceRange[1]}</span>
                    </div>
                </div>
            </div>

            {/* Language */}
            <div>
                <h4 className="font-semibold text-neutral-brown-900 mb-3">Language</h4>
                <div className="space-y-2">
                    {languages.map((lang) => (
                        <label key={lang.value} className="flex items-center gap-2 cursor-pointer">
                            <input
                                type="radio"
                                name="language"
                                value={lang.value}
                                checked={selectedLanguage === lang.value}
                                onChange={(e) => {
                                    setSelectedLanguage(e.target.value);
                                    onFilterChange({ categories: selectedCategories, priceRange, language: e.target.value });
                                }}
                                className="w-4 h-4 text-primary border-neutral-brown-500/20 focus:ring-primary"
                            />
                            <span className="text-sm text-neutral-brown-700">{lang.label}</span>
                        </label>
                    ))}
                </div>
            </div>
        </div>
    );
}


##################################################################
# File: src/components/books/BookCard.tsx
##################################################################

import Link from 'next/link';
import { Star, ShoppingCart } from 'lucide-react';

interface BookCardProps {
    book: {
        id: string;
        title: string;
        author: string;
        price: number;
        rating: number;
        reviewCount: number;
        category: string;
        language: string;
    };
}

export function BookCard({ book }: BookCardProps) {
    return (
        <Link href={`/books/${book.id}`}>
            <div className="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-200 hover:-translate-y-1 group">
                {/* Book Cover */}
                <div className="aspect-[2/3] bg-gradient-to-br from-primary/20 to-primary/5 relative overflow-hidden">
                    <div className="absolute inset-0 flex items-center justify-center">
                        <div className="text-center p-4">
                            <p className="text-sm font-semibold text-neutral-brown-900 line-clamp-3">
                                {book.title}
                            </p>
                        </div>
                    </div>
                    {/* Quick View Overlay */}
                    <div className="absolute inset-0 bg-neutral-brown-900/80 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                        <span className="text-white font-semibold">Quick View</span>
                    </div>
                </div>

                {/* Book Info */}
                <div className="p-4">
                    <h3 className="font-semibold text-neutral-brown-900 line-clamp-2 mb-1">
                        {book.title}
                    </h3>
                    <p className="text-sm text-neutral-brown-700 mb-2">{book.author}</p>

                    {/* Rating */}
                    <div className="flex items-center gap-1 mb-3">
                        <div className="flex items-center">
                            {[...Array(5)].map((_, i) => (
                                <Star
                                    key={i}
                                    size={14}
                                    className={i < Math.floor(book.rating) ? 'fill-accent-gold text-accent-gold' : 'text-neutral-brown-500/20'}
                                />
                            ))}
                        </div>
                        <span className="text-xs text-neutral-brown-700">({book.reviewCount})</span>
                    </div>

                    {/* Price and Action */}
                    <div className="flex items-center justify-between">
                        <span className="text-xl font-bold text-primary">
                            KES {book.price.toLocaleString()}
                        </span>
                        <button className="w-10 h-10 bg-primary/10 hover:bg-primary hover:text-white text-primary rounded-lg flex items-center justify-center transition-all">
                            <ShoppingCart size={18} />
                        </button>
                    </div>

                    {/* Badges */}
                    <div className="flex gap-2 mt-3">
                        <span className="text-xs px-2 py-1 bg-accent-green/20 text-accent-green rounded-full">
                            {book.category}
                        </span>
                        <span className="text-xs px-2 py-1 bg-primary/20 text-primary rounded-full">
                            {book.language}
                        </span>
                    </div>
                </div>
            </div>
        </Link>
    );
}


##################################################################
# File: src/lib/prisma.ts
##################################################################

import { PrismaClient } from '@prisma/client';
import { PrismaD1 } from '@prisma/adapter-d1';

// Singleton pattern for Prisma Client
const globalForPrisma = globalThis as unknown as {
    prisma: PrismaClient | undefined;
};

// For development with local SQLite
export const prisma =
    globalForPrisma.prisma ??
    new PrismaClient({
        log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
    });

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;

/**
 * Create Prisma client for Cloudflare D1 (use in Workers/Edge runtime)
 * @param d1Database - Cloudflare D1 database instance
 */
export function createPrismaClientForD1(d1Database: any) {
    const adapter = new PrismaD1(d1Database);
    return new PrismaClient({ adapter });
}

export default prisma;


##################################################################
# File: src/lib/access-links.ts
##################################################################

import { randomBytes } from 'crypto';
import prisma from './prisma';

const TIME_LIMITED_ACCESS_HOURS = parseInt(process.env.TIME_LIMITED_ACCESS_HOURS || '168'); // Default: 7 days

export interface CreateAccessLinkParams {
    userId: string;
    bookId: string;
    expiresInHours?: number;
}

/**
 * Generate a unique access token
 */
function generateToken(): string {
    return randomBytes(32).toString('hex');
}

/**
 * Create a time-limited access link for a book
 */
export async function createAccessLink({
    userId,
    bookId,
    expiresInHours = TIME_LIMITED_ACCESS_HOURS,
}: CreateAccessLinkParams) {
    const token = generateToken();
    const expiresAt = new Date();
    expiresAt.setHours(expiresAt.getHours() + expiresInHours);

    const accessLink = await prisma.timeAccessLink.create({
        data: {
            token,
            userId,
            bookId,
            expiresAt,
        },
        include: {
            book: true,
            user: true,
        },
    });

    return accessLink;
}

/**
 * Validate an access token
 */
export async function validateAccessToken(token: string) {
    const accessLink = await prisma.timeAccessLink.findUnique({
        where: { token },
        include: {
            book: true,
            user: true,
        },
    });

    if (!accessLink) {
        return { valid: false, reason: 'Token not found' };
    }

    if (accessLink.isRevoked) {
        return { valid: false, reason: 'Token has been revoked' };
    }

    if (new Date() > accessLink.expiresAt) {
        return { valid: false, reason: 'Token has expired' };
    }

    return { valid: true, accessLink };
}

/**
 * Revoke an access token
 */
export async function revokeAccessToken(token: string) {
    await prisma.timeAccessLink.update({
        where: { token },
        data: { isRevoked: true },
    });
}

/**
 * Get remaining time for an access link
 */
export function getRemainingTime(expiresAt: Date): {
    expired: boolean;
    hours: number;
    minutes: number;
    seconds: number;
} {
    const now = new Date();
    const diff = expiresAt.getTime() - now.getTime();

    if (diff <= 0) {
        return { expired: true, hours: 0, minutes: 0, seconds: 0 };
    }

    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    return { expired: false, hours, minutes, seconds };
}

/**
 * Clean up expired access links (run periodically)
 */
export async function cleanupExpiredLinks() {
    const result = await prisma.timeAccessLink.deleteMany({
        where: {
            expiresAt: {
                lt: new Date(),
            },
        },
    });

    return result.count;
}


##################################################################
# File: src/lib/cloudflare-r2.ts
##################################################################

import { S3Client, PutObjectCommand, GetObjectCommand, DeleteObjectCommand, HeadObjectCommand } from '@aws-sdk/client-s3';
import { getSignedUrl } from '@aws-sdk/s3-request-presigner';

// Cloudflare R2 configuration
const R2_ENDPOINT = `https://${process.env.CLOUDFLARE_ACCOUNT_ID}.r2.cloudflarestorage.com`;
const R2_BUCKET_NAME = process.env.R2_BUCKET_NAME || 'kalenjin-books';

// Initialize S3 client for R2 (R2 is S3-compatible)
const r2Client = new S3Client({
    region: 'auto',
    endpoint: R2_ENDPOINT,
    credentials: {
        accessKeyId: process.env.R2_ACCESS_KEY_ID || '',
        secretAccessKey: process.env.R2_SECRET_ACCESS_KEY || '',
    },
});

export interface UploadBookParams {
    file: Buffer;
    fileName: string;
    contentType: string;
    bookId: string;
}

export interface UploadImageParams {
    file: Buffer;
    fileName: string;
    contentType: string;
}

/**
 * Upload a book file to Cloudflare R2
 */
export async function uploadBook({ file, fileName, contentType, bookId }: UploadBookParams): Promise<string> {
    const fileKey = `books/${bookId}/${fileName}`;

    const command = new PutObjectCommand({
        Bucket: R2_BUCKET_NAME,
        Key: fileKey,
        Body: file,
        ContentType: contentType,
        Metadata: {
            bookId,
            uploadedAt: new Date().toISOString(),
        },
    });

    await r2Client.send(command);
    return fileKey;
}

/**
 * Upload an image (cover, profile) to Cloudflare R2
 */
export async function uploadImage({ file, fileName, contentType }: UploadImageParams): Promise<string> {
    const fileKey = `images/${Date.now()}-${fileName}`;

    const command = new PutObjectCommand({
        Bucket: R2_BUCKET_NAME,
        Key: fileKey,
        Body: file,
        ContentType: contentType,
    });

    await r2Client.send(command);
    return fileKey;
}

/**
 * Generate a signed URL for secure book access
 * @param fileKey - The R2 object key
 * @param expiresIn - URL expiration time in seconds (default: 1 hour)
 */
export async function getSignedBookUrl(fileKey: string, expiresIn: number = 3600): Promise<string> {
    const command = new GetObjectCommand({
        Bucket: R2_BUCKET_NAME,
        Key: fileKey,
    });

    const signedUrl = await getSignedUrl(r2Client, command, { expiresIn });
    return signedUrl;
}

/**
 * Delete a book file from R2
 */
export async function deleteBook(fileKey: string): Promise<void> {
    const command = new DeleteObjectCommand({
        Bucket: R2_BUCKET_NAME,
        Key: fileKey,
    });

    await r2Client.send(command);
}

/**
 * Check if a file exists in R2
 */
export async function fileExists(fileKey: string): Promise<boolean> {
    try {
        const command = new HeadObjectCommand({
            Bucket: R2_BUCKET_NAME,
            Key: fileKey,
        });

        await r2Client.send(command);
        return true;
    } catch (error) {
        return false;
    }
}

/**
 * Get file metadata from R2
 */
export async function getFileMetadata(fileKey: string) {
    const command = new HeadObjectCommand({
        Bucket: R2_BUCKET_NAME,
        Key: fileKey,
    });

    const response = await r2Client.send(command);
    return {
        contentType: response.ContentType,
        contentLength: response.ContentLength,
        lastModified: response.LastModified,
        metadata: response.Metadata,
    };
}


##################################################################
# File: docs/EVENING_PLAN.md
##################################################################

# Evening Development Plan: AfriReads Platform

This plan outlines the key objectives for this evening's development session, focusing on moving from UI mockups to a functional, data-driven application.

##  Primary Goal
**Connect the frontend to a real backend (Cloudflare D1 & R2) and implement user authentication.**

---

##  Detailed Schedule

### Phase 1: Infrastructure & Database (The Foundation)
**Objective:** Ensure the database and storage are ready for data.
- [ ] **Cloudflare Setup**: Verify `wrangler.toml` configuration for D1 and R2.
- [ ] **Database Migration**: Run Prisma migrations to create tables in the local D1 database.
- [ ] **Seed Data**: Create a seed script to populate the database with initial categories, authors, and sample books.
- [ ] **Verify Connection**: Ensure the Next.js app can query the D1 database.

### Phase 2: Authentication (The Gatekeeper)
**Objective:** Allow users and authors to sign up and log in.
- [ ] **NextAuth Setup**: Configure `src/lib/auth.ts` with Credentials provider.
- [ ] **Registration API**: Implement `POST /api/register` to create new users.
- [ ] **Login Page**: Create a custom login/register page matching the AfriReads design.
- [ ] **Protected Routes**: Secure the Author Dashboard so only logged-in authors can access it.

### Phase 3: Book Management (The Core Content)
**Objective:** Enable real book uploads and listing.
- [ ] **Upload API**: Implement `POST /api/books/upload` to handle file uploads to Cloudflare R2.
- [ ] **Book Creation**: Connect the "Upload New Book" form to the backend.
- [ ] **Real Data Fetching**: Update the Books Catalog (`/books`) to fetch real data from the database instead of mock arrays.

### Phase 4: Book Detail & Reading (The Experience)
**Objective:** Allow users to view and "read" a book.
- [ ] **Book Detail Page**: Build `src/app/books/[id]/page.tsx` to show real book details.
- [ ] **PDF Viewer**: Implement the secure PDF viewer using `react-pdf` or PDF.js.
- [ ] **Access Control**: Ensure only purchased books (or free previews) can be opened.

---

##  Technical Tasks Breakdown

### 1. Database Setup
```bash
# Generate Prisma Client
npx prisma generate

# Create D1 Database (if not exists)
npx wrangler d1 create afrireads-db

# Apply Migrations
npx wrangler d1 execute afrireads-db --local --file=./prisma/migrations/init/migration.sql
```

### 2. Authentication
- Install `bcryptjs` for password hashing.
- Create `src/app/login/page.tsx` and `src/app/register/page.tsx`.
- Configure NextAuth session strategy (JWT).

### 3. API Development
- Create `src/app/api/books/route.ts` (GET, POST).
- Create `src/lib/r2.ts` helper for R2 interactions.

---

##  Expected Outcome by End of Session
1.  A functional **Login/Register** flow.
2.  A working **Database** storing users and books.
3.  The **Books Catalog** displaying real data from the database.
4.  Ability to **Upload a Book** (file to R2, metadata to D1).


##################################################################
# File: docs/UI.md
##################################################################

# UI/UX Documentation

## Overview

AfriReads features a warm, culturally-inspired design system that celebrates Kalenjin literature while maintaining modern web standards. This document outlines the complete UI implementation guide.

## Design Philosophy

- **Cultural Connection**: African-inspired colors and geometric patterns
- **Readability**: Clear typography with generous spacing
- **Trust**: Professional, premium aesthetic
- **Accessibility**: WCAG 2.1 AA compliant

---

## Color System

### Primary Palette

| Color | Hex | Usage |
|-------|-----|-------|
| Terracotta Orange | `#E07856` | Primary buttons, CTAs, accents |
| Terracotta Dark | `#C85D3A` | Hover states |
| Terracotta Light | `#F09B7D` | Backgrounds, highlights |

### Neutral Palette

| Color | Hex | Usage |
|-------|-----|-------|
| Cream | `#F5F1E8` | Main background |
| White | `#FFFFFF` | Cards, modals, surfaces |
| Deep Brown | `#4A3728` | Headings, primary text |
| Medium Brown | `#6B5D52` | Secondary text |
| Light Brown | `#9B8D82` | Muted text, placeholders |

### Accent Colors

| Color | Hex | Usage |
|-------|-----|-------|
| Sage Green | `#8B9D83` | Success states, badges |
| Gold | `#D4AF37` | Ratings, premium features |
| Error Red | `#D64545` | Errors, warnings |
| Success Green | `#4CAF50` | Success messages |

### Tailwind Configuration

```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: {
          DEFAULT: '#E07856',
          dark: '#C85D3A',
          light: '#F09B7D',
        },
        neutral: {
          cream: '#F5F1E8',
          brown: {
            900: '#4A3728',
            700: '#6B5D52',
            500: '#9B8D82',
          }
        },
        accent: {
          green: '#8B9D83',
          gold: '#D4AF37',
        }
      }
    }
  }
}
```

---

## Typography

### Font Stack

```css
/* Headings */
font-family: 'Playfair Display', Georgia, serif;

/* Body Text */
font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;

/* Code/Monospace */
font-family: 'JetBrains Mono', monospace;
```

### Type Scale

| Size | Rem | Pixels | Usage |
|------|-----|--------|-------|
| 5xl | 3.5rem | 56px | Hero headings |
| 4xl | 3rem | 48px | Page titles |
| 3xl | 2.25rem | 36px | Section headings |
| 2xl | 1.875rem | 30px | Card titles |
| xl | 1.5rem | 24px | Subheadings |
| lg | 1.25rem | 20px | Large body |
| base | 1rem | 16px | Body text |
| sm | 0.875rem | 14px | Small text |
| xs | 0.75rem | 12px | Captions |

### Font Weights

- Light: 300
- Regular: 400
- Medium: 500
- Semibold: 600
- Bold: 700

---

## Spacing System

Based on 4px base unit:

| Token | Value | Pixels |
|-------|-------|--------|
| space-1 | 0.25rem | 4px |
| space-2 | 0.5rem | 8px |
| space-3 | 0.75rem | 12px |
| space-4 | 1rem | 16px |
| space-6 | 1.5rem | 24px |
| space-8 | 2rem | 32px |
| space-12 | 3rem | 48px |
| space-16 | 4rem | 64px |

---

## Components

### Buttons

#### Primary Button

```tsx
<button className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg">
  Purchase Book
</button>
```

**Specs:**
- Background: Terracotta orange
- Padding: 12px 24px
- Border radius: 8px
- Font weight: 600
- Hover: Lift effect + darker shade

#### Secondary Button

```tsx
<button className="bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-white font-semibold px-6 py-3 rounded-lg transition-all duration-200">
  Preview
</button>
```

#### Ghost Button

```tsx
<button className="bg-transparent text-neutral-brown-900 hover:bg-primary/10 px-6 py-3 rounded-lg transition-all duration-200">
  Learn More
</button>
```

### Cards

#### Book Card

```tsx
<div className="bg-white rounded-xl p-4 shadow-md hover:shadow-xl hover:-translate-y-1 transition-all duration-200">
  <img src={coverUrl} alt={title} className="w-full aspect-[2/3] object-cover rounded-lg mb-3" />
  <h3 className="font-semibold text-lg text-neutral-brown-900 line-clamp-2">{title}</h3>
  <p className="text-sm text-neutral-brown-700 mt-1">{author}</p>
  <div className="flex items-center justify-between mt-3">
    <span className="text-xl font-bold text-primary">KES {price}</span>
    <button className="text-primary hover:text-primary-dark">
      <ShoppingCart size={20} />
    </button>
  </div>
</div>
```

**Specs:**
- Background: White
- Border radius: 12px
- Padding: 16px
- Shadow: Subtle, increases on hover
- Hover: Lift effect (-4px translate)

#### Stat Card (Dashboard)

```tsx
<div className="bg-white rounded-2xl p-6 border-l-4 border-primary shadow-sm">
  <div className="flex items-center justify-between">
    <div>
      <p className="text-sm text-neutral-brown-700">Total Earnings</p>
      <p className="text-3xl font-bold text-neutral-brown-900 mt-1">KES 45,000</p>
    </div>
    <div className="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center">
      <DollarSign className="text-primary" size={24} />
    </div>
  </div>
  <p className="text-sm text-accent-green mt-3"> 12% from last month</p>
</div>
```

### Form Elements

#### Input Field

```tsx
<input 
  type="text"
  className="w-full px-4 py-3 border-2 border-neutral-brown-500/20 rounded-lg focus:border-primary focus:outline-none focus:ring-4 focus:ring-primary/10 transition-all"
  placeholder="Enter book title"
/>
```

**Specs:**
- Border: 2px solid, light brown
- Padding: 12px 16px
- Border radius: 8px
- Focus: Primary color border + subtle ring

#### Search Bar

```tsx
<div className="relative">
  <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-neutral-brown-700" size={20} />
  <input 
    type="search"
    className="w-full pl-12 pr-4 py-3 bg-white rounded-full shadow-md focus:shadow-lg focus:outline-none transition-all"
    placeholder="Search books..."
  />
</div>
```

### Badges

```tsx
{/* Category Badge */}
<span className="inline-block px-3 py-1 bg-accent-green/20 text-accent-green text-sm font-medium rounded-full">
  Fiction
</span>

{/* Language Badge */}
<span className="inline-block px-3 py-1 bg-primary/20 text-primary text-sm font-medium rounded-full">
  Kalenjin
</span>
```

---

## Page Layouts

### Landing Page

**Structure:**
```

         Navigation Bar              

                                     
         Hero Section                
   "Discover Kalenjin Literature"   
                                     

      Featured Books Carousel        

       Categories Grid (3x2)         

     Featured Authors (3 cols)       

      Statistics Counters            

          CTA Section                

            Footer                   

```

**Key Elements:**
- Hero: Full-width with gradient background
- Books carousel: Auto-scroll, 5 visible on desktop
- Categories: Icon + title + book count
- Stats: Animated counters on scroll

### Books Catalog

**Layout:**
```

             Search Bar + Filters   
          
                 
 Sidebar    Book Book Book   
 Filters         
                 
            Book Book Book   
                 
          
                Pagination          

```

**Responsive:**
- Desktop: 4-column grid
- Tablet: 2-column grid, collapsible sidebar
- Mobile: 1-column, filters in modal

### Book Detail Page

**Layout:**
```

               Title               
   Book        Author + Avatar     
   Cover       Rating         
   Image       Price: KES 500      
               [Purchase] [Preview]
                                   
               Description...      


        Author Bio Section            

        Reviews Section               

     Related Books Carousel           

```

### Author Dashboard

**Layout:**
```

            Welcome, [Author Name]    
          
             
 Sidebar   Earn.  Books  Sales 
 Nav         
          
              Earnings Chart          
          
              My Books Table          

```

---

## Patterns & Decorations

### African Geometric Patterns

Use as subtle background elements:

```css
.pattern-background {
  background-image: url('/patterns/triangles.svg');
  background-size: 200px;
  background-repeat: repeat;
  opacity: 0.05;
}
```

**Pattern Types:**
- Triangular tessellations
- Zigzag borders
- Diamond grids
- Circular motifs

**Usage:**
- Hero section backgrounds
- Section dividers
- Card decorations (subtle)

---

## Animations & Transitions

### Hover Effects

```css
/* Card Hover */
.card {
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(74, 55, 40, 0.15);
}

/* Button Hover */
.button {
  transition: all 0.2s;
}
.button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(224, 120, 86, 0.3);
}
```

### Loading States

```tsx
{/* Skeleton Loader for Book Card */}
<div className="bg-white rounded-xl p-4 animate-pulse">
  <div className="w-full aspect-[2/3] bg-neutral-brown-500/20 rounded-lg mb-3" />
  <div className="h-4 bg-neutral-brown-500/20 rounded w-3/4 mb-2" />
  <div className="h-3 bg-neutral-brown-500/20 rounded w-1/2" />
</div>
```

### Page Transitions

```css
/* Fade In */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.fade-in {
  animation: fadeIn 0.5s ease-out;
}
```

---

## Responsive Design

### Breakpoints

```css
/* Mobile First */
.container {
  padding: 1rem;
}

/* Tablet (641px+) */
@media (min-width: 641px) {
  .container {
    padding: 2rem;
  }
  .book-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Desktop (1025px+) */
@media (min-width: 1025px) {
  .container {
    padding: 3rem;
  }
  .book-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* Large Desktop (1440px+) */
@media (min-width: 1440px) {
  .container {
    max-width: 1280px;
    margin: 0 auto;
  }
}
```

### Mobile Considerations

- Minimum touch target: 44x44px
- Larger font sizes (16px minimum for inputs)
- Simplified navigation (hamburger menu)
- Stack layouts vertically
- Bottom navigation for key actions

---

## Accessibility

### Color Contrast

All combinations meet WCAG AA standards:

| Combination | Ratio | Pass |
|-------------|-------|------|
| Deep Brown on Cream | 8.1:1 |  AAA |
| White on Terracotta | 6.2:1 |  AA |
| Terracotta on Cream | 4.8:1 |  AA |

### Keyboard Navigation

```tsx
{/* Focus Visible */}
<button className="focus:outline-none focus:ring-4 focus:ring-primary/30">
  Click Me
</button>

{/* Skip to Content */}
<a href="#main-content" className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-white px-4 py-2 rounded">
  Skip to main content
</a>
```

### Screen Reader Support

```tsx
{/* Icon Button with Label */}
<button aria-label="Add to cart">
  <ShoppingCart size={20} />
</button>

{/* Image Alt Text */}
<img src={cover} alt={`Cover of ${bookTitle} by ${authorName}`} />

{/* Loading State */}
<div role="status" aria-live="polite">
  {loading ? 'Loading books...' : `${books.length} books found`}
</div>
```

### Reduced Motion

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

---

## Icons

### Icon Library

Use **Lucide React** for consistent, modern icons:

```bash
npm install lucide-react
```

**Common Icons:**
- `Book` - Books, library
- `User` - Authors, profiles
- `ShoppingCart` - Cart, purchases
- `Search` - Search functionality
- `Heart` - Wishlist, favorites
- `DollarSign` - Pricing, earnings
- `TrendingUp` - Analytics, growth
- `Upload` - File uploads
- `Eye` - Preview, view
- `Share2` - Social sharing

### Usage

```tsx
import { Book, ShoppingCart, Heart } from 'lucide-react';

<Book size={24} className="text-primary" />
<ShoppingCart size={20} strokeWidth={2} />
<Heart size={18} fill="currentColor" />
```

---

---

## Temporary Access Links UI

### Overview

The temporary access links feature allows users to share time-limited book access without requiring purchase. This includes link generation, countdown timers, and access management.

### Visual Mockups

#### 3. Book Detail Page

![Book Detail Mockup](/mockups/afrireads_book_detail_1764672314747.png)

**Components:**
- Modal overlay with centered dialog
- Book thumbnail preview
- Duration selector dropdown
- Optional recipient email field
- Generated link display with copy button
- Expiration countdown
- Revoke access button

#### 4. Author Dashboard

![Author Dashboard Mockup](/mockups/afrireads_author_dashboard_1764672335838.png)

**Components:**
#### 1. Link Generation Modal

![Temporary Link Modal](/mockups/temporary_link_modal_1764672996072.png)

**Components:**
- Modal overlay with centered dialog
- Book thumbnail preview
- Duration selector dropdown
- Optional recipient email field
- Generated link display with copy button
- Expiration countdown
- Revoke access button

#### 2. Book Reader with Temporary Access

![Book Reader Temporary Access](/mockups/book_reader_temporary_1764673011818.png)

**Components:**
- Prominent countdown banner at top
- PDF viewer in center
- Book info sidebar
- "Purchase Full Access" CTA
- Expiration warning message

#### 3. Access Links Management Dashboard

### 1. Landing Page

![Landing Page Mockup](/mockups/afrireads_landing_page_1764672267589.png)

**Components:**
- Stats cards (Total Links, Active, Views)
- Filter tabs (All, Active, Expired)
- Links table with actions
- Create new link button

---

### Components

#### Link Generation Modal

```tsx
import { useState } from 'react';
import { Clock, Copy, X, Link as LinkIcon } from 'lucide-react';

interface GenerateLinkModalProps {
  book: {
    id: string;
    title: string;
    coverImage: string;
  };
  onClose: () => void;
}

export function GenerateLinkModal({ book, onClose }: GenerateLinkModalProps) {
  const [duration, setDuration] = useState('168'); // 7 days in hours
  const [email, setEmail] = useState('');
  const [generatedLink, setGeneratedLink] = useState('');
  const [loading, setLoading] = useState(false);

  const handleGenerate = async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/access-links', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          bookId: book.id,
          expiresInHours: parseInt(duration),
          recipientEmail: email || undefined,
        }),
      });
      const data = await response.json();
      setGeneratedLink(`${window.location.origin}/read/${data.token}`);
    } catch (error) {
      console.error('Failed to generate link:', error);
    } finally {
      setLoading(false);
    }
  };

  const copyToClipboard = () => {
    navigator.clipboard.writeText(generatedLink);
    // Show toast notification
  };

  return (
    <div className="fixed inset-0 bg-neutral-brown-900/80 flex items-center justify-center z-50">
      <div className="bg-white rounded-2xl p-6 max-w-lg w-full mx-4 shadow-2xl">
        {/* Header */}
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-2xl font-bold text-neutral-brown-900">
            Share Temporary Access
          </h2>
          <button
            onClick={onClose}
            className="text-neutral-brown-700 hover:text-neutral-brown-900"
          >
            <X size={24} />
          </button>
        </div>

        {/* Book Preview */}
        <div className="flex items-center gap-4 mb-6 p-4 bg-neutral-cream rounded-lg">
          <img
            src={book.coverImage}
            alt={book.title}
            className="w-16 h-24 object-cover rounded"
          />
          <div>
            <h3 className="font-semibold text-neutral-brown-900">{book.title}</h3>
            <p className="text-sm text-neutral-brown-700">Temporary access link</p>
          </div>
        </div>

        {/* Form */}
        <div className="space-y-4 mb-6">
          {/* Duration Selector */}
          <div>
            <label className="block text-sm font-medium text-neutral-brown-900 mb-2">
              Access Duration
            </label>
            <select
              value={duration}
              onChange={(e) => setDuration(e.target.value)}
              className="w-full px-4 py-3 border-2 border-neutral-brown-500/20 rounded-lg focus:border-primary focus:outline-none"
            >
              <option value="24">24 Hours</option>
              <option value="72">3 Days</option>
              <option value="168">7 Days (Recommended)</option>
              <option value="720">30 Days</option>
            </select>
          </div>

          {/* Optional Email */}
          <div>
            <label className="block text-sm font-medium text-neutral-brown-900 mb-2">
              Recipient Email (Optional)
            </label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="recipient@example.com"
              className="w-full px-4 py-3 border-2 border-neutral-brown-500/20 rounded-lg focus:border-primary focus:outline-none"
            />
          </div>
        </div>

        {/* Generate Button */}
        {!generatedLink && (
          <button
            onClick={handleGenerate}
            disabled={loading}
            className="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 rounded-lg transition-all disabled:opacity-50"
          >
            {loading ? 'Generating...' : 'Generate Link'}
          </button>
        )}

        {/* Generated Link Display */}
        {generatedLink && (
          <div className="space-y-4">
            <div className="p-4 bg-accent-green/10 border-2 border-accent-green/30 rounded-lg">
              <div className="flex items-center gap-2 mb-2">
                <LinkIcon size={16} className="text-accent-green" />
                <span className="text-sm font-medium text-accent-green">
                  Link Generated Successfully
                </span>
              </div>
              <div className="flex items-center gap-2">
                <input
                  type="text"
                  value={generatedLink}
                  readOnly
                  className="flex-1 px-3 py-2 bg-white border border-neutral-brown-500/20 rounded text-sm"
                />
                <button
                  onClick={copyToClipboard}
                  className="px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark transition-all"
                >
                  <Copy size={16} />
                </button>
              </div>
            </div>

            {/* Expiration Info */}
            <div className="flex items-center gap-2 text-sm text-neutral-brown-700">
              <Clock size={16} />
              <span>Expires in {duration} hours</span>
            </div>

            {/* Revoke Button */}
            <button className="w-full border-2 border-error text-error hover:bg-error hover:text-white font-semibold py-3 rounded-lg transition-all">
              Revoke Access
            </button>
          </div>
        )}
      </div>
    </div>
  );
}
```

---

#### Countdown Timer Component

```tsx
import { useEffect, useState } from 'react';
import { Clock } from 'lucide-react';

interface CountdownTimerProps {
  expiresAt: Date;
  onExpire?: () => void;
}

export function CountdownTimer({ expiresAt, onExpire }: CountdownTimerProps) {
  const [timeRemaining, setTimeRemaining] = useState(calculateTimeRemaining());

  function calculateTimeRemaining() {
    const now = new Date();
    const diff = expiresAt.getTime() - now.getTime();

    if (diff <= 0) {
      return { hours: 0, minutes: 0, seconds: 0, expired: true };
    }

    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    return { hours, minutes, seconds, expired: false };
  }

  useEffect(() => {
    const interval = setInterval(() => {
      const remaining = calculateTimeRemaining();
      setTimeRemaining(remaining);

      if (remaining.expired && onExpire) {
        onExpire();
        clearInterval(interval);
      }
    }, 1000);

    return () => clearInterval(interval);
  }, [expiresAt]);

  if (timeRemaining.expired) {
    return (
      <div className="bg-error/10 border-2 border-error text-error px-4 py-3 rounded-lg flex items-center gap-2">
        <Clock size={20} />
        <span className="font-semibold">Access Expired</span>
      </div>
    );
  }

  const isUrgent = timeRemaining.hours < 1;

  return (
    <div
      className={`px-4 py-3 rounded-lg flex items-center gap-3 ${
        isUrgent
          ? 'bg-error/10 border-2 border-error text-error'
          : 'bg-primary/10 border-2 border-primary text-primary'
      }`}
    >
      <Clock size={20} />
      <div>
        <span className="text-sm font-medium">Time Remaining:</span>
        <span className="ml-2 text-lg font-bold font-mono">
          {String(timeRemaining.hours).padStart(2, '0')}:
          {String(timeRemaining.minutes).padStart(2, '0')}:
          {String(timeRemaining.seconds).padStart(2, '0')}
        </span>
      </div>
    </div>
  );
}
```

---

#### Temporary Access Banner

```tsx
import { AlertCircle, ShoppingCart } from 'lucide-react';
import { CountdownTimer } from './CountdownTimer';

interface TemporaryAccessBannerProps {
  expiresAt: Date;
  bookTitle: string;
  bookId: string;
}

export function TemporaryAccessBanner({
  expiresAt,
  bookTitle,
  bookId,
}: TemporaryAccessBannerProps) {
  return (
    <div className="bg-gradient-to-r from-primary/5 to-primary/10 border-b-2 border-primary/20 p-4">
      <div className="max-w-7xl mx-auto">
        {/* Warning Message */}
        <div className="flex items-center gap-2 mb-3">
          <AlertCircle size={20} className="text-primary" />
          <p className="text-sm font-medium text-neutral-brown-900">
            You're viewing <strong>{bookTitle}</strong> with temporary access
          </p>
        </div>

        {/* Countdown and CTA */}
        <div className="flex items-center justify-between gap-4 flex-wrap">
          <CountdownTimer expiresAt={expiresAt} />

          <button className="bg-primary hover:bg-primary-dark text-white font-semibold px-6 py-3 rounded-lg flex items-center gap-2 transition-all hover:-translate-y-0.5">
            <ShoppingCart size={20} />
            Purchase Full Access
          </button>
        </div>
      </div>
    </div>
  );
}
```

---

#### Access Links Management Table

```tsx
import { Copy, Trash2, ExternalLink } from 'lucide-react';
import { CountdownTimer } from './CountdownTimer';

interface AccessLink {
  id: string;
  token: string;
  book: {
    title: string;
    coverImage: string;
  };
  recipient?: string;
  createdAt: Date;
  expiresAt: Date;
  isRevoked: boolean;
}

export function AccessLinksTable({ links }: { links: AccessLink[] }) {
  const copyLink = (token: string) => {
    const url = `${window.location.origin}/read/${token}`;
    navigator.clipboard.writeText(url);
    // Show toast
  };

  const revokeLink = async (id: string) => {
    // Call API to revoke
  };

  return (
    <div className="bg-white rounded-xl shadow-md overflow-hidden">
      <table className="w-full">
        <thead className="bg-neutral-cream border-b-2 border-neutral-brown-500/10">
          <tr>
            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
              Book
            </th>
            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
              Recipient
            </th>
            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
              Created
            </th>
            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
              Expires In
            </th>
            <th className="px-6 py-4 text-left text-sm font-semibold text-neutral-brown-900">
              Status
            </th>
            <th className="px-6 py-4 text-right text-sm font-semibold text-neutral-brown-900">
              Actions
            </th>
          </tr>
        </thead>
        <tbody className="divide-y divide-neutral-brown-500/10">
          {links.map((link) => (
            <tr key={link.id} className="hover:bg-neutral-cream/50 transition-colors">
              {/* Book */}
              <td className="px-6 py-4">
                <div className="flex items-center gap-3">
                  <img
                    src={link.book.coverImage}
                    alt={link.book.title}
                    className="w-10 h-14 object-cover rounded"
                  />
                  <span className="font-medium text-neutral-brown-900">
                    {link.book.title}
                  </span>
                </div>
              </td>

              {/* Recipient */}
              <td className="px-6 py-4 text-sm text-neutral-brown-700">
                {link.recipient || ''}
              </td>

              {/* Created */}
              <td className="px-6 py-4 text-sm text-neutral-brown-700">
                {new Date(link.createdAt).toLocaleDateString()}
              </td>

              {/* Expires In */}
              <td className="px-6 py-4">
                <CountdownTimer expiresAt={link.expiresAt} />
              </td>

              {/* Status */}
              <td className="px-6 py-4">
                {link.isRevoked ? (
                  <span className="inline-block px-3 py-1 bg-error/20 text-error text-sm font-medium rounded-full">
                    Revoked
                  </span>
                ) : new Date() > link.expiresAt ? (
                  <span className="inline-block px-3 py-1 bg-neutral-brown-500/20 text-neutral-brown-700 text-sm font-medium rounded-full">
                    Expired
                  </span>
                ) : (
                  <span className="inline-block px-3 py-1 bg-accent-green/20 text-accent-green text-sm font-medium rounded-full">
                    Active
                  </span>
                )}
              </td>

              {/* Actions */}
              <td className="px-6 py-4">
                <div className="flex items-center justify-end gap-2">
                  <button
                    onClick={() => copyLink(link.token)}
                    className="p-2 text-primary hover:bg-primary/10 rounded transition-colors"
                    title="Copy Link"
                  >
                    <Copy size={16} />
                  </button>
                  <button
                    onClick={() => window.open(`/read/${link.token}`, '_blank')}
                    className="p-2 text-neutral-brown-700 hover:bg-neutral-brown-500/10 rounded transition-colors"
                    title="Open Link"
                  >
                    <ExternalLink size={16} />
                  </button>
                  {!link.isRevoked && (
                    <button
                      onClick={() => revokeLink(link.id)}
                      className="p-2 text-error hover:bg-error/10 rounded transition-colors"
                      title="Revoke Access"
                    >
                      <Trash2 size={16} />
                    </button>
                  )}
                </div>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
```

---

### User Flows

#### 1. Generating a Temporary Link

1. User clicks "Share" button on book detail page
2. Modal opens with link generation form
3. User selects duration (24h, 7d, 30d)
4. Optionally enters recipient email
5. Clicks "Generate Link"
6. Link is created and displayed with copy button
7. User copies link and shares via email/messaging
8. User can revoke link at any time

#### 2. Accessing via Temporary Link

1. Recipient clicks temporary access link
2. System validates token (not expired, not revoked)
3. If valid: Book reader opens with countdown banner
4. If invalid: Error page with "Link expired" message
5. Reader shows remaining time prominently
6. "Purchase Full Access" CTA always visible
7. When time expires: Reader locks, shows purchase prompt

#### 3. Managing Access Links (Author Dashboard)

1. Author navigates to "Shared Links" section
2. Views table of all generated links
3. Can filter by status (Active, Expired, All)
4. Sees countdown timers for active links
5. Can copy link URL to share again
6. Can revoke active links
7. Views stats: Total created, Active, Total views

---

### States & Interactions

#### Link States

| State | Visual | Actions Available |
|-------|--------|-------------------|
| Active | Green badge, countdown timer | Copy, Open, Revoke |
| Expired | Gray badge, "Expired" text | Copy (for reference) |
| Revoked | Red badge, "Revoked" text | None |

#### Countdown Timer States

| Time Remaining | Color | Urgency |
|----------------|-------|---------|
| > 24 hours | Terracotta (primary) | Normal |
| 1-24 hours | Orange | Medium |
| < 1 hour | Red | Urgent |
| Expired | Red background | Critical |

---

### API Integration

```typescript
// Generate link
const response = await fetch('/api/access-links', {
  method: 'POST',
  body: JSON.stringify({
    bookId: 'uuid',
    expiresInHours: 168,
  }),
});

// Validate link
const response = await fetch(`/api/access-links/${token}`);
const { valid, book, expiresAt } = await response.json();

// Revoke link
await fetch(`/api/access-links/${token}`, {
  method: 'DELETE',
});
```

---

## Implementation Checklist

### Phase 1: Setup
- [ ] Install Tailwind CSS
- [ ] Configure custom colors
- [ ] Add Google Fonts (Playfair Display, Inter)
- [ ] Install Lucide React icons
- [ ] Create pattern SVGs

### Phase 2: Components
- [ ] Button variants (Primary, Secondary, Ghost)
- [ ] Card components (Book, Stat, Author)
- [ ] Form elements (Input, Search, Select)
- [ ] Navigation bar
- [ ] Footer

### Phase 3: Pages
- [ ] Landing page
- [ ] Books catalog
- [ ] Book detail
- [ ] Author profile
- [ ] Author dashboard

### Phase 4: Polish
- [ ] Add animations
- [ ] Implement loading states
- [ ] Test accessibility
- [ ] Optimize for mobile
- [ ] Add dark mode (optional)

---

#### 3. Access Links Management Dashboard

![Access Links Management](/mockups/access_links_management_1764673031089.png)
---

## Resources

- **Design Mockups**: See `/home/ngobiro/.gemini/antigravity/brain/582a3931-c933-4278-9c7c-3eaa65d0c9df/`
- **Tailwind CSS**: https://tailwindcss.com
- **Lucide Icons**: https://lucide.dev
- **Google Fonts**: https://fonts.google.com
- **WCAG Guidelines**: https://www.w3.org/WAI/WCAG21/quickref/

---

## Support

For UI/UX questions or design feedback, refer to this documentation or consult the design mockups in the artifacts directory.


##################################################################
# File: docs/API.md
##################################################################

# API Documentation

## Overview

AfriReads provides a RESTful API for managing books, authors, purchases, and time-limited access. All API routes are located in `src/app/api/`.

## Authentication

Most endpoints require authentication via NextAuth.js session cookies.

```typescript
// Check authentication in API routes
import { getServerSession } from 'next-auth';
import { authOptions } from '@/lib/auth';

const session = await getServerSession(authOptions);
if (!session) {
  return new Response('Unauthorized', { status: 401 });
}
```

## Endpoints

### Authentication

#### POST `/api/register`

Register a new user account.

**Request Body:**
```json
{
  "email": "user@example.com",
  "password": "securepassword",
  "name": "John Doe",
  "role": "READER" // or "AUTHOR"
}
```

**Response:**
```json
{
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "name": "John Doe",
    "role": "READER"
  }
}
```

#### POST `/api/auth/signin`

Sign in (handled by NextAuth).

---

### Books

#### GET `/api/books`

Get all books with optional filtering.

**Query Parameters:**
- `search` - Search by title or description
- `category` - Filter by category
- `authorId` - Filter by author
- `minPrice` - Minimum price
- `maxPrice` - Maximum price
- `page` - Page number (default: 1)
- `limit` - Items per page (default: 20)

**Response:**
```json
{
  "books": [
    {
      "id": "uuid",
      "title": "Book Title",
      "description": "Book description",
      "coverImage": "images/cover.jpg",
      "price": 500,
      "category": "Fiction",
      "author": {
        "id": "uuid",
        "user": {
          "name": "Author Name"
        }
      }
    }
  ],
  "total": 100,
  "page": 1,
  "totalPages": 5
}
```

#### GET `/api/books/[id]`

Get a specific book by ID.

**Response:**
```json
{
  "id": "uuid",
  "title": "Book Title",
  "description": "Full description",
  "coverImage": "images/cover.jpg",
  "fileKey": "books/uuid/book.pdf",
  "fileSize": 5242880,
  "fileType": "pdf",
  "price": 500,
  "previewPages": 10,
  "category": "Fiction",
  "language": "Kalenjin",
  "publishedAt": "2024-12-02T00:00:00Z",
  "author": {
    "id": "uuid",
    "bio": "Author bio",
    "user": {
      "name": "Author Name"
    }
  }
}
```

#### POST `/api/books`

Create a new book (Authors only).

**Request Body:**
```json
{
  "title": "New Book",
  "description": "Book description",
  "price": 500,
  "category": "Fiction",
  "previewPages": 10
}
```

**Response:**
```json
{
  "book": {
    "id": "uuid",
    "title": "New Book",
    "isPublished": false
  }
}
```

#### PUT `/api/books/[id]`

Update a book (Author only, own books).

**Request Body:**
```json
{
  "title": "Updated Title",
  "description": "Updated description",
  "price": 600,
  "isPublished": true
}
```

#### DELETE `/api/books/[id]`

Delete a book (Author only, own books).

---

### Book Upload

#### POST `/api/books/upload`

Upload a book file to Cloudflare R2.

**Content-Type:** `multipart/form-data`

**Form Data:**
- `file` - PDF or EPUB file
- `bookId` - Book UUID

**Response:**
```json
{
  "fileKey": "books/uuid/filename.pdf",
  "fileSize": 5242880,
  "fileType": "application/pdf"
}
```

---

### Authors

#### GET `/api/authors`

Get all authors.

**Response:**
```json
{
  "authors": [
    {
      "id": "uuid",
      "bio": "Author biography",
      "profileImage": "images/profile.jpg",
      "totalEarnings": 15000,
      "user": {
        "name": "Author Name",
        "email": "author@example.com"
      },
      "_count": {
        "books": 5
      }
    }
  ]
}
```

#### GET `/api/authors/[id]`

Get a specific author with their books.

**Response:**
```json
{
  "id": "uuid",
  "bio": "Author biography",
  "profileImage": "images/profile.jpg",
  "totalEarnings": 15000,
  "user": {
    "name": "Author Name"
  },
  "books": [
    {
      "id": "uuid",
      "title": "Book Title",
      "price": 500
    }
  ]
}
```

---

### Purchases

#### POST `/api/checkout`

Create a Stripe checkout session for book purchase.

**Request Body:**
```json
{
  "bookId": "uuid"
}
```

**Response:**
```json
{
  "sessionId": "stripe_session_id",
  "url": "https://checkout.stripe.com/..."
}
```

#### GET `/api/purchases`

Get user's purchase history.

**Response:**
```json
{
  "purchases": [
    {
      "id": "uuid",
      "amount": 500,
      "status": "COMPLETED",
      "purchasedAt": "2024-12-02T00:00:00Z",
      "book": {
        "id": "uuid",
        "title": "Book Title"
      }
    }
  ]
}
```

---

### Time-Limited Access

#### POST `/api/access-links`

Generate a time-limited access link for a book.

**Request Body:**
```json
{
  "bookId": "uuid",
  "expiresInHours": 168
}
```

**Response:**
```json
{
  "token": "hex_token",
  "expiresAt": "2024-12-09T00:00:00Z",
  "url": "https://afrireads.com/read/hex_token"
}
```

#### GET `/api/access-links/[token]`

Validate an access token.

**Response:**
```json
{
  "valid": true,
  "book": {
    "id": "uuid",
    "title": "Book Title",
    "fileKey": "books/uuid/book.pdf"
  },
  "expiresAt": "2024-12-09T00:00:00Z",
  "remainingTime": {
    "hours": 24,
    "minutes": 30,
    "seconds": 15
  }
}
```

#### DELETE `/api/access-links/[token]`

Revoke an access token.

---

### Webhooks

#### POST `/api/webhooks/stripe`

Handle Stripe webhook events.

**Events Handled:**
- `checkout.session.completed` - Process successful payment
- `payment_intent.payment_failed` - Handle failed payment

**Headers Required:**
- `stripe-signature` - Webhook signature for verification

---

## Error Responses

All endpoints return standard error responses:

```json
{
  "error": "Error message",
  "code": "ERROR_CODE"
}
```

**Common HTTP Status Codes:**
- `200` - Success
- `201` - Created
- `400` - Bad Request
- `401` - Unauthorized
- `403` - Forbidden
- `404` - Not Found
- `500` - Internal Server Error

## Rate Limiting

API endpoints are rate-limited via Cloudflare:
- 100 requests per minute per IP
- 1000 requests per hour per IP

## CORS

CORS is configured to allow requests from:
- Production domain
- Development localhost:3000


##################################################################
# File: docs/CLOUDFLARE.md
##################################################################

# Cloudflare Infrastructure Setup Guide

## Overview

AfriReads leverages Cloudflare's edge infrastructure for optimal performance and cost efficiency:

- **Cloudflare R2**: Zero-egress-fee object storage for books and images
- **Cloudflare D1**: Serverless SQLite database
- **Cloudflare Workers/Pages**: Edge computing for backend and frontend
- **Cloudflare CDN**: Global content delivery network

## Prerequisites

1. Cloudflare account ([sign up](https://dash.cloudflare.com/sign-up))
2. Domain name (optional, but recommended)
3. Wrangler CLI installed (`npm install -g wrangler`)

## Step-by-Step Setup

### 1. Install Wrangler CLI

```bash
npm install -g wrangler
# or install locally
npm install --save-dev wrangler
```

### 2. Login to Cloudflare

```bash
npx wrangler login
```

This will open a browser window for authentication.

### 3. Get Your Account ID

```bash
npx wrangler whoami
```

Copy your Account ID and add it to `.env`:

```env
CLOUDFLARE_ACCOUNT_ID=your_account_id_here
```

---

## Cloudflare R2 Setup

### Create R2 Bucket

```bash
npx wrangler r2 bucket create kalenjin-books
```

### Generate R2 Access Keys

1. Go to [Cloudflare Dashboard](https://dash.cloudflare.com)
2. Navigate to **R2**  **Overview**
3. Click **Manage R2 API Tokens**
4. Click **Create API Token**
5. Select **Admin Read & Write** permissions
6. Copy the Access Key ID and Secret Access Key

Add to `.env`:

```env
R2_BUCKET_NAME=kalenjin-books
R2_ACCESS_KEY_ID=your_access_key_id
R2_SECRET_ACCESS_KEY=your_secret_access_key
```

### Configure R2 in wrangler.toml

```toml
[[r2_buckets]]
binding = "BOOKS_BUCKET"
bucket_name = "kalenjin-books"
```

### Test R2 Connection

```typescript
// Test upload
import { uploadBook } from '@/lib/cloudflare-r2';

const testBuffer = Buffer.from('Test content');
const fileKey = await uploadBook({
  file: testBuffer,
  fileName: 'test.pdf',
  contentType: 'application/pdf',
  bookId: 'test-id'
});

console.log('Uploaded to:', fileKey);
```

---

## Cloudflare D1 Setup

### Create D1 Database

```bash
npx wrangler d1 create kalenjin-books-db
```

**Output:**
```
 Successfully created DB 'kalenjin-books-db'

[[d1_databases]]
binding = "DB"
database_name = "kalenjin-books-db"
database_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
```

Copy the database configuration to `wrangler.toml`.

### Initialize Database Schema

Generate Prisma client:

```bash
npx prisma generate
```

Create migration SQL:

```bash
npx prisma migrate dev --name init
```

Apply to D1:

```bash
npx wrangler d1 execute kalenjin-books-db --file=./prisma/migrations/YYYYMMDDHHMMSS_init/migration.sql
```

### Verify Database

```bash
npx wrangler d1 execute kalenjin-books-db --command="SELECT name FROM sqlite_master WHERE type='table';"
```

### Query D1 Database

```bash
# List all tables
npx wrangler d1 execute kalenjin-books-db --command="SELECT * FROM User LIMIT 5;"
```

---

## Cloudflare Workers/Pages Deployment

### Option 1: Cloudflare Pages (Recommended for Next.js)

#### Build Configuration

Update `package.json`:

```json
{
  "scripts": {
    "build": "next build",
    "deploy": "npx wrangler pages deploy .next"
  }
}
```

#### Deploy

```bash
npm run build
npx wrangler pages deploy .next
```

#### Configure Environment Variables

In Cloudflare Dashboard:
1. Go to **Workers & Pages**
2. Select your project
3. Navigate to **Settings**  **Environment Variables**
4. Add all variables from `.env`

### Option 2: Cloudflare Workers

For API-only deployment:

```bash
npx wrangler deploy
```

---

## Custom Domain Setup

### Add Custom Domain

1. Go to **Workers & Pages** in Cloudflare Dashboard
2. Select your project
3. Navigate to **Custom Domains**
4. Click **Set up a custom domain**
5. Enter your domain (e.g., `afrireads.com`)
6. Follow DNS configuration instructions

### SSL/TLS Configuration

Cloudflare automatically provisions SSL certificates for custom domains.

**Recommended Settings:**
- SSL/TLS encryption mode: **Full (strict)**
- Always Use HTTPS: **On**
- Automatic HTTPS Rewrites: **On**

---

## Cloudflare KV (Optional - for Caching)

### Create KV Namespace

```bash
npx wrangler kv:namespace create "CACHE"
```

Add to `wrangler.toml`:

```toml
[[kv_namespaces]]
binding = "CACHE"
id = "your_kv_namespace_id"
```

### Use KV for Caching

```typescript
// In Cloudflare Worker
export default {
  async fetch(request, env) {
    const cacheKey = 'books:featured';
    
    // Try cache first
    const cached = await env.CACHE.get(cacheKey, 'json');
    if (cached) return Response.json(cached);
    
    // Fetch from database
    const books = await fetchFeaturedBooks();
    
    // Cache for 1 hour
    await env.CACHE.put(cacheKey, JSON.stringify(books), {
      expirationTtl: 3600
    });
    
    return Response.json(books);
  }
};
```

---

## Secrets Management

### Set Secrets

Never commit secrets to version control. Use Wrangler to set secrets:

```bash
npx wrangler secret put NEXTAUTH_SECRET
npx wrangler secret put STRIPE_SECRET_KEY
npx wrangler secret put STRIPE_WEBHOOK_SECRET
npx wrangler secret put DATABASE_URL
```

### List Secrets

```bash
npx wrangler secret list
```

### Delete Secrets

```bash
npx wrangler secret delete SECRET_NAME
```

---

## Monitoring & Analytics

### Enable Analytics

1. Go to **Workers & Pages**  Your Project
2. Navigate to **Analytics**
3. View metrics:
   - Requests per second
   - Error rate
   - CPU time
   - Duration

### Logs

View real-time logs:

```bash
npx wrangler tail
```

Filter logs:

```bash
npx wrangler tail --status error
```

---

## Cost Optimization

### R2 Pricing

- **Storage**: $0.015/GB/month
- **Class A Operations** (write): $4.50/million
- **Class B Operations** (read): $0.36/million
- **Egress**: **FREE** (huge savings vs S3)

### D1 Pricing

- **Free Tier**:
  - 5 GB storage
  - 5 million reads/day
  - 100,000 writes/day
- **Paid**: $0.75/million reads, $1.00/million writes

### Workers/Pages Pricing

- **Free Tier**:
  - 100,000 requests/day
  - 10ms CPU time per request
- **Paid**: $5/month for 10 million requests

### Cost Estimation

For a platform with:
- 10,000 books (average 5MB each) = 50GB storage
- 100,000 book downloads/month
- 1 million API requests/month

**Monthly Cost:**
- R2 Storage: $0.75
- R2 Operations: ~$2
- D1: Free tier sufficient
- Workers: Free tier sufficient
- **Total: ~$3/month**

Compare to AWS S3 egress fees: **$4,500/month** for same traffic!

---

## Troubleshooting

### R2 Connection Issues

```bash
# Test R2 access
npx wrangler r2 object list kalenjin-books --limit 10
```

### D1 Migration Errors

```bash
# Reset database (CAUTION: deletes all data)
npx wrangler d1 execute kalenjin-books-db --command="DROP TABLE IF EXISTS User;"

# Re-apply migrations
npx wrangler d1 execute kalenjin-books-db --file=./prisma/migrations/YYYYMMDDHHMMSS_init/migration.sql
```

### Deployment Failures

```bash
# Check deployment logs
npx wrangler pages deployment list

# View specific deployment
npx wrangler pages deployment tail DEPLOYMENT_ID
```

---

## Best Practices

1. **Use Separate Environments**: Create separate R2 buckets and D1 databases for development, staging, and production

2. **Enable Caching**: Use Cloudflare KV for frequently accessed data

3. **Optimize Images**: Compress cover images before uploading to R2

4. **Monitor Costs**: Set up billing alerts in Cloudflare Dashboard

5. **Backup Regularly**: Export D1 database weekly

6. **Use Signed URLs**: Always use signed URLs for R2 objects to prevent unauthorized access

7. **Rate Limiting**: Configure rate limiting in Cloudflare Dashboard to prevent abuse

---

## Additional Resources

- [Cloudflare R2 Documentation](https://developers.cloudflare.com/r2/)
- [Cloudflare D1 Documentation](https://developers.cloudflare.com/d1/)
- [Cloudflare Workers Documentation](https://developers.cloudflare.com/workers/)
- [Wrangler CLI Reference](https://developers.cloudflare.com/workers/wrangler/)


##################################################################
# File: docs/DASHBOARD_GAPS.md
##################################################################

# Dashboard Comparison: Current vs Mockup

## What We Have 
- Stats cards (4 cards: Total Earnings, Books Published, Total Sales, Available Balance)
- Recent Sales section
- Top Performing Books section
- Basic layout structure
- Mockup reference collapsible section

## What's Missing from the Mockup 

Based on the mockup `afrireads_author_dashboard_1764672335838.png`, here are the gaps:

### 1. **Visual Design Issues**
- [ ] Stats cards may need better visual hierarchy
- [ ] Missing earnings chart/graph visualization
- [ ] Book thumbnails/covers not showing in tables
- [ ] Color scheme may not match exactly

### 2. **Missing Components**
- [ ] Earnings trend chart (line/bar chart showing monthly revenue)
- [ ] My Books table with actual book covers
- [ ] Recent activity feed
- [ ] Quick actions panel

### 3. **Data Visualization**
- [ ] No charts or graphs for earnings trends
- [ ] Missing visual indicators for book performance
- [ ] No progress bars or visual metrics

### 4. **Layout & Spacing**
- [ ] Grid layout may need adjustment
- [ ] Card shadows and borders may differ
- [ ] Typography sizes and weights

## Specific Issues to Fix

### Priority 1: Add Earnings Chart
The mockup shows a revenue chart. We need to add a proper chart component.

### Priority 2: Book Covers in Tables
Recent sales and top books should show book cover thumbnails.

### Priority 3: Better Visual Hierarchy
Improve spacing, shadows, and overall visual polish.

## Next Steps
1. Review the mockup image in detail
2. Identify exact visual differences
3. Implement missing chart component
4. Add book cover images
5. Adjust styling to match mockup exactly


##################################################################
# File: docs/LANDING_PAGE_GAPS.md
##################################################################

# Landing Page Comparison: Current vs Mockup

## Current Implementation 

**What we have:**
- Navigation bar with logo and links
- Hero section with heading and description
- Two CTA buttons (Browse Books, Become an Author)
- Three feature cards (Rich Collection, Support Authors, Earn as Author)
- Footer with copyright

## Missing from Mockup 

Based on `afrireads_landing_page_1764672267589.png`, here's what's missing:

### 1. **Featured Books Section**
- [ ] Carousel/slider showing featured books
- [ ] Book covers with titles and authors
- [ ] "View All" link
- [ ] Horizontal scrolling book cards

### 2. **Categories Section**
- [ ] Grid of book categories (Folklore, History, Poetry, etc.)
- [ ] Category cards with icons
- [ ] Category descriptions
- [ ] Browse by category functionality

### 3. **Featured Authors Section**
- [ ] Author profile cards
- [ ] Author photos/avatars
- [ ] Author names and book counts
- [ ] "View All Authors" link

### 4. **Platform Statistics**
- [ ] Stats section showing:
  - Total books available
  - Number of authors
  - Books sold
  - Active readers

### 5. **Call-to-Action Banner**
- [ ] Secondary CTA section for authors
- [ ] "Start Publishing Today" or similar message
- [ ] Author benefits highlights

### 6. **Visual Enhancements**
- [ ] Background patterns or textures
- [ ] Better spacing and visual hierarchy
- [ ] More engaging hero section design
- [ ] Improved typography scale

### 7. **Navigation Improvements**
- [ ] More navigation links (About, Authors, Categories)
- [ ] Search bar in header
- [ ] User account/login buttons

## Priority Fixes

### High Priority
1. Add Featured Books carousel
2. Add Categories grid
3. Add Featured Authors section
4. Add Platform Statistics

### Medium Priority
5. Enhance hero section visuals
6. Add secondary CTA banner
7. Improve navigation

### Low Priority
8. Add background patterns
9. Fine-tune spacing
10. Add animations/transitions

## Implementation Plan

### Phase 1: Featured Books
- Create BookCarousel component
- Fetch featured books data
- Add horizontal scroll functionality

### Phase 2: Categories
- Create CategoryCard component
- Define category list
- Create grid layout

### Phase 3: Featured Authors
- Create AuthorCard component
- Fetch featured authors
- Add author grid

### Phase 4: Statistics
- Create StatsSection component
- Add counter animations
- Display platform metrics

### Phase 5: Polish
- Add background patterns
- Improve spacing
- Add micro-interactions


##################################################################
# File: docs/PAYMENTS.md
##################################################################

# Payment System UI Documentation

## Overview

The AfriReads payment system supports two payment methods:
1. **Stripe** - International card payments
2. **M-Pesa** - Mobile money for Kenya

This document covers all payment-related UI components and flows.

---

## Payment Flows

### 1. Checkout Page

**Route:** `/checkout/[bookId]`

**Layout:**
```

                                      
  Order Summary   Payment Method      
                                      
  Book Cover        
  Title           Card  M-Pesa    
  Author            
  Price                               
                  Card Details Form   
  Subtotal        
  Platform Fee     Card Number     
  Total            Expiry    CVV   
                   Cardholder Name 
                  
                                      
                  [Complete Purchase] 
                                      
                   Secure Payment   

```

**Components:**

#### Order Summary Card
```tsx
interface OrderSummaryProps {
  book: {
    id: string;
    title: string;
    coverImage: string;
    author: string;
    price: number;
  };
  platformFee: number;
}

export function OrderSummary({ book, platformFee }: OrderSummaryProps) {
  const total = book.price + platformFee;

  return (
    <div className="bg-white rounded-xl p-6 shadow-md">
      <h2 className="text-xl font-bold text-neutral-brown-900 mb-4">
        Order Summary
      </h2>

      {/* Book Info */}
      <div className="flex gap-4 mb-6">
        <img
          src={book.coverImage}
          alt={book.title}
          className="w-20 h-28 object-cover rounded"
        />
        <div>
          <h3 className="font-semibold text-neutral-brown-900">{book.title}</h3>
          <p className="text-sm text-neutral-brown-700">{book.author}</p>
          <p className="text-lg font-bold text-primary mt-2">
            KES {book.price.toLocaleString()}
          </p>
        </div>
      </div>

      {/* Price Breakdown */}
      <div className="border-t border-neutral-brown-500/20 pt-4 space-y-2">
        <div className="flex justify-between text-sm">
          <span className="text-neutral-brown-700">Subtotal</span>
          <span className="font-medium">KES {book.price.toLocaleString()}</span>
        </div>
        <div className="flex justify-between text-sm">
          <span className="text-neutral-brown-700">Platform Fee (10%)</span>
          <span className="font-medium">KES {platformFee.toLocaleString()}</span>
        </div>
        <div className="flex justify-between text-lg font-bold border-t border-neutral-brown-500/20 pt-2 mt-2">
          <span>Total</span>
          <span className="text-primary">KES {total.toLocaleString()}</span>
        </div>
      </div>
    </div>
  );
}
```

#### Payment Method Tabs
```tsx
import { CreditCard, Smartphone } from 'lucide-react';

type PaymentMethod = 'stripe' | 'mpesa';

export function PaymentMethodSelector({
  selected,
  onSelect,
}: {
  selected: PaymentMethod;
  onSelect: (method: PaymentMethod) => void;
}) {
  return (
    <div className="flex gap-2 mb-6">
      <button
        onClick={() => onSelect('stripe')}
        className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${
          selected === 'stripe'
            ? 'border-primary bg-primary/10 text-primary'
            : 'border-neutral-brown-500/20 text-neutral-brown-700 hover:border-primary/50'
        }`}
      >
        <CreditCard size={20} />
        <span className="font-medium">Card Payment</span>
      </button>

      <button
        onClick={() => onSelect('mpesa')}
        className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 transition-all ${
          selected === 'mpesa'
            ? 'border-primary bg-primary/10 text-primary'
            : 'border-neutral-brown-500/20 text-neutral-brown-700 hover:border-primary/50'
        }`}
      >
        <Smartphone size={20} />
        <span className="font-medium">M-Pesa</span>
      </button>
    </div>
  );
}
```

---

### 2. Stripe Payment Form

```tsx
import { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';
import { Lock } from 'lucide-react';

export function StripePaymentForm({ amount, onSuccess }: {
  amount: number;
  onSuccess: (paymentIntentId: string) => void;
}) {
  const stripe = useStripe();
  const elements = useElements();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!stripe || !elements) return;

    setLoading(true);
    setError('');

    try {
      // Create payment intent
      const response = await fetch('/api/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount }),
      });

      const { clientSecret } = await response.json();

      // Confirm payment
      const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
        payment_method: {
          card: elements.getElement(CardElement)!,
        },
      });

      if (error) {
        setError(error.message || 'Payment failed');
      } else if (paymentIntent?.status === 'succeeded') {
        onSuccess(paymentIntent.id);
      }
    } catch (err) {
      setError('An error occurred. Please try again.');
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      {/* Card Element */}
      <div className="p-4 border-2 border-neutral-brown-500/20 rounded-lg">
        <CardElement
          options={{
            style: {
              base: {
                fontSize: '16px',
                color: '#4A3728',
                '::placeholder': {
                  color: '#9B8D82',
                },
              },
            },
          }}
        />
      </div>

      {/* Error Message */}
      {error && (
        <div className="p-3 bg-error/10 border border-error/30 rounded-lg text-error text-sm">
          {error}
        </div>
      )}

      {/* Submit Button */}
      <button
        type="submit"
        disabled={!stripe || loading}
        className="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
      >
        {loading ? 'Processing...' : `Pay KES ${amount.toLocaleString()}`}
      </button>

      {/* Security Badge */}
      <div className="flex items-center justify-center gap-2 text-sm text-neutral-brown-700">
        <Lock size={16} />
        <span>Secured by Stripe</span>
      </div>
    </form>
  );
}
```

---

### 3. M-Pesa Payment Modal

**Description:**
Modal dialog for M-Pesa STK Push payment. User enters phone number, clicks "Send STK Push", then enters PIN on their phone.

```tsx
import { Smartphone, Loader2 } from 'lucide-react';

type MpesaStatus = 'input' | 'processing' | 'success' | 'failed';

export function MpesaPaymentModal({
  amount,
  onSuccess,
  onClose,
}: {
  amount: number;
  onSuccess: (transactionId: string) => void;
  onClose: () => void;
}) {
  const [phoneNumber, setPhoneNumber] = useState('');
  const [status, setStatus] = useState<MpesaStatus>('input');
  const [error, setError] = useState('');

  const handleSendSTK = async () => {
    setStatus('processing');
    setError('');

    try {
      const response = await fetch('/api/mpesa/stk-push', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          phoneNumber: `254${phoneNumber}`,
          amount,
        }),
      });

      const data = await response.json();

      if (data.success) {
        // Poll for payment status
        const checkStatus = setInterval(async () => {
          const statusRes = await fetch(`/api/mpesa/status/${data.checkoutRequestId}`);
          const statusData = await statusRes.json();

          if (statusData.status === 'completed') {
            clearInterval(checkStatus);
            setStatus('success');
            onSuccess(statusData.transactionId);
          } else if (statusData.status === 'failed') {
            clearInterval(checkStatus);
            setStatus('failed');
            setError('Payment was cancelled or failed');
          }
        }, 2000);
      } else {
        setStatus('failed');
        setError(data.message || 'Failed to initiate payment');
      }
    } catch (err) {
      setStatus('failed');
      setError('An error occurred. Please try again.');
    }
  };

  return (
    <div className="fixed inset-0 bg-neutral-brown-900/80 flex items-center justify-center z-50">
      <div className="bg-white rounded-2xl p-6 max-w-md w-full mx-4">
        {/* Header */}
        <div className="text-center mb-6">
          <div className="w-16 h-16 bg-accent-green/20 rounded-full flex items-center justify-center mx-auto mb-3">
            <Smartphone size={32} className="text-accent-green" />
          </div>
          <h2 className="text-2xl font-bold text-neutral-brown-900">Pay with M-Pesa</h2>
          <p className="text-3xl font-bold text-primary mt-2">
            KES {amount.toLocaleString()}
          </p>
        </div>

        {status === 'input' && (
          <>
            {/* Phone Number Input */}
            <div className="mb-4">
              <label className="block text-sm font-medium text-neutral-brown-900 mb-2">
                M-Pesa Phone Number
              </label>
              <div className="flex items-center gap-2">
                <span className="px-3 py-3 bg-neutral-cream rounded-lg text-neutral-brown-900 font-medium">
                  +254
                </span>
                <input
                  type="tel"
                  value={phoneNumber}
                  onChange={(e) => setPhoneNumber(e.target.value.replace(/\D/g, ''))}
                  placeholder="712345678"
                  maxLength={9}
                  className="flex-1 px-4 py-3 border-2 border-neutral-brown-500/20 rounded-lg focus:border-primary focus:outline-none"
                />
              </div>
            </div>

            {/* Instructions */}
            <div className="bg-primary/10 border border-primary/30 rounded-lg p-4 mb-4">
              <p className="text-sm text-neutral-brown-900 font-medium mb-2">
                How to pay:
              </p>
              <ol className="text-sm text-neutral-brown-700 space-y-1 list-decimal list-inside">
                <li>Enter your M-Pesa phone number</li>
                <li>Click "Send STK Push"</li>
                <li>Enter your M-Pesa PIN on your phone</li>
                <li>Wait for confirmation</li>
              </ol>
            </div>

            {/* Submit Button */}
            <button
              onClick={handleSendSTK}
              disabled={phoneNumber.length !== 9}
              className="w-full bg-accent-green hover:bg-accent-green/90 text-white font-semibold py-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Send STK Push
            </button>
          </>
        )}

        {status === 'processing' && (
          <div className="text-center py-8">
            <Loader2 size={48} className="text-primary animate-spin mx-auto mb-4" />
            <p className="text-lg font-semibold text-neutral-brown-900 mb-2">
              Waiting for payment...
            </p>
            <p className="text-sm text-neutral-brown-700">
              Please enter your M-Pesa PIN on your phone
            </p>
          </div>
        )}

        {status === 'failed' && (
          <div className="text-center py-4">
            <div className="w-16 h-16 bg-error/20 rounded-full flex items-center justify-center mx-auto mb-3">
              <span className="text-3xl"></span>
            </div>
            <p className="text-lg font-semibold text-error mb-2">Payment Failed</p>
            <p className="text-sm text-neutral-brown-700 mb-4">{error}</p>
            <button
              onClick={() => setStatus('input')}
              className="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-all"
            >
              Try Again
            </button>
          </div>
        )}

        {/* Cancel Button */}
        {status !== 'success' && (
          <button
            onClick={onClose}
            className="w-full mt-3 text-neutral-brown-700 hover:text-neutral-brown-900 py-2"
          >
            Cancel
          </button>
        )}
      </div>
    </div>
  );
}
```

---

### 4. Payment Success Page

**Route:** `/checkout/success?orderId=[id]`

```tsx
import { CheckCircle, Download, Book } from 'lucide-react';
import Confetti from 'react-confetti';

export function PaymentSuccessPage({ order }: { order: Order }) {
  return (
    <div className="min-h-screen bg-neutral-cream flex items-center justify-center p-4">
      <Confetti recycle={false} numberOfPieces={200} />

      <div className="max-w-2xl w-full">
        {/* Success Icon */}
        <div className="text-center mb-8">
          <CheckCircle size={80} className="text-accent-green mx-auto mb-4" />
          <h1 className="text-4xl font-bold text-neutral-brown-900 mb-2">
            Payment Successful!
          </h1>
          <p className="text-lg text-neutral-brown-700">
            Thank you for your purchase
          </p>
        </div>

        {/* Order Details Card */}
        <div className="bg-white rounded-xl p-6 shadow-md mb-6">
          <h2 className="text-xl font-bold text-neutral-brown-900 mb-4">
            Order Details
          </h2>

          <div className="space-y-3 text-sm">
            <div className="flex justify-between">
              <span className="text-neutral-brown-700">Order ID</span>
              <span className="font-mono font-medium">{order.id}</span>
            </div>
            <div className="flex justify-between">
              <span className="text-neutral-brown-700">Date</span>
              <span className="font-medium">
                {new Date(order.createdAt).toLocaleString()}
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-neutral-brown-700">Payment Method</span>
              <span className="font-medium">{order.paymentMethod}</span>
            </div>
            <div className="flex justify-between text-lg font-bold border-t border-neutral-brown-500/20 pt-3 mt-3">
              <span>Amount Paid</span>
              <span className="text-primary">KES {order.amount.toLocaleString()}</span>
            </div>
          </div>

          {/* Book Info */}
          <div className="flex gap-4 mt-6 p-4 bg-neutral-cream rounded-lg">
            <img
              src={order.book.coverImage}
              alt={order.book.title}
              className="w-16 h-24 object-cover rounded"
            />
            <div>
              <h3 className="font-semibold text-neutral-brown-900">
                {order.book.title}
              </h3>
              <p className="text-sm text-neutral-brown-700">{order.book.author}</p>
            </div>
          </div>
        </div>

        {/* Action Buttons */}
        <div className="flex gap-4 mb-4">
          <a
            href={`/read/${order.book.id}`}
            className="flex-1 bg-primary hover:bg-primary-dark text-white font-semibold py-4 rounded-lg flex items-center justify-center gap-2 transition-all"
          >
            <Book size={20} />
            Read Book Now
          </a>
          <button className="flex-1 border-2 border-primary text-primary hover:bg-primary hover:text-white font-semibold py-4 rounded-lg flex items-center justify-center gap-2 transition-all">
            <Download size={20} />
            Download Receipt
          </button>
        </div>

        <a
          href="/books"
          className="block text-center text-primary hover:text-primary-dark font-medium"
        >
          Continue Shopping 
        </a>
      </div>
    </div>
  );
}
```

---

### 5. Author Earnings Dashboard

**Route:** `/dashboard/author/earnings`

```tsx
import { DollarSign, TrendingUp, Download } from 'lucide-react';

export function AuthorEarningsPage() {
  return (
    <div className="space-y-6">
      {/* Total Earnings Card */}
      <div className="bg-gradient-to-r from-primary/10 to-primary/5 rounded-xl p-6 border-l-4 border-primary">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-neutral-brown-700 mb-1">Total Earnings</p>
            <p className="text-4xl font-bold text-neutral-brown-900">
              KES 145,250
            </p>
            <div className="flex items-center gap-2 mt-2 text-accent-green">
              <TrendingUp size={16} />
              <span className="text-sm font-medium">+12% from last month</span>
            </div>
          </div>
          <div className="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center">
            <DollarSign size={32} className="text-primary" />
          </div>
        </div>
      </div>

      {/* Stats Grid */}
      <div className="grid grid-cols-3 gap-4">
        <div className="bg-white rounded-xl p-4 shadow-sm">
          <p className="text-sm text-neutral-brown-700">Available Balance</p>
          <p className="text-2xl font-bold text-accent-green mt-1">KES 25,000</p>
        </div>
        <div className="bg-white rounded-xl p-4 shadow-sm">
          <p className="text-sm text-neutral-brown-700">Pending Payouts</p>
          <p className="text-2xl font-bold text-primary mt-1">KES 5,000</p>
        </div>
        <div className="bg-white rounded-xl p-4 shadow-sm">
          <p className="text-sm text-neutral-brown-700">Total Paid Out</p>
          <p className="text-2xl font-bold text-neutral-brown-900 mt-1">KES 115,250</p>
        </div>
      </div>

      {/* Request Payout Card */}
      <div className="bg-white rounded-xl p-6 shadow-md">
        <h3 className="text-lg font-bold text-neutral-brown-900 mb-4">
          Request Payout
        </h3>
        <p className="text-sm text-neutral-brown-700 mb-4">
          Minimum payout: KES 1,000
        </p>
        <button className="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 rounded-lg transition-all">
          Request Payout (KES 25,000)
        </button>
      </div>

      {/* Earnings Chart */}
      <div className="bg-white rounded-xl p-6 shadow-md">
        <h3 className="text-lg font-bold text-neutral-brown-900 mb-4">
          Monthly Earnings
        </h3>
        {/* Chart component here */}
      </div>
    </div>
  );
}
```

---

### 6. Payout Request Modal

```tsx
export function PayoutRequestModal({ availableBalance, onClose, onSuccess }: {
  availableBalance: number;
  onClose: () => void;
  onSuccess: () => void;
}) {
  const [method, setMethod] = useState<'mpesa' | 'bank'>('mpesa');
  const [amount, setAmount] = useState(availableBalance);
  const processingFee = amount * 0.02; // 2%
  const netAmount = amount - processingFee;

  return (
    <div className="fixed inset-0 bg-neutral-brown-900/80 flex items-center justify-center z-50">
      <div className="bg-white rounded-2xl p-6 max-w-lg w-full mx-4">
        <h2 className="text-2xl font-bold text-neutral-brown-900 mb-4">
          Request Payout
        </h2>

        {/* Available Balance */}
        <div className="bg-accent-green/10 border border-accent-green/30 rounded-lg p-4 mb-6">
          <p className="text-sm text-neutral-brown-700">Available Balance</p>
          <p className="text-3xl font-bold text-accent-green">
            KES {availableBalance.toLocaleString()}
          </p>
        </div>

        {/* Payment Method Tabs */}
        <div className="flex gap-2 mb-4">
          <button
            onClick={() => setMethod('mpesa')}
            className={`flex-1 py-2 rounded-lg font-medium transition-all ${
              method === 'mpesa'
                ? 'bg-primary text-white'
                : 'bg-neutral-cream text-neutral-brown-700'
            }`}
          >
            M-Pesa
          </button>
          <button
            onClick={() => setMethod('bank')}
            className={`flex-1 py-2 rounded-lg font-medium transition-all ${
              method === 'bank'
                ? 'bg-primary text-white'
                : 'bg-neutral-cream text-neutral-brown-700'
            }`}
          >
            Bank Transfer
          </button>
        </div>

        {/* Amount Input */}
        <div className="mb-4">
          <label className="block text-sm font-medium text-neutral-brown-900 mb-2">
            Payout Amount
          </label>
          <input
            type="number"
            value={amount}
            onChange={(e) => setAmount(Number(e.target.value))}
            max={availableBalance}
            className="w-full px-4 py-3 border-2 border-neutral-brown-500/20 rounded-lg focus:border-primary focus:outline-none"
          />
        </div>

        {/* Summary */}
        <div className="bg-neutral-cream rounded-lg p-4 mb-4 space-y-2 text-sm">
          <div className="flex justify-between">
            <span className="text-neutral-brown-700">Amount Requested</span>
            <span className="font-medium">KES {amount.toLocaleString()}</span>
          </div>
          <div className="flex justify-between">
            <span className="text-neutral-brown-700">Processing Fee (2%)</span>
            <span className="font-medium text-error">
              - KES {processingFee.toLocaleString()}
            </span>
          </div>
          <div className="flex justify-between text-lg font-bold border-t border-neutral-brown-500/20 pt-2 mt-2">
            <span>You Will Receive</span>
            <span className="text-accent-green">KES {netAmount.toLocaleString()}</span>
          </div>
        </div>

        {/* Warning */}
        <div className="bg-primary/10 border border-primary/30 rounded-lg p-3 mb-4">
          <p className="text-sm text-neutral-brown-900">
             Payouts are processed within 3-5 business days
          </p>
        </div>

        {/* Buttons */}
        <div className="flex gap-3">
          <button
            onClick={onClose}
            className="flex-1 border-2 border-neutral-brown-500/20 text-neutral-brown-900 font-semibold py-3 rounded-lg hover:bg-neutral-cream transition-all"
          >
            Cancel
          </button>
          <button
            onClick={onSuccess}
            className="flex-1 bg-primary hover:bg-primary-dark text-white font-semibold py-3 rounded-lg transition-all"
          >
            Confirm Request
          </button>
        </div>
      </div>
    </div>
  );
}
```

---

## Payment States

### Loading States
- Stripe: "Processing payment..."
- M-Pesa: "Waiting for PIN entry..."
- Payout: "Submitting request..."

### Success States
- Green checkmark icon
- Confirmation message
- Order/transaction details
- Next action buttons

### Error States
- Red error icon
- Clear error message
- "Try Again" button
- Support contact info

---

## Security Features

1. **Stripe Elements** - PCI-compliant card input
2. **HTTPS Only** - All payment pages
3. **CSRF Protection** - Via NextAuth
4. **Webhook Verification** - Stripe signature validation
5. **Amount Validation** - Server-side checks
6. **Rate Limiting** - Prevent payment spam

---

## API Integration

```typescript
// Stripe Checkout
POST /api/checkout
Body: { bookId, amount }
Response: { clientSecret }

// M-Pesa STK Push
POST /api/mpesa/stk-push
Body: { phoneNumber, amount }
Response: { checkoutRequestId }

// Check M-Pesa Status
GET /api/mpesa/status/[checkoutRequestId]
Response: { status: 'pending' | 'completed' | 'failed' }

// Request Payout
POST /api/payouts
Body: { amount, method, accountDetails }
Response: { payoutId, status }
```

---

## Testing

### Test Cards (Stripe)
- Success: 4242 4242 4242 4242
- Decline: 4000 0000 0000 0002
- 3D Secure: 4000 0027 6000 3184

### Test M-Pesa
- Use Safaricom sandbox credentials
- Test phone: 254712345678

---

## Next Steps

1. Integrate Stripe SDK
2. Set up M-Pesa Daraja API
3. Implement webhook handlers
4. Add payment analytics
5. Set up automated payouts


##################################################################
# File: docs/DATABASE.md
##################################################################

# Database Schema Documentation

## Overview

AfriReads uses Cloudflare D1 (SQLite) as the database, managed via Prisma ORM. The schema is defined in `prisma/schema.prisma`.

## Entity Relationship Diagram

```mermaid
erDiagram
    User ||--o| Author : "has"
    User ||--o{ Purchase : "makes"
    User ||--o{ TimeAccessLink : "creates"
    Author ||--o{ Book : "writes"
    Author ||--o{ Payment : "receives"
    Book ||--o{ Purchase : "purchased in"
    Book ||--o{ TimeAccessLink : "accessed via"

    User {
        string id PK
        string email UK
        string password
        string name
        enum role
        datetime createdAt
        datetime updatedAt
    }

    Author {
        string id PK
        string userId FK
        string bio
        string profileImage
        string phoneNumber
        string paymentMethod
        string paymentDetails
        float totalEarnings
        datetime createdAt
        datetime updatedAt
    }

    Book {
        string id PK
        string title
        string description
        string coverImage
        string fileKey
        int fileSize
        string fileType
        float price
        int previewPages
        string category
        string language
        datetime publishedAt
        boolean isPublished
        string authorId FK
        datetime createdAt
        datetime updatedAt
    }

    Purchase {
        string id PK
        string userId FK
        string bookId FK
        float amount
        float platformFee
        float authorEarning
        string stripePaymentId
        string mpesaPaymentId
        enum status
        datetime purchasedAt
    }

    Payment {
        string id PK
        string authorId FK
        float amount
        enum status
        string method
        string reference
        datetime paidAt
        datetime createdAt
    }

    TimeAccessLink {
        string id PK
        string token UK
        string userId FK
        string bookId FK
        datetime expiresAt
        boolean isRevoked
        datetime createdAt
    }
```

## Models

### User

Represents all users in the system (readers, authors, admins).

**Fields:**
- `id` (UUID) - Primary key
- `email` (String, Unique) - User's email address
- `password` (String) - Hashed password (bcrypt)
- `name` (String, Optional) - User's full name
- `role` (Enum) - User role: `READER`, `AUTHOR`, or `ADMIN`
- `createdAt` (DateTime) - Account creation timestamp
- `updatedAt` (DateTime) - Last update timestamp

**Relations:**
- One-to-one with `Author` (if user is an author)
- One-to-many with `Purchase`
- One-to-many with `TimeAccessLink`

**Indexes:**
- Unique index on `email`

---

### Author

Extended profile for users with author role.

**Fields:**
- `id` (UUID) - Primary key
- `userId` (UUID, Unique) - Foreign key to User
- `bio` (String, Optional) - Author biography
- `profileImage` (String, Optional) - R2 key for profile image
- `phoneNumber` (String, Optional) - Contact number
- `paymentMethod` (String, Optional) - Payment preference (e.g., "mpesa", "bank")
- `paymentDetails` (String, Optional) - JSON string with payment info
- `totalEarnings` (Float) - Cumulative earnings from book sales
- `createdAt` (DateTime) - Profile creation timestamp
- `updatedAt` (DateTime) - Last update timestamp

**Relations:**
- One-to-one with `User`
- One-to-many with `Book`
- One-to-many with `Payment`

**Indexes:**
- Unique index on `userId`

**Payment Details JSON Structure:**
```json
{
  "mpesa": {
    "phoneNumber": "+254712345678",
    "name": "John Doe"
  },
  "bank": {
    "accountNumber": "1234567890",
    "bankName": "Example Bank",
    "accountName": "John Doe"
  }
}
```

---

### Book

Represents books available on the platform.

**Fields:**
- `id` (UUID) - Primary key
- `title` (String) - Book title
- `description` (String, Optional) - Book description/synopsis
- `coverImage` (String, Optional) - R2 key for cover image
- `fileKey` (String) - R2 object key for book file
- `fileSize` (Integer) - File size in bytes
- `fileType` (String) - File type (pdf, epub)
- `price` (Float) - Book price in KES
- `previewPages` (Integer) - Number of preview pages (default: 10)
- `category` (String, Optional) - Book category/genre
- `language` (String) - Book language (default: "Kalenjin")
- `publishedAt` (DateTime, Optional) - Publication date
- `isPublished` (Boolean) - Publication status (default: false)
- `authorId` (UUID) - Foreign key to Author
- `createdAt` (DateTime) - Creation timestamp
- `updatedAt` (DateTime) - Last update timestamp

**Relations:**
- Many-to-one with `Author`
- One-to-many with `Purchase`
- One-to-many with `TimeAccessLink`

**Indexes:**
- Index on `authorId`
- Index on `isPublished`
- Index on `category`

---

### Purchase

Tracks book purchases and transactions.

**Fields:**
- `id` (UUID) - Primary key
- `userId` (UUID) - Foreign key to User
- `bookId` (UUID) - Foreign key to Book
- `amount` (Float) - Total purchase amount
- `platformFee` (Float) - Platform commission
- `authorEarning` (Float) - Amount credited to author
- `stripePaymentId` (String, Optional) - Stripe payment intent ID
- `mpesaPaymentId` (String, Optional) - M-Pesa transaction ID
- `status` (Enum) - Purchase status: `PENDING`, `COMPLETED`, `FAILED`, `REFUNDED`
- `purchasedAt` (DateTime) - Purchase timestamp

**Relations:**
- Many-to-one with `User`
- Many-to-one with `Book`

**Indexes:**
- Index on `userId`
- Index on `bookId`
- Index on `status`

**Business Logic:**
```typescript
const platformCommission = 10; // 10%
const platformFee = amount * (platformCommission / 100);
const authorEarning = amount - platformFee;
```

---

### Payment

Tracks payouts to authors.

**Fields:**
- `id` (UUID) - Primary key
- `authorId` (UUID) - Foreign key to Author
- `amount` (Float) - Payout amount
- `status` (Enum) - Payment status: `PENDING`, `PROCESSING`, `COMPLETED`, `FAILED`
- `method` (String) - Payment method (mpesa, bank_transfer)
- `reference` (String, Optional) - Transaction reference
- `paidAt` (DateTime, Optional) - Payment completion timestamp
- `createdAt` (DateTime) - Request creation timestamp

**Relations:**
- Many-to-one with `Author`

**Indexes:**
- Index on `authorId`
- Index on `status`

---

### TimeAccessLink

Manages temporary book access via special links.

**Fields:**
- `id` (UUID) - Primary key
- `token` (String, Unique) - Access token (hex string)
- `userId` (UUID) - Foreign key to User
- `bookId` (UUID) - Foreign key to Book
- `expiresAt` (DateTime) - Link expiration timestamp
- `isRevoked` (Boolean) - Revocation status (default: false)
- `createdAt` (DateTime) - Creation timestamp

**Relations:**
- Many-to-one with `User`
- Many-to-one with `Book`

**Indexes:**
- Unique index on `token`
- Index on `userId`
- Index on `bookId`
- Index on `expiresAt`

**Token Generation:**
```typescript
import { randomBytes } from 'crypto';
const token = randomBytes(32).toString('hex'); // 64 characters
```

---

## Migrations

### Creating Migrations

```bash
# Create a new migration
npx prisma migrate dev --name migration_name

# Apply migrations to D1 (production)
npx wrangler d1 execute kalenjin-books-db --file=./prisma/migrations/YYYYMMDDHHMMSS_migration_name/migration.sql
```

### Migration History

Migrations are stored in `prisma/migrations/` directory.

---

## Queries

### Common Query Patterns

#### Get Books with Author Info

```typescript
const books = await prisma.book.findMany({
  where: { isPublished: true },
  include: {
    author: {
      include: {
        user: {
          select: { name: true }
        }
      }
    }
  }
});
```

#### Get User's Purchased Books

```typescript
const purchases = await prisma.purchase.findMany({
  where: { 
    userId: userId,
    status: 'COMPLETED'
  },
  include: {
    book: {
      include: {
        author: {
          include: {
            user: { select: { name: true } }
          }
        }
      }
    }
  }
});
```

#### Get Author Earnings

```typescript
const earnings = await prisma.purchase.aggregate({
  where: {
    book: { authorId: authorId },
    status: 'COMPLETED'
  },
  _sum: {
    authorEarning: true
  }
});
```

---

## Database Maintenance

### Backup

```bash
# Export D1 database
npx wrangler d1 export kalenjin-books-db --output=backup.sql
```

### Restore

```bash
# Import to D1 database
npx wrangler d1 execute kalenjin-books-db --file=backup.sql
```

### Cleanup Expired Links

Run periodically (e.g., daily cron job):

```typescript
import { cleanupExpiredLinks } from '@/lib/access-links';

const deletedCount = await cleanupExpiredLinks();
console.log(`Deleted ${deletedCount} expired access links`);
```

---

## Performance Considerations

### Indexes

All foreign keys and frequently queried fields have indexes for optimal performance.

### Query Optimization

- Use `select` to fetch only needed fields
- Use `include` judiciously to avoid N+1 queries
- Implement pagination for large result sets
- Cache frequently accessed data in Cloudflare KV

### D1 Limitations

- Maximum database size: 10GB (can be increased)
- Maximum query execution time: 30 seconds
- No full-text search (implement using external service if needed)


##################################################################
# File: docs/DASHBOARD.md
##################################################################

# Author Dashboard Documentation

## Overview

The AfriReads author dashboard provides a comprehensive interface for authors to manage their books, track earnings, view analytics, and manage their profile.

## Routes

All dashboard routes are under `/dashboard/author/`:

- `/dashboard/author` - Overview/Home
- `/dashboard/author/books` - My Books
- `/dashboard/author/earnings` - Earnings & Payouts
- `/dashboard/author/analytics` - Analytics (Coming soon)
- `/dashboard/author/profile` - Author Profile
- `/dashboard/author/settings` - Settings (Coming soon)

## Components

### DashboardSidebar

**Location:** `src/components/dashboard/DashboardSidebar.tsx`

Persistent sidebar navigation with:
- AfriReads logo
- Navigation menu
- Active state highlighting
- Logout button

**Features:**
- Sticky positioning
- Active route detection using `usePathname()`
- Icon + text navigation items
- Terracotta highlight for active items

---

## Pages

### 1. Dashboard Overview

**Route:** `/dashboard/author`
**File:** `src/app/dashboard/author/page.tsx`

**Features:**
- **Stats Cards** (4 cards):
  - Total Earnings (with trend %)
  - Books Published
  - Total Sales (with trend %)
  - Available Balance (with payout link)

- **Recent Sales Table**:
  - Last 3 sales
  - Book name, customer, amount, date
  - Link to full analytics

- **Top Performing Books**:
  - Ranked list (1-3)
  - Sales count and earnings per book

**Actions:**
- "Upload New Book" button (top right)

---

### 2. My Books

**Route:** `/dashboard/author/books`
**File:** `src/app/dashboard/author/books/page.tsx`

**Features:**
- **Summary Stats** (4 cards):
  - Total Books
  - Published count
  - Total Sales
  - Total Earnings

- **Books Table**:
  - Columns: Book (with cover), Price, Sales, Earnings, Status, Actions
  - Status badges: Published (green), Draft (gray)
  - Actions: View, Edit, Delete

**Book Status:**
- **Published**: Live on marketplace
- **Draft**: Not yet published

**Actions:**
- View book (eye icon)
- Edit book (edit icon)
- Delete book (trash icon)
- Upload new book (top right button)

---

### 3. Earnings

**Route:** `/dashboard/author/earnings`
**File:** `src/app/dashboard/author/earnings/page.tsx`

**Features:**
- **Stats Cards** (4 cards):
  - Total Earnings (with trend)
  - Available Balance (with payout link)
  - Pending Payouts
  - Total Paid Out

- **Monthly Earnings Chart**:
  - Bar chart showing last 6 months
  - Hover to see exact amounts
  - Terracotta bars with hover effects

- **Request Payout Section**:
  - Shows available balance
  - Minimum payout threshold (KES 1,000)
  - "Request Payout" button
  - Disabled if below minimum

- **Transaction History Table**:
  - Columns: Date, Type, Description, Amount, Status
  - Transaction types: Sale (green), Payout (orange)
  - Shows net earnings after platform fee
  - Completed status badges

**Actions:**
- Export Report (top right)
- Request Payout
- View transaction details

---

### 4. Profile

**Route:** `/dashboard/author/profile`
**File:** `src/app/dashboard/author/profile/page.tsx`

**Features:**
- **Profile Card** (left sidebar):
  - Avatar placeholder
  - Name and email
  - Join date
  - Phone number
  - Location

- **About Section**:
  - Author bio/description

- **Author Information**:
  - Languages
  - Member since date

- **Payment Settings**:
  - Preferred payment method
  - M-Pesa number
  - Bank details (if applicable)

**Actions:**
- "Edit Profile" button (top right)

---

## Design System

### Colors

All dashboard pages use the AfriReads color palette:

```css
/* Primary */
--primary: #E07856 (Terracotta Orange)
--primary-dark: #C85D3A
--primary-light: #F09B7D

/* Neutral */
--neutral-cream: #F5F1E8 (Background)
--neutral-brown-900: #4A3728 (Text)
--neutral-brown-700: #6B5D52 (Secondary text)

/* Accents */
--accent-green: #8B9D83 (Success, positive numbers)
--accent-gold: #D4AF37 (Special highlights)
--error: #D64545 (Negative numbers, errors)
```

### Typography

- **Headings**: Bold, neutral-brown-900
- **Body text**: Regular, neutral-brown-700
- **Numbers**: Bold, context-dependent colors

### Components

#### Stat Card
```tsx
<div className="bg-white rounded-xl p-6 shadow-sm">
  <p className="text-sm text-neutral-brown-700">Label</p>
  <p className="text-2xl font-bold text-neutral-brown-900">Value</p>
</div>
```

#### Status Badge
```tsx
{/* Success */}
<span className="px-3 py-1 bg-accent-green/20 text-accent-green text-sm font-medium rounded-full">
  Published
</span>

{/* Neutral */}
<span className="px-3 py-1 bg-neutral-brown-500/20 text-neutral-brown-700 text-sm font-medium rounded-full">
  Draft
</span>
```

#### Action Button
```tsx
<button className="p-2 text-primary hover:bg-primary/10 rounded transition-colors">
  <Icon size={16} />
</button>
```

---

## Data Flow

### Mock Data

Currently, all pages use mock data. In production, this will be replaced with API calls:

```typescript
// Example: Fetch earnings data
const response = await fetch('/api/author/earnings');
const earnings = await response.json();
```

### API Endpoints Needed

- `GET /api/author/stats` - Dashboard overview stats
- `GET /api/author/books` - List of author's books
- `GET /api/author/earnings` - Earnings data
- `GET /api/author/transactions` - Transaction history
- `POST /api/author/payout` - Request payout
- `GET /api/author/profile` - Author profile data
- `PUT /api/author/profile` - Update profile

---

## Responsive Design

### Desktop (1024px+)
- Sidebar: 256px fixed width
- Main content: Flexible
- Stats: 4 columns
- Tables: Full width

### Tablet (768px - 1023px)
- Sidebar: Collapsible
- Stats: 2 columns
- Tables: Horizontal scroll

### Mobile (< 768px)
- Sidebar: Drawer/modal
- Stats: 1 column
- Tables: Card view

---

## Future Enhancements

### Analytics Page
- Sales trends over time
- Geographic distribution
- Customer demographics
- Book performance comparison
- Revenue forecasting

### Settings Page
- Email notifications
- Privacy settings
- Account management
- API keys (for integrations)

### Book Upload
- Multi-step form
- File upload with progress
- Cover image upload
- Metadata editor
- Preview before publish

---

## Implementation Checklist

- [x] Dashboard sidebar component
- [x] Dashboard layout
- [x] Overview page
- [x] My Books page
- [x] Earnings page
- [x] Profile page
- [ ] Analytics page
- [ ] Settings page
- [ ] Book upload page
- [ ] Book edit page
- [ ] API integration
- [ ] Authentication guards
- [ ] Responsive mobile views
- [ ] Loading states
- [ ] Error handling

---

## Testing

### Manual Testing Checklist

- [ ] Navigate between all pages
- [ ] Verify stats display correctly
- [ ] Test table sorting/filtering
- [ ] Check responsive breakpoints
- [ ] Verify button actions
- [ ] Test payout request flow
- [ ] Validate form inputs

### Test Data

Use the mock data provided in each page component for testing. Replace with real data once API is integrated.

---

## Notes

- All monetary values are in KES (Kenyan Shillings)
- Platform fee is 10% of book price
- Minimum payout threshold: KES 1,000
- Payouts processed in 3-5 business days
- Transaction history shows last 30 days by default


##################################################################
# File: docs/MOCKUP_ALIGNMENT.md
##################################################################

# Landing Page Mockup Alignment

Based on `afrireads_landing_page_1764672267589.png`, the mockup shows:

## Sections in Mockup (Top to Bottom):
1. **Navigation Bar** - Logo, links, CTA button
2. **Hero Section** - Large heading, description, CTA buttons
3. **Featured Books** - Carousel/grid of book cards
4. **Categories Grid** - 6 category cards with icons
5. **Featured Authors** - Author profile cards
6. **Footer** - Links and copyright

## Current Implementation:
 Navigation Bar - Matches (with Categories & Authors links added)
 Hero Section - Matches
 Featured Books - Implemented
 Categories - Removed (now just a link)
 Featured Authors - Removed (now just a link)
 CTA Banner - Added
 Footer - Enhanced

## User Request:
- Remove Categories section  Add as nav link 
- Remove Featured Authors section  Add as nav link 
- Simplify the page 

## Result:
The current implementation is now SIMPLER than the mockup, focusing only on:
- Hero + Featured Books + CTA + Footer

This aligns with the user's request to simplify while keeping navigation accessible.


##################################################################
# File: docs/LANDING_PAGE_ISSUES.md
##################################################################

# Landing Page Issues Analysis

Based on the screenshot at `/home/ngobiro/.gemini/antigravity/brain/582a3931-c933-4278-9c7c-3eaa65d0c9df/landing_page_current_1764692134840.png`:

## Visual Issues Identified:

1. **Book Cards** - Very plain gradient backgrounds, not visually interesting
2. **Typography** - May not be using the custom fonts properly
3. **Spacing** - Sections might be too cramped or too spread out
4. **Color Contrast** - Background colors might not be distinct enough
5. **Overall Polish** - Missing visual hierarchy and refinement

## Recommended Fixes:

### High Priority:
1. Enhance book card visuals with better gradients or patterns
2. Improve spacing between sections
3. Add more visual interest to the hero section
4. Better color differentiation between sections

### Medium Priority:
5. Add subtle animations
6. Improve button styling
7. Better card shadows and depth

### Low Priority:
8. Add background patterns
9. Micro-interactions
10. Polish details


##################################################################
# File: README.md
##################################################################

# AfriReads - Kalenjin Books Marketplace

A modern, full-stack platform for showcasing, selling, and reading Kalenjin books online. Built with Next.js, React, Cloudflare infrastructure, and featuring author management, secure payments, and time-limited book access.

![Next.js](https://img.shields.io/badge/Next.js-16.0-black)
![React](https://img.shields.io/badge/React-19.2-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue)
![Cloudflare](https://img.shields.io/badge/Cloudflare-R2%20%7C%20D1-orange)

##  Features

- ** Book Marketplace**: Browse, search, and purchase Kalenjin books
- ** Author Profiles**: Dedicated pages for authors with their book collections and social media links
- ** Hard Copy Requests**: Request physical copies of books with custom shipping options
- ** Secure Payments**: Stripe integration with M-Pesa support for Kenya
- ** Online Reading**: In-browser book viewer without downloads (PDF.js)
- ** Time-Limited Access**: Generate special links for temporary book access
- ** Author Earnings**: Per-author payment tracking and payout system
- ** Global CDN**: Fast book delivery via Cloudflare CDN
- ** Authentication**: Secure user accounts with role-based access

##  Technology Stack

### Frontend
- **Framework**: Next.js 16.0 (App Router)
- **UI Library**: React 19.2
- **Styling**: Tailwind CSS v4
- **Language**: TypeScript 5.x
- **Book Viewer**: PDF.js + React-PDF

### Backend & Infrastructure
- **Hosting**: Cloudflare Workers/Pages
- **Database**: Cloudflare D1 (SQLite)
- **File Storage**: Cloudflare R2 (S3-compatible)
- **CDN**: Cloudflare CDN
- **ORM**: Prisma with D1 adapter

### Authentication & Payments
- **Auth**: NextAuth.js
- **Payments**: Stripe + M-Pesa integration
- **Validation**: Zod

##  Prerequisites

- Node.js 18+ and npm
- Cloudflare account ([sign up here](https://dash.cloudflare.com/sign-up))
- Stripe account for payments ([sign up here](https://stripe.com))
- Wrangler CLI (installed via npm)

##  Getting Started

### 1. Clone the Repository

```bash
git clone <repository-url>
cd kalenjinbooks
```

### 2. Install Dependencies

```bash
npm install
```

### 3. Set Up Environment Variables

Copy the example environment file:

```bash
cp .env.example .env
```

Edit `.env` and fill in your credentials:

```env
# Database
DATABASE_URL="file:./dev.db"

# Cloudflare
CLOUDFLARE_ACCOUNT_ID=your_account_id
CLOUDFLARE_API_TOKEN=your_api_token
R2_BUCKET_NAME=kalenjin-books
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key

# NextAuth
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret

# Stripe
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
```

### 4. Set Up Cloudflare Infrastructure

#### Login to Cloudflare

```bash
npx wrangler login
```

#### Create R2 Bucket

```bash
npx wrangler r2 bucket create kalenjin-books
```

#### Create D1 Database

```bash
npx wrangler d1 create kalenjin-books-db
```

Copy the database ID from the output and update `wrangler.toml`:

```toml
[[d1_databases]]
binding = "DB"
database_name = "kalenjin-books-db"
database_id = "your-database-id-here"
```

### 5. Initialize Database

Generate Prisma client:

```bash
npx prisma generate
```

Push schema to local database (for development):

```bash
npx prisma db push
```

For Cloudflare D1 (production):

```bash
npx wrangler d1 execute kalenjin-books-db --file=./prisma/migrations/schema.sql
```

### 6. Run Development Server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

##  Project Structure

```
kalenjinbooks/
 prisma/
    schema.prisma          # Database schema
 public/                    # Static assets
 src/
    app/                   # Next.js App Router pages
       api/              # API routes
       books/            # Book pages
       authors/          # Author pages
          [id]/         # Individual author profile
       request-hard-copy/# Hard copy request form
       dashboard/        # Author dashboard
       read/             # Book reader
       layout.tsx        # Root layout
       page.tsx          # Home page
    components/           # React components
       ui/              # Reusable UI components
       books/           # Book-related components
       author/          # Author-related components
    lib/                  # Utility functions
        prisma.ts         # Prisma client
        cloudflare-r2.ts  # R2 storage utilities
        access-links.ts   # Time-limited access
        auth.ts           # NextAuth configuration
 docs/                     # Documentation
 wrangler.toml            # Cloudflare configuration
 .env.example             # Environment variables template
 package.json             # Dependencies
```

##  Development

### Database Management

View database in Prisma Studio:

```bash
npx prisma studio
```

Create a new migration:

```bash
npx prisma migrate dev --name migration_name
```

### Testing Locally

Run the development server:

```bash
npm run dev
```

### Building for Production

```bash
npm run build
```

##  Deployment

### Deploy to Cloudflare Pages

```bash
npx wrangler pages deploy
```

### Set Production Secrets

```bash
npx wrangler secret put NEXTAUTH_SECRET
npx wrangler secret put STRIPE_SECRET_KEY
npx wrangler secret put STRIPE_WEBHOOK_SECRET
npx wrangler secret put R2_ACCESS_KEY_ID
npx wrangler secret put R2_SECRET_ACCESS_KEY
```

### Configure Custom Domain

In Cloudflare Dashboard:
1. Go to Workers & Pages
2. Select your project
3. Navigate to Custom Domains
4. Add your domain

##  Documentation

- [API Documentation](./docs/API.md)
- [Database Schema](./docs/DATABASE.md)
- [Cloudflare Setup Guide](./docs/CLOUDFLARE.md)
- [UI/UX Design Guide](./docs/UI.md)
- [Payment System](./docs/PAYMENTS.md)
- [Author Dashboard](./docs/DASHBOARD.md)
- [UI Mockups](./public/mockups/README.md)

##  Security

- All passwords are hashed using bcrypt
- Book files are stored in private R2 buckets
- Signed URLs for secure file access
- CSRF protection via NextAuth
- Input validation with Zod

##  Key Features Explained

### Time-Limited Access Links

Generate temporary access links for books:

```typescript
import { createAccessLink } from '@/lib/access-links';

const link = await createAccessLink({
  userId: 'user-id',
  bookId: 'book-id',
  expiresInHours: 168, // 7 days
});

// Share link: https://afrireads.com/read/${link.token}
```

### Author Payment Tracking

Platform automatically tracks earnings per author:

```typescript
// On successful purchase
const platformFee = amount * (PLATFORM_COMMISSION_PERCENTAGE / 100);
const authorEarning = amount - platformFee;

await prisma.author.update({
  where: { id: authorId },
  data: { totalEarnings: { increment: authorEarning } }
});
```

### Cloudflare R2 Storage

Upload books to R2:

```typescript
import { uploadBook } from '@/lib/cloudflare-r2';

const fileKey = await uploadBook({
  file: buffer,
  fileName: 'book.pdf',
  contentType: 'application/pdf',
  bookId: 'book-id',
});
```

##  Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

##  License

This project is licensed under the MIT License.

##  Support

For issues and questions:
- Create an issue on GitHub
- Email: support@afrireads.com

##  Acknowledgments

- Built with [Next.js](https://nextjs.org)
- Powered by [Cloudflare](https://cloudflare.com)
- Payments by [Stripe](https://stripe.com)



##################################################################
# File: SETUP.md
##################################################################

# AfriReads - Kalenjin Books Marketplace

## Getting Started

This is the development setup guide for the AfriReads platform.

### Prerequisites

- Node.js 20.x or higher
- npm or yarn
- Git

### Installation

1. **Clone the repository** (if not already done)
```bash
git clone <your-repo-url>
cd kalenjinbooks
```

2. **Install dependencies**
```bash
npm install
```

3. **Set up environment variables**
```bash
cp .env.example .env
```

Edit `.env` and add your configuration values.

4. **Run the development server**
```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) to view the application.

### Available Routes

#### Public Routes
- `/` - Landing page
- `/books` - Books catalog
- `/books/[id]` - Book detail page
- `/authors/[id]` - Author profile

#### Dashboard Routes (Author)
- `/dashboard/author` - Dashboard overview
- `/dashboard/author/books` - My Books
- `/dashboard/author/earnings` - Earnings & Payouts
- `/dashboard/author/profile` - Author Profile

### Development Commands

```bash
# Start development server
npm run dev

# Build for production
npm run build

# Start production server
npm start

# Run linter
npm run lint
```

### Project Structure

```
kalenjinbooks/
 src/
    app/                    # Next.js App Router pages
       dashboard/
          author/        # Author dashboard pages
       globals.css        # Global styles
       layout.tsx         # Root layout
       page.tsx           # Home page
    components/            # React components
       dashboard/         # Dashboard components
    lib/                   # Utility functions
        cloudflare-r2.ts   # R2 storage utilities
        prisma.ts          # Database client
        access-links.ts    # Access link utilities
 public/                    # Static assets
    mockups/              # UI mockups
 docs/                      # Documentation
 prisma/                    # Database schema
 package.json
```

### Tech Stack

- **Framework**: Next.js 16.0.6 (App Router)
- **Language**: TypeScript 5.x
- **Styling**: Tailwind CSS v4
- **Icons**: Lucide React
- **Database**: Cloudflare D1 (SQLite)
- **Storage**: Cloudflare R2
- **Deployment**: Cloudflare Pages/Workers

### Current Status

 **Completed:**
- Project setup and configuration
- Database schema design
- UI/UX design system
- Author dashboard (5 pages)
- Core utilities (R2, Prisma, Access Links)
- Comprehensive documentation

 **In Progress:**
- Landing page
- Books catalog
- Authentication
- Payment integration

 **Coming Soon:**
- Book reader
- Search & filtering
- Analytics
- Mobile responsive views

### Troubleshooting

**Port already in use:**
```bash
# Kill process on port 3000
npx kill-port 3000
# Or use a different port
PORT=3001 npm run dev
```

**Module not found errors:**
```bash
# Clear cache and reinstall
rm -rf node_modules package-lock.json
npm install
```

**Tailwind styles not applying:**
```bash
# Rebuild Tailwind
npm run build
```

### Next Steps

1. Set up Cloudflare account and create R2 bucket
2. Create D1 database
3. Configure authentication with NextAuth.js
4. Integrate Stripe for payments
5. Build landing page and books catalog

See [docs/CLOUDFLARE.md](./docs/CLOUDFLARE.md) for detailed setup instructions.

### Support

For questions or issues, refer to the documentation in the `docs/` directory:
- [API Documentation](./docs/API.md)
- [Database Schema](./docs/DATABASE.md)
- [UI/UX Guide](./docs/UI.md)
- [Dashboard Guide](./docs/DASHBOARD.md)


==================================================================
End of Source Code Export
==================================================================
